<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizz Biología Celular y Molecular (301-400)</title>
    <style>
        :root {
            --primary: #2c3e50; --secondary: #3498db; --success: #27ae60;
            --danger: #e74c3c; --light: #f4f7f6; --marked: #f1c40f;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--light); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 1.5rem; }
        
        /* Índice de navegación */
        .index-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); gap: 5px; margin-bottom: 25px; padding: 15px; background: #eee; border-radius: 8px; max-height: 200px; overflow-y: auto; }
        .index-item { height: 35px; display: flex; align-items: center; justify-content: center; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; font-size: 0.8rem; transition: 0.2s; }
        .index-item.active { border: 2px solid var(--primary); background: #d6eaf8; font-weight: bold; }
        .index-item.correct { background: var(--success); color: white; border-color: #1e8449; }
        .index-item.wrong { background: var(--danger); color: white; border-color: #943126; }
        .index-item.is-marked { background: var(--marked) !important; color: black; border: 2px solid #d4ac0d; }

        /* Preguntas */
        .question-card { display: none; border: 2px solid #f0f0f0; padding: 20px; border-radius: 10px; }
        .question-card.active { display: block; animation: fadeIn 0.3s; }
        .question-text { font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; color: var(--primary); }
        
        .options { list-style: none; padding: 0; }
        .option-item { padding: 12px; margin: 10px 0; background: #fff; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: 0.2s; }
        .option-item:hover { background: #f1f8ff; border-color: var(--secondary); }
        .option-item.correct { background: #d4edda !important; border-color: #28a745; color: #155724; font-weight: bold; pointer-events: none; }
        .option-item.wrong { background: #f8d7da !important; border-color: #dc3545; color: #721c24; pointer-events: none; }
        .option-item.disabled { pointer-events: none; opacity: 0.6; }

        .explanation { margin-top: 20px; padding: 15px; background: #eaf4ff; border-left: 5px solid var(--secondary); display: none; font-size: 0.95rem; border-radius: 0 8px 8px 0; }
        
        .controls { display: flex; justify-content: space-between; margin-top: 25px; gap: 10px; }
        button { padding: 12px; border: none; border-radius: 6px; cursor: pointer; background: var(--secondary); color: white; font-weight: bold; flex: 1; transition: 0.3s; }
        button:disabled { background: #ccc; }
        .mark-btn { background: var(--marked); color: #333; }

        #results-screen { display: none; text-align: center; }
        .score-display { font-size: 4rem; font-weight: bold; color: var(--primary); margin: 20px 0; }
        .retry-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 30px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>Cuestionario de Biología Celular: Preguntas 301 - 400</h1>
    
    <div id="quiz-ui">
        <div class="index-container" id="index-nav"></div>
        <div id="questions-container"></div>
        
        <div class="controls">
            <button id="prev-btn" onclick="move(-1)">Anterior</button>
            <button class="mark-btn" id="mark-toggle" onclick="toggleMark()">Marcar Pregunta</button>
            <button id="next-btn" onclick="move(1)">Siguiente</button>
        </div>
    </div>

    <div id="results-screen">
        <h2>Resultados Finales</h2>
        <div class="score-display" id="score-text">0 / 100</div>
        <div class="retry-options">
            <button onclick="restart('all')">Realizar Completo</button>
            <button onclick="restart('failed')" style="background:var(--danger)">Solo Falladas</button>
            <button onclick="restart('marked')" style="background:var(--marked); color:black">Solo Marcadas</button>
            <button onclick="restart('failed_marked')" style="background:var(--primary)">Falladas + Marcadas</button>
        </div>
    </div>
</div>

<script>
const quizData = [
    {q:"301. La glucólisis es un proceso anaerobio utilizado para catabolizar la glucosa. ¿Qué significa que este proceso sea anaerobio?", a:["No se requiere oxígeno.","No ocurre oxidación.","Tiene lugar en el lisosoma.","La glucosa se descompone mediante la adición de electrones."], c:0, e:"La glucólisis evolucionó antes de que hubiera oxígeno en la atmósfera; no lo consume."},
    {q:"302. ¿Cuál de las siguientes etapas de la degradación de los alimentos genera la mayor cantidad de ATP?", a:["La digestión del almidón en glucosa.","La glucólisis.","El ciclo del ácido cítrico.","La fosforilación oxidativa."], c:3, e:"La fosforilación oxidativa en la mitocondria produce la inmensa mayoría del ATP (aprox. 30-32)."},
    {q:"303. La ventaja para la célula de la oxidación gradual de la glucosa en comparación con su combustión en un solo paso es que:", a:["Se libera más energía libre.","No se pierde energía en forma de calor.","La energía puede extraerse en cantidades utilizables.","Se produce más CO2."], c:2, e:"Si se liberara toda de golpe, se perdería como calor inútil y dañino; los pasos pequeños permiten acoplar la energía a transportadores."},
    {q:"304. ¿Qué tipo de subunidades simples se utilizan preferentemente como fuente de energía inmediata?", a:["Azúcares simples.","Proteínas.","Ácidos grasos libres.","Glicerol."], c:0, e:"La glucosa es el combustible preferido y más rápido para la mayoría de las células."},
    {q:"305. ¿En qué etapa del catabolismo se produce la mayor parte del CO2 que exhalamos?", a:["Digestión en el tracto gastrointestinal.","Glucólisis.","Conversión de piruvato en acetil-CoA y ciclo del ácido cítrico.","Fosforilación oxidativa."], c:2, e:"El ciclo de Krebs oxida los carbonos del acetilo hasta CO2."},
    {q:"306. En el paso 4 de la glucólisis, una azúcar de seis carbonos se divide en dos moléculas de tres carbonos. ¿Qué enzima cataliza esta reacción?", a:["Aldolasa.","Fosfoglucosa isomerasa.","Enolasa.","Triosa fosfato isomerasa."], c:0, e:"La aldolasa rompe la fructosa 1,6-bisfosfato en DHAP y G3P."},
    {q:"307. ¿Qué sucede con el enlace de alta energía generado en el paso 6 de la glucólisis durante el paso 7?", a:["Se hidroliza para impulsar la formación de ATP.","Se hidroliza para impulsar la formación de NADH.","Se hidroliza para generar piruvato.","Se oxida a CO2."], c:0, e:"Es el primer paso de producción de ATP (fosforilación a nivel de sustrato)."},
    {q:"308. Los pasos 7 y 10 de la glucólisis dan como resultado una fosforilación a nivel de sustrato. ¿Cómo se describe mejor este proceso?", a:["El ATP se hidroliza para fosforilar el sustrato.","La energía de la oxidación del sustrato se acopla a la conversión de ADP en ATP.","Se transfieren dos fosfatos sucesivos al AMP y luego al ADP.","El sustrato se hidroliza utilizando ATP."], c:1, e:"Se transfiere un fosfato de alta energía directamente desde el sustrato al ADP."},
    {q:"309. Una quinasa es una enzima que cataliza:", a:["El reordenamiento de enlaces dentro de una molécula.","El cambio de posición de un grupo químico específico.","La oxidación de una molécula mediante la eliminación de un ion hidruro.","La adición de grupos fosfato a otras moléculas."], c:3, e:"Las quinasas transfieren fosfatos del ATP a sustratos."},
    {q:"310. Una mutasa es una enzima que cataliza:", a:["El reordenamiento de enlaces dentro de una sola molécula.","El cambio de posición de un grupo químico específico dentro de una molécula.","La oxidación de una molécula.","La adición de grupos fosfato."], c:1, e:"Mueven grupos funcionales dentro de la misma molécula (ej. fosfoglicerato mutasa)."},
    {q:"311. Una deshidrogenasa es una enzima que cataliza:", a:["El reordenamiento de enlaces.","El cambio de posición de un grupo.","La oxidación de una molécula eliminando un ion hidruro.","La adición de fosfatos."], c:2, e:"Eliminan hidrógenos (electrones) y los transfieren a cofactores como NAD+."},
    {q:"312. En una dieta consistente únicamente en proteínas, ¿cuál es el resultado más probable?", a:["Pérdida de peso porque los aminoácidos no pueden usarse para sintetizar grasa.","Ganancia de músculo inmediata.","Cansancio extremo por falta de energía.","Excreción de más desechos nitrogenados (derivados del amoníaco)."], c:3, e:"El catabolismo de aminoácidos requiere eliminar el grupo amino como urea."},
    {q:"313. ¿Cuál de los siguientes procesos NO tiene lugar en las mitocondrias?", a:["Ciclo del ácido cítrico.","Conversión de piruvato en grupos acetilo activados.","Oxidación de ácidos grasos a acetil-CoA.","Degradación del glucógeno."], c:3, e:"La glucogenólisis ocurre en el citosol."},
    {q:"314. ¿Qué reacción cataliza la enzima fosfoglucosa isomerasa?", a:["Glucosa a glucosa 6-fosfato.","Fructosa 6-fosfato a fructosa 1,6-bisfosfato.","Glucosa 6-fosfato a fructosa 6-fosfato.","Glucosa a glucosa 1-fosfato."], c:2, e:"Prepara la molécula para ser dividida simétricamente más adelante."},
    {q:"315. ¿Qué función tiene la fosforilación de la glucosa por la hexokinasa en el primer paso de la glucólisis?", a:["Ayuda a impulsar la captación de glucosa desde el exterior de la célula (atrapándola dentro).","Genera un enlace de fosfato de alta energía.","Convierte el ATP en una forma más útil.","Permite que la glucosa sea reconocida por la aldolasa."], c:0, e:"La glucosa-6-P cargada negativamente no puede cruzar la membrana y salir."},
    {q:"316. ¿Qué células dependen exclusivamente de la glucólisis para suministrarles ATP?", a:["Levaduras que crecen anaeróbicamente.","Bacterias aeróbicas.","Células del músculo esquelético.","Células vegetales."], c:0, e:"Sin oxígeno ni mitocondrias funcionales, solo la glucólisis fermentativa aporta energía."},
    {q:"317. En condiciones anaeróbicas, el músculo esquelético produce:", a:["Lactato y CO2.","Etanol y CO2.","Solo lactato.","Solo etanol."], c:2, e:"La fermentación láctica regenera NAD+ sin producir CO2."},
    {q:"318. La fermentación es un proceso __________ que convierte __________ en CO2 y __________.", a:["Anaerobio; piruvato; etanol.","Anaerobio; lactato; etanol.","Eucariota; gliceraldehído 3-fosfato; etanol.","Procariota; lactato; propanol."], c:0, e:"Fermentación alcohólica típica de levaduras."},
    {q:"319. ¿Qué molécula es la receptora del ion hidruro (un protón y dos electrones) durante la oxidación del gliceraldehído 3-fosfato?", a:["Oxígeno.","Acetil-CoA.","NAD+.","FADH."], c:2, e:"El NAD+ se reduce a NADH."},
    {q:"320. Si el paso 6 de la glucólisis usara una serina (grupo -OH) en lugar de una cisteína (-SH) en el sitio activo, ¿cómo actuaría la enzima?", a:["Oxidaría el sustrato y lo fosforilaría sin liberarlo.","Oxidaría el sustrato pero no lo liberaría (enlace éster demasiado estable).","Fosforilaría el sustrato en la posición 2.","Se comportaría igual que la enzima normal."], c:1, e:"El enlace tioéster es de alta energía e inestable, lo que permite la transferencia; el éster de oxígeno sería demasiado estable."},
    {q:"321. ¿Cuántas enzimas diferentes y cuántos polipéptidos totales componen el complejo piruvato deshidrogenasa en la mitocondria?", a:["1; 60.","3; 3.","3; 26.","3; 60."], c:3, e:"Es un complejo masivo con múltiples copias de E1, E2 y E3."},
    {q:"322. ¿Cuál de las siguientes afirmaciones sobre el acetil-CoA es verdadera?", a:["Los aminoácidos pueden convertirse en acetil-CoA.","El piruvato se convierte en acetil-CoA en el citosol.","Los triacilgliceroles se transportan al núcleo para producir acetil-CoA.","El oxaloacetato se convierte directamente en acetil-CoA."], c:0, e:"Muchos aminoácidos, ácidos grasos y azúcares convergen en Acetil-CoA."},
    {q:"323. ¿De dónde provienen los átomos de oxígeno de las moléculas de CO2 eliminadas en el ciclo del ácido cítrico?", a:["Agua.","Fosfatos.","Oxígeno molecular (O2).","Acetil-CoA."], c:0, e:"El agua se usa en las reacciones de hidratación para añadir oxígeno que luego sale como CO2."},
    {q:"324. ¿Cuántos ciclos completos del ácido cítrico se requieren para que ambos carbonos del grupo acetilo (del acetil-CoA) se oxiden a CO2?", a:["Uno.","Dos.","Tres.","Cuatro."], c:0, e:"Entran 2 carbonos como acetilo y salen 2 carbonos como CO2 en cada vuelta (aunque no son los mismos átomos en esa vuelta exacta)."},
    {q:"325. ¿Qué compuesto actuó como inhibidor competitivo para descubrir que el ciclo de Krebs es circular?", a:["Malonato.","Malato.","Fumarato.","Succinato."], c:0, e:"Es un análogo estructural del succinato."},
    {q:"326. ¿Qué enzima fue inhibida en el experimento del malonato para descifrar el ciclo?", a:["Aconitasa.","Isocitrato deshidrogenasa.","Malato deshidrogenasa.","Succinato deshidrogenasa."], c:3, e:"El malonato bloquea el sitio activo de la succinato deshidrogenasa."},
    {q:"327. Si se expone a las células a un agente que hace que la membrana mitocondrial interna sea libremente permeable a los protones, ¿qué efecto se observaría?", a:["La relación ATP/ADP en el citoplasma caería.","El NADH se acumularía.","La producción de CO2 cesaría.","El consumo de oxígeno disminuiría."], c:0, e:"Se desacopla la cadena: los protones vuelven sin pasar por la ATP sintasa, no se hace ATP."},
    {q:"328. ¿Qué compuesto NO puede producirse a partir de piruvato mediante una sola reacción enzimática?", a:["Lactato.","Oxaloacetato.","Citrato.","Alanina."], c:2, e:"El citrato requiere acetil-CoA y oxaloacetato (paso complejo), no viene directo del piruvato solo."},
    {q:"329. ¿Qué órgano es el principal responsable de suministrar glucosa al resto del cuerpo mediante gluconeogénesis?", a:["Hígado.","Páncreas.","Bazo.","Vesícula biliar."], c:0, e:"El hígado mantiene la glucemia en ayuno."},
    {q:"330. ¿Qué molécula es un inhibidor alostérico de la fosfofructoquinasa en la glucólisis?", a:["Pi.","AMP.","ADP.","ATP."], c:3, e:"Altos niveles de ATP señalan que la célula tiene energía y no necesita más glucólisis."},
    {q:"331. ¿Qué polímero de glucosa se utiliza como vehículo para almacenar reservas de energía en células animales?", a:["Glucagón.","Glucógeno.","Almidón.","Glicerol."], c:1, e:"Polímero ramificado de glucosa."},
    {q:"332. En humanos, el glucógeno es más útil que la grasa porque:", a:["Produce más energía por gramo.","Puede utilizarse para producir ATP en condiciones anaeróbicas.","Mantiene el cuerpo hidratado.","Ocupa menos espacio que la grasa."], c:1, e:"Las grasas requieren oxígeno obligatoriamente; el glucógeno alimenta la glucólisis rápida."},
    {q:"333. ¿Cuál es la razón principal por la que las células oxidan la glucosa en pasos sucesivos en lugar de quemarla de una vez?", a:["La energía se libera en paquetes pequeños que pueden ser capturados por transportadores.","Evita que las enzimas se degraden.","La combustión directa no produce calor necesario.","Solo el paso a paso permite usar el nitrógeno atmosférico."], c:0, e:"Maximiza la eficiencia de captura de energía útil."},
    {q:"334. El proceso que vincula las reacciones de formación de enlaces de alta energía con los procesos de transporte de protones se llama:", a:["Acoplamiento quimiosmótico.","Bombeo de protones.","Transferencia de electrones.","Síntesis de ATP."], c:0, e:"Es el mecanismo universal de conversión de energía en membranas."},
    {q:"335. ¿Qué parte de la mitocondria es permeable a moléculas de hasta 5000 daltons debido a las porinas?", a:["Membrana interna.","Membrana externa.","Matriz.","Crestas."], c:1, e:"La membrana externa actúa como un tamiz grueso."},
    {q:"336. ¿Dónde se localizan las proteínas de la cadena de transporte de electrones en la mitocondria?", a:["Membrana externa.","Espacio intermembrana.","Membrana interna.","Matriz."], c:2, e:"En las crestas mitocondriales."},
    {q:"337. ¿Qué significa que los electrones sean 'de alta energía'?", a:["Están en un enlace no covalente estable.","No están en el enlace covalente polar más estable y pueden ser atraídos hacia elementos con mayor potencial redox (como el oxígeno).","Se transforman en neutrones en presencia de luz.","Tienen una masa superior a los electrones normales."], c:1, e:"Tienen potencial para ser transferidos a un aceptor más electronegativo liberando energía."},
    {q:"338. ¿Cuál es la fuente de los protones que se bombean fuera de la matriz mitocondrial?", a:["NADH.","Agua (H2O).","FADH.","H2S."], c:1, e:"El agua del medio acuoso (H+) es la fuente inagotable de protones."},
    {q:"339. ¿Qué componente de la cadena de transporte de electrones NO actúa como una bomba de protones?", a:["NADH deshidrogenasa.","Citocromo c.","Citocromo c reductasa.","Citocromo c oxidasa."], c:1, e:"El citocromo c es un transportador móvil soluble, no un complejo transmembrana."},
    {q:"340. ¿Qué componente es necesario para combinar el par de electrones con el oxígeno molecular?", a:["Ubiquinona.","Complejo citocromo b-c1.","Citocromo c deshidrogenasa.","Citocromo c oxidasa."], c:3, e:"El Complejo IV cataliza la reducción final del oxígeno a agua."},
    {q:"341. ¿Qué sucede con el pH en la matriz mitocondrial en comparación con el espacio intermembrana durante la respiración?", a:["El pH es más bajo en la matriz.","El pH es más alto en la matriz (menos protones).","El pH es el mismo en ambos lados.","El pH se vuelve neutro en la matriz."], c:1, e:"Al bombear protones fuera, la matriz se queda alcalina (pH alto)."},
    {q:"342. ¿Qué subunidad de la ATP sintasa se une al ADP + Pi y cataliza la síntesis de ATP mediante un cambio conformacional?", a:["Transportador de H+ transmembrana (Rotor).","Cabeza F1 ATPasa.","Tallo periférico.","Espacio intermembrana."], c:1, e:"La subunidad F1 catalítica está en la matriz."},
    {q:"343. ¿Cuál es la función de los grupos hemo en los complejos de la cadena de transporte de electrones?", a:["Reducir el NADH.","Transportar protones.","Proporcionar una vía para que los electrones fluyan hacia centros de mayor potencial redox.","Liberar calor."], c:2, e:"Los iones de hierro en el hemo cambian de estado de oxidación (Fe2+/Fe3+)."},
    {q:"344. En el centro activo del complejo citocromo c oxidasa se encuentran:", a:["Dos átomos de hierro.","Un átomo de hierro y uno de cobre.","Un átomo de hierro y uno de zinc.","Un átomo de zinc y uno de cobre."], c:1, e:"El centro binuclear Hemo-Cobre es crucial para atrapar el oxígeno."},
    {q:"345. ¿Cuál de estos NO es un transportador de electrones de la cadena respiratoria?", a:["Citocromo.","Quinona.","Rodopsina.","Ion de cobre."], c:2, e:"La rodopsina es un receptor de luz en el ojo."},
    {q:"346. ¿Dónde se concentran los protones en el cloroplasto para impulsar la síntesis de ATP?", a:["Estroma.","Espacio tilacoidal.","Espacio intermembrana.","Citosol."], c:1, e:"Se bombean hacia el interior del tilacoide (lumen)."},
    {q:"347. ¿Cuál es el donante de electrones para la fijación del carbono en la fase oscura de la fotosíntesis?", a:["H2O.","NADH.","FADH2.","NADPH."], c:3, e:"El NADPH proporciona el poder reductor para el Ciclo de Calvin."},
    {q:"348. En la cadena de transporte de electrones de los cloroplastos, los electrones de baja energía se extraen de:", a:["NADPH.","H2O.","CO2.","ATP."], c:1, e:"La fotólisis del agua repone los electrones de la clorofila."},
    {q:"349. La enzima Rubisco añade CO2 a la ribulosa 1,5-bisfosfato, pero también puede añadir O2. ¿Cuál es la relación mínima CO2/O2 para que haya síntesis neta de azúcar?", a:["1:3.","1:2.","3:1.","2:1."], c:2, e:"La fotorrespiración (uso de O2) es un desperdicio; se necesita más carboxilación."},
    {q:"350. ¿Cuál es el orden probable de evolución de estos procesos metabólicos?", a:["Fermentación → Fotosíntesis (H2S) → Fotosíntesis (H2O) → Respiración aeróbica.","Respiración aeróbica → Fermentación → Fotosíntesis.","Fotosíntesis → Respiración → Fermentación.","Fermentación → Respiración → Fotosíntesis."], c:0, e:"De lo simple anaerobio a lo complejo aerobio."},
    {q:"351. ¿Qué afirmación sobre el Retículo Endoplasmático (RE) es FALSA?", a:["Es el principal sitio de síntesis de nuevas membranas.","Las proteínas destinadas al lumen del RE se sintetizan en el RE liso.","Las hormonas esteroides se sintetizan en el RE liso.","La membrana del RE es continua con la membrana nuclear externa."], c:1, e:"Las proteínas se sintetizan en el RE rugoso (con ribosomas)."},
    {q:"352. Las proteínas que se traducen completamente en el citosol y carecen de señal de clasificación terminarán en:", a:["El núcleo.","La mitocondria.","El citosol.","El RE."], c:2, e:"Es el destino por defecto."},
    {q:"353. ¿Cuál es el papel de la señal de localización nuclear (NLS)?", a:["Es reconocida por receptores citoplasmáticos que dirigen la proteína al poro nuclear.","Es una secuencia hidrófoba que permite atravesar la membrana nuclear.","Ayuda a desplegar la proteína para que pase por el poro.","Evita que la proteína difunda fuera del núcleo."], c:0, e:"Las importinas reconocen la NLS."},
    {q:"354. ¿Qué afirmación sobre el transporte nuclear es verdadera?", a:["Las proteínas pasan por el poro nuclear en estado desplegado.","El transporte a través del poro requiere una secuencia de aminoácidos cargados positivamente (lisina/arginina).","Los poros nucleares solo permiten el paso de moléculas de menos de 100 daltons.","La energía proviene de la hidrólisis de ATP directamente."], c:1, e:"Las proteínas pasan plegadas; la señal es rica en cargas positivas."},
    {q:"355. Si una droga bloquea la capacidad de la proteína Ran para intercambiar GDP por GTP, ¿qué sucedería?", a:["Los receptores de importación no podrían unirse a su carga.","Los receptores de importación no podrían liberar su carga en el núcleo.","Las proteínas nucleares se degradarían en el citosol.","El poro nuclear se cerraría permanentemente."], c:1, e:"Ran-GTP es necesario para descargar la proteína importada dentro del núcleo."},
    {q:"356. Las proteínas destinadas a mitocondrias y cloroplastos:", a:["Se transportan en estado plegado.","Deben desplegarse para atravesar las membranas a través de translocadores.","Tienen su señal de clasificación en el extremo C-terminal.","Se sintetizan en el RE rugoso."], c:1, e:"Los translocadores TOM/TIM son poros estrechos."},
    {q:"357. ¿Cuál es la función de la partícula de reconocimiento de señal (SRP)?", a:["Cataliza la formación de enlaces peptídicos.","Se une a la señal de RE en el ribosoma y lo dirige al receptor de SRP en la membrana del RE.","Digiere las proteínas mal plegadas en el citosol.","Desprende las vesículas de clatrina."], c:1, e:"Detiene la traducción y lleva el ribosoma al RE."},
    {q:"358. Una proteína destinada al lumen del RE:", a:["Se traduce en ribosomas libres y se importa tras terminar la síntesis.","Es enhebrada a través de la membrana mientras se está traduciendo.","Se secreta directamente al espacio extracelular sin pasar por el Golgi.","No requiere señal de clasificación."], c:1, e:"Translocación cotraduccional."},
    {q:"359. ¿Qué componente de la maquinaria de transporte al RE corta la secuencia señal una vez que la proteína ha entrado?", a:["SRP.","Receptor de SRP.","Señal peptidasa.","Translocador."], c:2, e:"Libera la proteína madura en el lumen."},
    {q:"360. En una proteína transmembrana de 'un solo paso', el avance a través del translocador se detiene por:", a:["Una secuencia de detención de la transferencia hidrófoba.","El agotamiento del ATP.","La unión de una chaperona.","La degradación en el proteasoma."], c:0, e:"Esta secuencia hidrófoba se convierte en el dominio transmembrana."},
    {q:"361. ¿Cuál es el orden correcto de los orgánulos por los que pasa una proteína de secreción?", a:["RE → endosoma → aparato de Golgi.","RE → aparato de Golgi → vesícula de transporte → membrana plasmática.","Aparato de Golgi → RE → lisosoma.","Núcleo → RE → aparato de Golgi."], c:1, e:"Ruta secretora clásica."},
    {q:"362. ¿Qué proteínas son responsables de seleccionar las moléculas de carga y fijar la cubierta de clatrina a la membrana de la vesícula?", a:["SNAREs.","Rabs.","Adaptinas.","Dinaminas."], c:2, e:"Conectan el receptor de carga con la clatrina."},
    {q:"363. La proteína que ayuda a 'estrangular' el cuello de la vesícula para que se desprenda de la membrana es:", a:["Clatrina.","Adaptina.","Dinamina.","v-SNARE."], c:2, e:"Usa GTP para la fisión de la vesícula."},
    {q:"364. ¿Qué proteínas garantizan que una vesícula se fusione únicamente con su membrana diana correcta?", a:["Clatrina y adaptina.","Proteínas Rab y SNAREs.","Dinamina y actina.","Chaperonas."], c:1, e:"Rab dirige (docking) y SNARE fusiona."},
    {q:"365. Los oligosacáridos ligados a N se unen originalmente a las proteínas en:", a:["El aparato de Golgi.","El Retículo Endoplasmático.","El citosol.","La superficie celular."], c:1, e:"Se transfieren en bloque desde un lípido dolicol en el RE."},
    {q:"366. ¿Dónde se forman los enlaces disulfuro de las proteínas de secreción?", a:["En el citosol (ambiente reductor).","En el lumen del RE (ambiente oxidante).","En el núcleo.","Fuera de la célula solamente."], c:1, e:"El RE tiene un ambiente oxidante favorable para puentes S-S."},
    {q:"367. ¿Qué sucede cuando se activa la 'Respuesta a Proteínas no Plegadas' (UPR)?", a:["La célula detiene la síntesis de todas las proteínas permanentemente.","Se produce más membrana del RE y más chaperonas.","El núcleo se divide inmediatamente.","Se exportan todas las proteínas mal plegadas a la superficie."], c:1, e:"Intenta corregir el estrés aumentando la capacidad de plegamiento."},
    {q:"368. ¿Cuál es el pH típico dentro de un lisosoma?", a:["Neutro (7.2).","Ácido (≈ 5.0).","Alcalino (8.5).","Variable según el tejido."], c:1, e:"Mantenido por bombas de protones para activar hidrolasas ácidas."},
    {q:"369. ¿Qué proceso utiliza una célula para degradar sus propios orgánulos obsoletos?", a:["Pinocitosis.","Fagocitosis.","Autofagia.","Exocitosis."], c:2, e:"'Comerse a sí mismo'."},
    {q:"370. Cuando una señal se distribuye por todo el cuerpo a través del torrente sanguíneo, el tipo de señalización es:", a:["Paracrina.","Endocrina.","Neuronal.","Dependiente de contacto."], c:1, e:"Hormonas viajan largas distancias."},
    {q:"371. La señalización en la que la célula emisora secreta mediadores locales que actúan en células vecinas se llama:", a:["Endocrina.","Paracrina.","Neuronal.","Sináptica."], c:1, e:"Señalización de corto alcance."},
    {q:"372. Un ejemplo de señalización dependiente de contacto es:", a:["La liberación de insulina.","La acción de la acetilcolina en el corazón.","La señalización por la proteína Delta en el desarrollo neuronal.","La difusión de óxido nítrico."], c:2, e:"Requiere contacto físico directo membrana-membrana."},
    {q:"373. ¿Cuál es una característica de las moléculas señalizadoras hidrofílicas?", a:["Atraviesan la membrana plasmática por difusión simple.","Deben unirse a receptores de superficie celular.","Se unen a receptores en el núcleo directamente.","Requieren transportadores activos de tipo bomba para entrar."], c:1, e:"No pueden cruzar la bicapa lipídica."},
    {q:"374. Las proteínas que actúan como 'interruptores moleculares' en la señalización suelen activarse mediante:", a:["Hidrólisis de ATP.","Fosforilación o unión a GTP.","Unión a colesterol.","Desnaturalización térmica."], c:1, e:"Son los dos mecanismos principales de cambio conformacional reversible."},
    {q:"375. ¿Qué sucede cuando un receptor acoplado a proteína G (GPCR) se activa?", a:["La subunidad alfa de la proteína G intercambia su GDP por GTP.","La subunidad beta se fosforila.","El receptor entra en el núcleo.","La proteína G se degrada inmediatamente."], c:0, e:"El receptor actúa como un GEF (factor intercambiador de nucleótidos)."},
    {q:"376. La toxina del cólera afecta a la proteína G (Gs) de modo que:", a:["Impide que se una al GTP.","Bloquea la actividad GTPasa de la subunidad alfa, manteniéndola siempre activa.","Hidroliza el AMPc.","Inactiva la adenilato ciclasa."], c:1, e:"Causa una sobreproducción continua de AMPc y pérdida de agua."},
    {q:"377. El AMP cíclico (AMPc) activa principalmente a la enzima:", a:["Proteína quinasa C (PKC).","Proteína quinasa A (PKA).","MAP quinasa.","Fosfolipasa C."], c:1, e:"PKA fosforila dianas en el citosol y núcleo."},
    {q:"378. La enzima activada por proteínas Gq que divide un fosfolípido de inositol es la:", a:["Adenilato ciclasa.","Fosfolipasa C.","Tirosina quinasa.","Fosfodiesterasa."], c:1, e:"Genera IP3 y DAG."},
    {q:"379. El inositol trifosfato (IP3) actúa liberando __________ desde el retículo endoplasmático.", a:["Sodio (Na+).","Potasio (K+).","Calcio (Ca2+).","Magnesio (Mg2+)."], c:2, e:"Abre canales de Ca2+ activados por ligando."},
    {q:"380. El óxido nítrico (NO) provoca la relajación del músculo liso vascular al activar la enzima:", a:["Adenilato ciclasa.","Guanilato ciclasa (produciendo GMPc).","Fosfodiesterasa.","PKA."], c:1, e:"El GMPc reduce el calcio intracelular y relaja el músculo."},
    {q:"381. Los receptores de superficie más grandes que actúan fosforilando residuos de tirosina tras su dimerización son los:", a:["GPCRs.","RTKs (Receptores Tirosina Quinasa).","Receptores de Notch.","Canales iónicos."], c:1, e:"Se autofosforilan y reclutan proteínas de señalización."},
    {q:"382. La proteína G monomérica que se activa aguas abajo de casi todos los RTKs es:", a:["Ran.","Ras.","Rab.","Rho."], c:1, e:"Ras activa la cascada de MAP quinasas."},
    {q:"383. La vía de señalización que utiliza Akt para promover la supervivencia celular suele ser iniciada por la enzima:", a:["Adenilato ciclasa.","PI 3-quinasa.","MAP quinasa.","Fosfolipasa C."], c:1, e:"PI3K fosforila lípidos de membrana que reclutan a Akt."},
    {q:"384. La señalización por el receptor de Notch es inusual porque:", a:["Usa AMPc como segundo mensajero.","El propio receptor es cortado y su parte citosólica viaja al núcleo para regular genes.","Se activa por luz solar.","Solo se encuentra en bacterias."], c:1, e:"Es un mecanismo de proteólisis regulada directo al núcleo."},
    {q:"385. Los receptores nucleares se activan mediante hormonas esteroides que son:", a:["Hidrofílicas.","Hidrofóbicas (atraviesan la membrana por difusión).","Gases.","Proteínas grandes."], c:1, e:"Deben ser lipofílicas para llegar al receptor intracelular."},
    {q:"386. ¿Cuál de los componentes del citoesqueleto es el más resistente y duradero?", a:["Microtúbulos.","Filamentos de actina.","Filamentos intermedios.","Filamentos de miosina."], c:2, e:"Soportan estrés mecánico sin romperse (como cuerdas)."},
    {q:"387. Los filamentos intermedios en el núcleo forman una estructura llamada:", a:["Huso mitótico.","Lámina nuclear.","Sarcómero.","Anillo contráctil."], c:1, e:"Da forma y soporte a la envoltura nuclear."},
    {q:"388. Las subunidades de los microtúbulos son dímeros de:", a:["Actina G.","Queratina.","Tubulina alfa y beta.","Vimentina."], c:2, e:"Forman protofilamentos huecos."},
    {q:"389. ¿Qué nucleótido hidrolizan las tubulinas para controlar la estabilidad del microtúbulo?", a:["ATP.","GTP.","CTP.","TTP."], c:1, e:"La hidrólisis de GTP desestabiliza el polímero (catástrofe)."},
    {q:"390. El fenómeno por el cual los microtúbulos alternan entre fases de crecimiento y retracción se llama:", a:["Treadmilling.","Inestabilidad dinámica.","Deslizamiento.","Contracción."], c:1, e:"Crucial para la búsqueda de cromosomas y remodelación rápida."},
    {q:"391. Las proteínas motoras que se mueven hacia el extremo POSITIVO de los microtúbulos son las:", a:["Dineínas.","Cinesinas (Kinesinas).","Miosinas.","Tropomiosinas."], c:1, e:"Dineínas van al negativo (centro); Cinesinas al positivo (periferia)."},
    {q:"392. El citoesqueleto que forma el eje de cilios y flagelos tiene una disposición característica de microtúbulos llamada:", a:["9 + 0.","9 + 2.","3 + 3.","5 + 2."], c:1, e:"9 pares externos y 2 microtúbulos centrales."},
    {q:"393. ¿Qué proteína motora es responsable del movimiento de cilios y flagelos?", a:["Miosina II.","Dineína ciliar.","Cinesina-1.","Actina."], c:1, e:"Provoca el deslizamiento de microtúbulos que resulta en batido."},
    {q:"394. ¿Qué nucleótido se une a los monómeros de actina y se hidroliza tras la polimerización?", a:["GTP.","ATP.","UTP.","ADP."], c:1, e:"La actina es una ATPasa."},
    {q:"395. El fenómeno por el cual un filamento de actina gana monómeros en un extremo y los pierde en el otro a la misma velocidad se llama:", a:["Inestabilidad dinámica.","Treadmilling (intercambio rotatorio).","Catástrofe.","Rescate."], c:1, e:"Mantiene la longitud constante con flujo de subunidades."},
    {q:"396. ¿Qué complejo de proteínas nuclea la formación de filamentos de actina ramificados en el lamelipodio?", a:["Complejo ARP.","Forminas.","Complejo de tubulina gamma.","Complejo de miosina."], c:0, e:"ARP2/3 crea ramas a 70 grados."},
    {q:"397. La unidad contráctil del músculo es:", a:["La miofibrilla.","El sarcómero.","El túbulo T.","El disco Z."], c:1, e:"Segmento entre dos discos Z."},
    {q:"398. ¿Cuál de las siguientes es la fase del ciclo celular en la que se replica el ADN?", a:["G1.","S.","G2.","M."], c:1, e:"Fase de Síntesis."},
    {q:"399. La activación de las Cdks (quinasas dependientes de ciclinas) requiere:", a:["La degradación de la Cdk.","La unión de una ciclina y la desfosforilación de sitios inhibidores.","La síntesis de ADN.","El desensamblado del núcleo."], c:1, e:"Necesita la ciclina y la activación correcta por fosfatasa Cdc25."},
    {q:"400. ¿Qué complejo proteico marca a las ciclinas con ubicuitina para su degradación al final de una fase?", a:["Complejo de remodelación de cromatina.","Complejo promotor de la anafase (APC/C).","Complejo de reconocimiento del origen (ORC).","Complejo de condensina."], c:1, e:"La degradación de ciclinas hace irreversible el ciclo."}
];

let userAnswers = new Array(quizData.length).fill(null);
let markedQuestions = new Set();
let currentViewIndices = [];
let currentIdx = 0;

function init(mode = 'all') {
    const container = document.getElementById('questions-container');
    const nav = document.getElementById('index-nav');
    container.innerHTML = ''; nav.innerHTML = '';
    
    if(mode === 'all') currentViewIndices = quizData.map((_, i) => i);
    else if(mode === 'failed') currentViewIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
    else if(mode === 'marked') currentViewIndices = Array.from(markedQuestions);
    else if(mode === 'failed_marked') {
        const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        currentViewIndices = Array.from(new Set([...failed, ...markedQuestions]));
    }

    if(currentViewIndices.length === 0) {
        alert("No hay preguntas en esta selección.");
        return init('all');
    }

    currentViewIndices.forEach((realIdx, displayIdx) => {
        const data = quizData[realIdx];
        const card = document.createElement('div');
        card.className = `question-card ${displayIdx === 0 ? 'active' : ''}`;
        card.id = `q-card-${displayIdx}`;
        card.innerHTML = `
            <div class="question-text">${data.q}</div>
            <ul class="options">
                ${data.a.map((opt, i) => `<li class="option-item" onclick="answer(${realIdx}, ${displayIdx}, ${i})">${opt}</li>`).join('')}
            </ul>
            <div class="explanation" id="exp-${displayIdx}">${data.e}</div>
        `;
        container.appendChild(card);

        const indexBtn = document.createElement('div');
        indexBtn.className = `index-item ${displayIdx === 0 ? 'active' : ''}`;
        indexBtn.id = `nav-${displayIdx}`;
        indexBtn.innerText = realIdx + 301;
        if(markedQuestions.has(realIdx)) indexBtn.classList.add('is-marked');
        if(userAnswers[realIdx] !== null) indexBtn.classList.add(userAnswers[realIdx] === quizData[realIdx].c ? 'correct' : 'wrong');
        indexBtn.onclick = () => jump(displayIdx);
        nav.appendChild(indexBtn);
    });

    currentIdx = 0;
    updateControls();
    document.getElementById('quiz-ui').style.display = 'block';
    document.getElementById('results-screen').style.display = 'none';
}

function answer(realIdx, displayIdx, optIdx) {
    if(userAnswers[realIdx] !== null) return;
    userAnswers[realIdx] = optIdx;
    const items = document.querySelectorAll(`#q-card-${displayIdx} .option-item`);
    const correct = quizData[realIdx].c;
    
    items.forEach((item, i) => {
        if(i === correct) item.classList.add('correct');
        else if(i === optIdx) item.classList.add('wrong');
        else item.classList.add('disabled');
    });

    document.getElementById(`exp-${displayIdx}`).style.display = 'block';
    document.getElementById(`nav-${displayIdx}`).classList.add(optIdx === correct ? 'correct' : 'wrong');
}

function jump(idx) {
    document.querySelector('.question-card.active').classList.remove('active');
    document.querySelector('.index-item.active').classList.remove('active');
    document.getElementById(`q-card-${idx}`).classList.add('active');
    document.getElementById(`nav-${idx}`).classList.add('active');
    currentIdx = idx;
    updateControls();
}

function move(step) {
    let next = currentIdx + step;
    if(next >= 0 && next < currentViewIndices.length) jump(next);
    else if(next === currentViewIndices.length) showResults();
}

function toggleMark() {
    const realIdx = currentViewIndices[currentIdx];
    if(markedQuestions.has(realIdx)) {
        markedQuestions.delete(realIdx);
        document.getElementById(`nav-${currentIdx}`).classList.remove('is-marked');
    } else {
        markedQuestions.add(realIdx);
        document.getElementById(`nav-${currentIdx}`).classList.add('is-marked');
    }
    updateControls();
}

function updateControls() {
    document.getElementById('prev-btn').disabled = (currentIdx === 0);
    document.getElementById('next-btn').innerText = (currentIdx === currentViewIndices.length - 1) ? "Finalizar" : "Siguiente";
    const realIdx = currentViewIndices[currentIdx];
    document.getElementById('mark-toggle').innerText = markedQuestions.has(realIdx) ? "Desmarcar" : "Marcar Pregunta";
}

function showResults() {
    document.getElementById('quiz-ui').style.display = 'none';
    document.getElementById('results-screen').style.display = 'block';
    const score = currentViewIndices.filter(i => userAnswers[i] === quizData[i].c).length;
    document.getElementById('score-text').innerText = `${score} / ${currentViewIndices.length}`;
}

function restart(mode) {
    if (mode === 'all') { 
        userAnswers.fill(null); 
        markedQuestions.clear(); 
    } else {
        // CORRECCIÓN: Si reiniciamos por fallidas o marcadas, 
        // debemos resetear las respuestas de ESAS preguntas específicas
        // para poder volver a contestarlas.
        
        let targetIndices = [];
        if(mode === 'failed') {
            targetIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        } else if(mode === 'marked') {
            targetIndices = Array.from(markedQuestions);
        } else if(mode === 'failed_marked') {
            const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
            targetIndices = Array.from(new Set([...failed, ...markedQuestions]));
        }

        // Limpiamos las respuestas previas de las preguntas que vamos a re-intentar
        targetIndices.forEach(idx => {
            userAnswers[idx] = null;
        });
    }
    
    // Ahora iniciamos el modo correspondiente
    init(mode);
}

// Mejora en la función init para asegurar que los botones de navegación 
// se limpien de colores previos si la respuesta ahora es null
function init(mode = 'all') {
    const container = document.getElementById('questions-container');
    const nav = document.getElementById('index-nav');
    container.innerHTML = ''; nav.innerHTML = '';
    
    if(mode === 'all') currentViewIndices = quizData.map((_, i) => i);
    else if(mode === 'failed') currentViewIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
    else if(mode === 'marked') currentViewIndices = Array.from(markedQuestions);
    else if(mode === 'failed_marked') {
        const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        currentViewIndices = Array.from(new Set([...failed, ...markedQuestions]));
    }

    if(currentViewIndices.length === 0) {
        alert("No hay preguntas en esta selección.");
        return; // Eliminamos el init('all') automático para no confundir al usuario
    }

    currentViewIndices.forEach((realIdx, displayIdx) => {
        const data = quizData[realIdx];
        const card = document.createElement('div');
        card.className = `question-card ${displayIdx === 0 ? 'active' : ''}`;
        card.id = `q-card-${displayIdx}`;
        
        // Generar opciones asegurando que no tengan clases de "correcto/error" previas
        card.innerHTML = `
            <div class="question-text">${data.q}</div>
            <ul class="options">
                ${data.a.map((opt, i) => `<li class="option-item" onclick="answer(${realIdx}, ${displayIdx}, ${i})">${opt}</li>`).join('')}
            </ul>
            <div class="explanation" id="exp-${displayIdx}">${data.e}</div>
        `;
        container.appendChild(card);

        const indexBtn = document.createElement('div');
        indexBtn.className = `index-item ${displayIdx === 0 ? 'active' : ''}`;
        indexBtn.id = `nav-${displayIdx}`;
        indexBtn.innerText = realIdx + 201;
        
        // Solo añadimos clases si realmente hay un valor en userAnswers
        if(markedQuestions.has(realIdx)) indexBtn.classList.add('is-marked');
        if(userAnswers[realIdx] !== null) {
            indexBtn.classList.add(userAnswers[realIdx] === quizData[realIdx].c ? 'correct' : 'wrong');
        }
        
        indexBtn.onclick = () => jump(displayIdx);
        nav.appendChild(indexBtn);
    });

    currentIdx = 0;
    updateControls();
    document.getElementById('quiz-ui').style.display = 'block';
    document.getElementById('results-screen').style.display = 'none';
}

init();
</script>
</body>
</html>