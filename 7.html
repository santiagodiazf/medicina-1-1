<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Biolog√≠a Celular - Cap√≠tulo 7</title>
    <style>
        :root { --primary: #e67e22; --secondary: #2c3e50; --bg: #fdfefe; --card: #ffffff; --success: #27ae60; --error: #c0392b; --accent: #d35400; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--secondary); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { width: 100%; max-width: 900px; background: var(--card); border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); padding: 35px; position: relative; border-top: 5px solid var(--primary); }
        
        header { border-bottom: 2px solid #f2f3f4; padding-bottom: 25px; margin-bottom: 25px; text-align: center; }
        h1 { margin: 0; color: var(--primary); font-size: 2rem; letter-spacing: -0.5px; }
        .status-bar { display: flex; justify-content: space-between; margin-top: 15px; font-size: 0.95rem; color: #7f8c8d; font-weight: 600; background: #f8f9fa; padding: 12px 20px; border-radius: 10px; }
        
        .nav-panel { display: grid; grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 8px; margin-bottom: 35px; max-height: 160px; overflow-y: auto; padding: 15px; background: #fdf2e9; border-radius: 10px; border: 1px solid #fae5d3; }
        .nav-btn { background: white; border: 1px solid #edbb99; color: #a04000; padding: 10px 0; border-radius: 8px; cursor: pointer; transition: all 0.2s; font-weight: bold; font-size: 0.9rem; text-align: center; }
        .nav-btn:hover { background: var(--primary); color: white; transform: translateY(-2px); box-shadow: 0 2px 5px rgba(230, 126, 34, 0.3); }
        .nav-btn.active { background: var(--primary); color: white; border-color: var(--primary); transform: scale(1.05); }
        .nav-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .nav-btn.incorrect { background: var(--error); color: white; border-color: var(--error); }
        .nav-btn.marked { border: 2px solid #f1c40f; position: relative; }
        .nav-btn.marked::after { content: '‚òÖ'; position: absolute; top: -6px; right: -6px; color: #f1c40f; font-size: 12px; background: white; border-radius: 50%; width: 16px; height: 16px; line-height: 16px; text-align: center; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }

        .question-card { animation: fadeIn 0.4s ease-out; }
        .q-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .q-badge { background: var(--secondary); color: white; padding: 6px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: bold; letter-spacing: 0.5px; }
        .mark-btn { background: transparent; border: 2px solid #f1c40f; color: #f39c12; padding: 6px 18px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; gap: 6px; font-size: 0.9rem; }
        .mark-btn:hover { background: #fffcf0; transform: scale(1.05); }
        .mark-btn.active { background: #f1c40f; color: white; }

        .question-text { font-size: 1.25rem; line-height: 1.6; margin-bottom: 30px; color: #2c3e50; font-weight: 500; }

        .options-grid { display: flex; flex-direction: column; gap: 14px; }
        .option { background: white; border: 2px solid #eaeded; padding: 18px 22px; border-radius: 12px; cursor: pointer; transition: all 0.2s; position: relative; font-size: 1.05rem; display: flex; align-items: center; }
        .option:hover:not(.disabled) { border-color: var(--accent); background: #fef5e7; transform: translateX(5px); }
        .option.selected { border-color: var(--primary); background: #fdf2e9; }
        .option.correct { border-color: var(--success); background: #eafaf1; color: #145a32; }
        .option.incorrect { border-color: var(--error); background: #fdedec; color: #7b241c; }
        .option.disabled { cursor: default; pointer-events: none; opacity: 0.9; }

        .feedback { margin-top: 30px; padding: 25px; border-radius: 12px; display: none; animation: slideUp 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .feedback.success { background: #eafaf1; border-left: 6px solid var(--success); }
        .feedback.error { background: #fdedec; border-left: 6px solid var(--error); }
        .feedback h3 { margin: 0 0 10px 0; font-size: 1.2rem; }
        .feedback p { margin: 0; line-height: 1.5; opacity: 0.9; }

        .controls { margin-top: 40px; display: flex; justify-content: space-between; gap: 20px; padding-top: 20px; border-top: 1px solid #f2f3f4; }
        .btn { padding: 14px 28px; border: none; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: 700; transition: 0.2s; display: flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-prev { background: #95a5a6; color: white; }
        .btn-next { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3); }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

        #results-modal { position: fixed; inset: 0; background: rgba(44, 62, 80, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(8px); }
        .modal-content { background: white; padding: 50px; border-radius: 25px; width: 90%; max-width: 550px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3); animation: zoomIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
        .score-circle { width: 160px; height: 160px; border-radius: 50%; background: conic-gradient(var(--success) 0%, #ecf0f1 0%); margin: 0 auto 30px; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 800; color: var(--secondary); position: relative; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .score-circle::before { content: ''; position: absolute; width: 130px; height: 130px; background: white; border-radius: 50%; }
        .score-text { position: relative; z-index: 1; }
        .modal-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 35px; }
        .action-btn { padding: 15px; border-radius: 12px; border: none; font-weight: 800; cursor: pointer; transition: 0.2s; color: white; text-transform: uppercase; font-size: 0.9rem; }
        .btn-all { background: var(--secondary); grid-column: span 2; }
        .btn-failed { background: var(--error); }
        .btn-marked { background: #f39c12; }
        .action-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        @media (max-width: 600px) {
            .container { padding: 20px; }
            .nav-panel { max-height: 120px; }
            .question-text { font-size: 1.1rem; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üß¨ Cap. 7: Del ADN a la Prote√≠na</h1>
        <div class="status-bar">
            <span id="progress-indicator">Pregunta 1 / 49</span>
            <span>Aciertos: <strong id="score-val" style="color: var(--success)">0</strong></span>
        </div>
    </header>

    <div class="nav-panel" id="nav-container"></div>

    <div id="quiz-area">
        <div class="question-card" id="q-card">
            <div class="q-header">
                <span class="q-badge" id="q-number">Q1</span>
                <button class="mark-btn" onclick="toggleMark()">
                    <span id="mark-icon">‚òÜ</span> Marcar
                </button>
            </div>
            <div class="question-text" id="q-text">Cargando...</div>
            <div class="options-grid" id="options-area"></div>
            
            <div class="feedback" id="feedback-area">
                <h3 id="feedback-title"></h3>
                <p id="feedback-msg"></p>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-prev" id="prev-btn" onclick="navigate(-1)">‚¨Ö Anterior</button>
        <button class="btn btn-next" id="next-btn" onclick="navigate(1)">Siguiente ‚û°</button>
    </div>
</div>

<div id="results-modal">
    <div class="modal-content">
        <h2>Resultados Finales</h2>
        <div class="score-circle" id="final-circle">
            <span class="score-text" id="final-score">0%</span>
        </div>
        <p id="final-msg" style="font-size: 1.1rem; color: #7f8c8d;">¬°Has completado el cuestionario!</p>
        <div class="modal-actions">
            <button class="action-btn btn-all" onclick="restart('all')">üîÑ Repetir Todo</button>
            <button class="action-btn btn-failed" onclick="restart('failed')">‚ùå Solo Falladas</button>
            <button class="action-btn btn-marked" onclick="restart('marked')">‚≠ê Solo Marcadas</button>
        </div>
        <button onclick="closeModal()" style="margin-top:20px; background:none; border:none; text-decoration:underline; cursor:pointer; color:#95a5a6; font-size:0.9rem;">Cerrar y revisar respuestas</button>
    </div>
</div>

<script>
const db = [
  {
    "id": 1,
    "q": "El flujo de informaci√≥n gen√©tica en las c√©lulas sigue generalmente el dogma central, que es:",
    "options": [
      "ADN -> Prote√≠na -> ARN",
      "ARN -> ADN -> Prote√≠na",
      "ADN -> ARN -> Prote√≠na",
      "Prote√≠na -> ARN -> ADN"
    ],
    "correct": 2,
    "exp": "El dogma central describe el flujo de informaci√≥n desde el ADN al ARN (transcripci√≥n) y del ARN a la prote√≠na (traducci√≥n)."
  },
  {
    "id": 2,
    "q": "El ARN se diferencia del ADN en que:",
    "options": [
      "Contiene desoxirribosa en lugar de ribosa.",
      "Contiene la base Uracilo (U) en lugar de Timina (T).",
      "Es siempre bicatenario.",
      "Es mucho m√°s estable qu√≠micamente."
    ],
    "correct": 1,
    "exp": "El ARN usa ribosa y uracilo, y suele ser monocatenario y menos estable que el ADN."
  },
  {
    "id": 3,
    "q": "La transcripci√≥n es llevada a cabo por la enzima:",
    "options": [
      "ADN polimerasa",
      "ARN polimerasa",
      "Ribosoma",
      "Transcriptasa inversa"
    ],
    "correct": 1,
    "exp": "La ARN polimerasa sintetiza una cadena de ARN complementaria a partir de un molde de ADN."
  },
  {
    "id": 4,
    "q": "La ARN polimerasa sintetiza ARN en la direcci√≥n:",
    "options": [
      "5' a 3'",
      "3' a 5'",
      "Ambas direcciones",
      "N terminal a C terminal"
    ],
    "correct": 0,
    "exp": "Al igual que la ADN polimerasa, la ARN polimerasa a√±ade nucle√≥tidos al extremo 3'-OH libre, creciendo 5'->3'."
  },
  {
    "id": 5,
    "q": "¬øQu√© afirmaci√≥n es CIERTA sobre la ARN polimerasa a diferencia de la ADN polimerasa?",
    "options": [
      "Requiere un cebador (primer) para iniciar.",
      "Tiene una actividad de correcci√≥n de pruebas muy alta, igual que la ADN polimerasa.",
      "Puede desenrollar la h√©lice de ADN por s√≠ misma y no necesita cebador.",
      "Solo funciona en el citoplasma."
    ],
    "correct": 2,
    "exp": "La ARN polimerasa puede iniciar la s√≠ntesis 'de novo' sin cebador y tiene actividad helicasa intr√≠nseca, pero comete m√°s errores."
  },
  {
    "id": 6,
    "q": "En bacterias, el factor Sigma (œÉ) es necesario para:",
    "options": [
      "La terminaci√≥n de la transcripci√≥n.",
      "El reconocimiento del promotor y el inicio de la transcripci√≥n.",
      "La elongaci√≥n de la cadena de ARN.",
      "El splicing del ARN."
    ],
    "correct": 1,
    "exp": "El factor Sigma gu√≠a a la ARN polimerasa bacteriana hacia las secuencias promotoras espec√≠ficas (-35 y -10)."
  },
  {
    "id": 7,
    "q": "En eucariotas, ¬øqu√© ARN polimerasa transcribe la mayor√≠a de los genes codificantes de prote√≠nas (ARNm)?",
    "options": [
      "ARN Polimerasa I",
      "ARN Polimerasa II",
      "ARN Polimerasa III",
      "Primasa"
    ],
    "correct": 1,
    "exp": "La Pol II transcribe todos los ARNm codificantes de prote√≠nas, as√≠ como miARN y lncARN."
  },
  {
    "id": 8,
    "q": "El ARNm eucariota maduro posee las siguientes modificaciones EXCEPTO:",
    "options": [
      "Un capuch√≥n (cap) de 7-metilguanosina en el extremo 5'.",
      "Una cola de poli-A en el extremo 3'.",
      "La eliminaci√≥n de intrones (splicing).",
      "La uni√≥n covalente de amino√°cidos."
    ],
    "correct": 3,
    "exp": "Los amino√°cidos se unen a los ARNt, no covalentemente al ARNm. Las otras son pasos clave del procesamiento del ARNm."
  },
  {
    "id": 9,
    "q": "Los intrones son:",
    "options": [
      "Secuencias codificantes que se traducen a prote√≠na.",
      "Secuencias no codificantes que se eliminan del pre-ARNm (splicing).",
      "Prote√≠nas que regulan la transcripci√≥n.",
      "Errores de replicaci√≥n."
    ],
    "correct": 1,
    "exp": "Los intrones son secuencias intercaladas que se transcriben pero se eliminan antes de que el ARNm salga del n√∫cleo."
  },
  {
    "id": 10,
    "q": "El splicing alternativo permite:",
    "options": [
      "Corregir errores en el ADN.",
      "Producir m√∫ltiples prote√≠nas diferentes a partir de un solo gen.",
      "Aumentar la velocidad de transcripci√≥n.",
      "Eliminar los exones."
    ],
    "correct": 1,
    "exp": "Al combinar exones de diferentes maneras, un gen puede codificar varias isoformas proteicas."
  },
  {
    "id": 11,
    "q": "La traducci√≥n ocurre en:",
    "options": [
      "El n√∫cleo",
      "El ribosoma (en el citoplasma o RER)",
      "El aparato de Golgi",
      "El lisosoma"
    ],
    "correct": 1,
    "exp": "Los ribosomas son las m√°quinas moleculares que leen el ARNm y sintetizan polip√©ptidos."
  },
  {
    "id": 12,
    "q": "El c√≥digo gen√©tico es 'degenerado' o redundante, lo que significa que:",
    "options": [
      "Es ambiguo: un cod√≥n puede codificar varios amino√°cidos.",
      "Varios codones diferentes pueden codificar el mismo amino√°cido.",
      "El c√≥digo var√≠a entre especies.",
      "Se degrada con el tiempo."
    ],
    "correct": 1,
    "exp": "Hay 64 codones para 20 amino√°cidos; por ejemplo, leucina tiene 6 codones distintos. Esto amortigua el efecto de las mutaciones."
  },
  {
    "id": 13,
    "q": "¬øQu√© mol√©cula act√∫a como adaptador, transportando el amino√°cido espec√≠fico al ribosoma?",
    "options": [
      "ARNm",
      "ARNt (transferencia)",
      "ARNr (ribos√≥mico)",
      "ADN"
    ],
    "correct": 1,
    "exp": "El ARNt tiene un anticod√≥n que se aparea con el cod√≥n del ARNm y lleva el amino√°cido correspondiente en su extremo 3'."
  },
  {
    "id": 14,
    "q": "La enzima aminoacil-ARNt sintetasa:",
    "options": [
      "Sintetiza el ARNt.",
      "Une covalentemente el amino√°cido correcto a su ARNt correspondiente.",
      "Polimeriza la cadena pept√≠dica.",
      "Degrada prote√≠nas mal plegadas."
    ],
    "correct": 1,
    "exp": "Es crucial para la fidelidad de la traducci√≥n; 'carga' el ARNt con su amino√°cido gastando ATP."
  },
  {
    "id": 15,
    "q": "El ribosoma est√° compuesto por:",
    "options": [
      "Solo prote√≠nas.",
      "Solo ARN.",
      "Prote√≠nas y ARN ribos√≥mico (ARNr).",
      "ADN y l√≠pidos."
    ],
    "correct": 2,
    "exp": "Es un complejo ribonucleoproteico con una subunidad grande y una peque√±a."
  },
  {
    "id": 16,
    "q": "¬øQu√© sitio del ribosoma recibe al ARNt cargado entrante?",
    "options": [
      "Sitio A (Aminoacil)",
      "Sitio P (Peptidil)",
      "Sitio E (Exit/Salida)",
      "Sitio de uni√≥n al ARNm"
    ],
    "correct": 0,
    "exp": "El nuevo ARNt entra al sitio A, la cadena crece en el sitio P, y el ARNt vac√≠o sale por el sitio E."
  },
  {
    "id": 17,
    "q": "El cod√≥n de inicio para la traducci√≥n en eucariotas suele ser:",
    "options": [
      "AUG (Metionina)",
      "UAA",
      "UAG",
      "GGG"
    ],
    "correct": 0,
    "exp": "AUG codifica para Metionina y marca el inicio del marco de lectura."
  },
  {
    "id": 18,
    "q": "La terminaci√≥n de la traducci√≥n ocurre cuando:",
    "options": [
      "El ribosoma llega al final del ARNm.",
      "El ribosoma encuentra un cod√≥n de parada (UAA, UAG, UGA).",
      "Se agotan los amino√°cidos.",
      "La ARN polimerasa se detiene."
    ],
    "correct": 1,
    "exp": "Los codones de parada no reclutan ARNt, sino factores de liberaci√≥n que disocian el complejo ribosomal."
  },
  {
    "id": 19,
    "q": "Los proteasomas son complejos encargados de:",
    "options": [
      "Sintetizar prote√≠nas.",
      "Degradar prote√≠nas marcadas con ubiquitina.",
      "Plegar prote√≠nas (chaperonas).",
      "Transportar prote√≠nas."
    ],
    "correct": 1,
    "exp": "El proteasoma recicla prote√≠nas da√±adas o innecesarias que han sido etiquetadas con cadenas de ubiquitina."
  },
  {
    "id": 20,
    "q": "Las ribozimas son:",
    "options": [
      "Enzimas hechas de prote√≠na.",
      "Mol√©culas de ARN con actividad catal√≠tica.",
      "Ribosomas inactivos.",
      "Az√∫cares ribosa."
    ],
    "correct": 1,
    "exp": "El ARN puede plegarse y catalizar reacciones; el ejemplo m√°s importante es la actividad peptidil transferasa del propio ribosoma."
  },
  {
    "id": 21,
    "q": "¬øQu√© se requiere para exportar un ARNm del n√∫cleo al citoplasma?",
    "options": [
      "Que est√© completamente procesado (cap 5', cola poli-A, splicing).",
      "Que est√© unido a un ribosoma.",
      "Que sea ADN de doble cadena.",
      "No se requiere nada especial, difunde libremente."
    ],
    "correct": 0,
    "exp": "Solo los ARNm maduros y correctamente procesados son reconocidos por el complejo del poro nuclear para su exportaci√≥n."
  },
  {
    "id": 22,
    "q": "El 'Mundo del ARN' es una hip√≥tesis que sugiere que:",
    "options": [
      "El ARN fue el material gen√©tico y catal√≠tico original antes que el ADN y las prote√≠nas.",
      "El ARN es m√°s importante que el ADN hoy en d√≠a.",
      "Las c√©lulas est√°n hechas solo de ARN.",
      "El ARN no sirve para nada."
    ],
    "correct": 0,
    "exp": "Se basa en la capacidad del ARN para almacenar informaci√≥n y catalizar reacciones (ribozimas)."
  },
  {
    "id": 23,
    "q": "¬øCu√°ntos marcos de lectura posibles tiene una secuencia de ARN de cadena simple?",
    "options": [
      "1",
      "2",
      "3",
      "6"
    ],
    "correct": 2,
    "exp": "Al leerse en tripletes, se puede empezar en el nucle√≥tido 1, 2 o 3, dando 3 marcos posibles. (El ADN de doble cadena tendr√≠a 6, 3 por hebra)."
  },
  {
    "id": 24,
    "q": "La regi√≥n promotora de un gen contiene t√≠picamente:",
    "options": [
      "Secuencias consenso como la caja TATA donde se une la maquinaria de transcripci√≥n.",
      "El cod√≥n de parada.",
      "Intrones.",
      "La cola poli-A."
    ],
    "correct": 0,
    "exp": "El promotor se encuentra 'aguas arriba' (upstream) del sitio de inicio y regula la uni√≥n de la polimerasa."
  },
  {
    "id": 25,
    "q": "Un polirribosoma (o polisoma) es:",
    "options": [
      "Un ribosoma con muchas subunidades.",
      "M√∫ltiples ribosomas traduciendo un mismo ARNm simult√°neamente.",
      "Un ribosoma unido a muchos ARNm.",
      "Un tipo de c√°ncer."
    ],
    "correct": 1,
    "exp": "Permite sintetizar muchas copias de prote√≠na r√°pidamente a partir de un solo mensaje."
  },
  {
    "id": 26,
    "q": "¬øQu√© antibi√≥ticos funcionan inhibiendo la s√≠ntesis de prote√≠nas bacterianas?",
    "options": [
      "Tetraciclina, Estreptomicina, Cloranfenicol.",
      "Penicilina (pared celular).",
      "Aspirina.",
      "Insulina."
    ],
    "correct": 0,
    "exp": "Muchos antibi√≥ticos explotan las diferencias sutiles entre ribosomas procariotas (70S) y eucariotas (80S)."
  },
  {
    "id": 28,
    "q": "Las chaperonas moleculares:",
    "options": [
      "Ayudan a las prote√≠nas a plegarse correctamente.",
      "Degradan prote√≠nas.",
      "Transportan ARNm.",
      "Replican ADN."
    ],
    "correct": 0,
    "exp": "Previenen la agregaci√≥n de prote√≠nas desplegadas y asisten en alcanzar la conformaci√≥n nativa."
  },
  {
    "id": 29,
    "q": "La ubiquitinaci√≥n de una prote√≠na suele marcarla para:",
    "options": [
      "Ser secretada.",
      "Ser degradada por el proteasoma.",
      "Ir al n√∫cleo.",
      "Aumentar su actividad."
    ],
    "correct": 1,
    "exp": "Una cadena de poli-ubiquitina es la 'marca de la muerte' para prote√≠nas citos√≥licas."
  },
  {
    "id": 30,
    "q": "En el c√≥digo gen√©tico, 'Wobble' (bamboleo) se refiere a:",
    "options": [
      "La flexibilidad en el emparejamiento de bases en la tercera posici√≥n del cod√≥n.",
      "Un error de lectura.",
      "La inestabilidad del ribosoma.",
      "El movimiento del ARNm."
    ],
    "correct": 0,
    "exp": "Permite que un mismo ARNt reconozca varios codones sin√≥nimos que difieren en la 3¬™ base."
  },
  {
    "id": 31,
    "q": "¬øQu√© es un snRNP (ribonucleoprote√≠na nuclear peque√±a)?",
    "options": [
      "Parte del espliceosoma (spliceosome) que realiza el splicing.",
      "Un ribosoma peque√±o.",
      "Un fragmento de ADN.",
      "Una prote√≠na de membrana."
    ],
    "correct": 0,
    "exp": "Los snRNPs (U1, U2, etc.) reconocen los sitios de corte en los intrones."
  },
  {
    "id": 32,
    "q": "La diferencia principal entre la transcripci√≥n en procariotas y eucariotas es:",
    "options": [
      "En procariotas, transcripci√≥n y traducci√≥n son simult√°neas (acopladas); en eucariotas est√°n separadas por la envoltura nuclear.",
      "Los procariotas tienen intrones.",
      "Los eucariotas usan factor Sigma.",
      "No hay diferencia."
    ],
    "correct": 0,
    "exp": "La compartimentaci√≥n eucariota permite un procesamiento complejo (splicing) antes de la traducci√≥n."
  },
  {
    "id": 33,
    "q": "La secuencia de amino√°cidos de una prote√≠na est√° determinada directamente por:",
    "options": [
      "La secuencia de nucle√≥tidos del ARNm.",
      "La forma del ribosoma.",
      "La cantidad de ATP.",
      "Las histonas."
    ],
    "correct": 0,
    "exp": "Es la traducci√≥n literal de la secuencia de codones del ARNm."
  },
  {
    "id": 34,
    "q": "¬øQu√© tipo de enlace une los amino√°cidos en una prote√≠na?",
    "options": [
      "Enlace pept√≠dico",
      "Enlace fosfodi√©ster",
      "Enlace de hidr√≥geno",
      "Enlace i√≥nico"
    ],
    "correct": 0,
    "exp": "Es un enlace covalente amida entre el grupo carboxilo de uno y el amino del siguiente."
  },
  {
    "id": 35,
    "q": "Si el anticod√≥n de un ARNt es 5'-GCA-3', ¬øqu√© cod√≥n de ARNm reconoce?",
    "options": [
      "5'-UGC-3'",
      "5'-CGU-3'",
      "3'-CGU-5' (que se lee 5'-UGC-3')",
      "3'-CGU-5' -> Complementario es 5'-UGC-3'."
    ],
    "correct": 0,
    "exp": "Antiparalelo y complementario: 5'-GCA-3' se aparea con 3'-CGU-5', que es 5'-UGC-3' (Ciste√≠na)."
  },
  {
    "id": 36,
    "q": "La concentraci√≥n de una prote√≠na en la c√©lula depende de:",
    "options": [
      "El equilibrio entre su tasa de s√≠ntesis y su tasa de degradaci√≥n.",
      "Solo de la transcripci√≥n.",
      "Solo de la traducci√≥n.",
      "El tama√±o del genoma."
    ],
    "correct": 0,
    "exp": "Es un proceso din√°mico regulado a m√∫ltiples niveles (transcripci√≥n, estabilidad ARNm, traducci√≥n, degradaci√≥n prote√≠na)."
  },
  {
    "id": 37,
    "q": "¬øQu√© es un gen?",
    "options": [
      "Un segmento de ADN que contiene las instrucciones para hacer una prote√≠na o una mol√©cula de ARN funcional.",
      "Cualquier segmento de ADN.",
      "Un cromosoma entero.",
      "Una prote√≠na."
    ],
    "correct": 0,
    "exp": "Definici√≥n molecular moderna."
  },
  {
    "id": 38,
    "q": "La ARN polimerasa II requiere ______ para iniciar la transcripci√≥n.",
    "options": [
      "Factores de transcripci√≥n generales (como TFIID, TFIIH).",
      "Solo ATP.",
      "Factor Sigma.",
      "Primasa."
    ],
    "correct": 0,
    "exp": "Forman el complejo de pre-iniciaci√≥n en el promotor."
  },
  {
    "id": 39,
    "q": "La cola de poli-A del ARNm:",
    "options": [
      "Aumenta la estabilidad y ayuda en la exportaci√≥n y traducci√≥n.",
      "Marca el ARNm para degradaci√≥n inmediata.",
      "Es codificada por el genoma (hay muchas Ts en el ADN).",
      "Es un error."
    ],
    "correct": 0,
    "exp": "Es a√±adida post-transcripcionalmente por la poli-A polimerasa."
  },
  {
    "id": 40,
    "q": "¬øQu√© estructura ribosomal cataliza la formaci√≥n del enlace pept√≠dico?",
    "options": [
      "El ARNr 23S (en bacterias) o 28S (eucariotas) de la subunidad grande.",
      "Las prote√≠nas ribosomales.",
      "El ARNm.",
      "El factor de elongaci√≥n."
    ],
    "correct": 0,
    "exp": "El ribosoma es una ribozima; el ARN es el catalizador."
  },
  {
    "id": 41,
    "q": "El cod√≥n de parada (Stop codon):",
    "options": [
      "No codifica ning√∫n amino√°cido.",
      "Codifica metionina.",
      "Codifica tript√≥fano.",
      "Se une a un ARNt vac√≠o."
    ],
    "correct": 0,
    "exp": "Es reconocido por factores de liberaci√≥n proteicos."
  },
  {
    "id": 42,
    "q": "Un ARNm policistr√≥nico:",
    "options": [
      "Codifica varias prote√≠nas diferentes (com√∫n en bacterias).",
      "Tiene muchas colas poli-A.",
      "Es exclusivo de humanos.",
      "Est√° mutado."
    ],
    "correct": 0,
    "exp": "Los operones bacterianos producen un solo ARNm largo con m√∫ltiples marcos de lectura."
  },
  {
    "id": 43,
    "q": "¬øQu√© ocurre en el sitio P del ribosoma?",
    "options": [
      "Sostiene el ARNt unido a la cadena polipept√≠dica en crecimiento.",
      "Entra el nuevo amino√°cido.",
      "Sale el ARNt.",
      "Se une el capuch√≥n."
    ],
    "correct": 0,
    "exp": "P de Peptidil-ARNt."
  },
  {
    "id": 44,
    "q": "La energ√≠a para la traducci√≥n (uni√≥n de ARNt, translocaci√≥n) proviene principalmente de:",
    "options": [
      "GTP",
      "ATP",
      "NADH",
      "Glucosa"
    ],
    "correct": 0,
    "exp": "Los factores de elongaci√≥n y de inicio son GTPasas."
  },
  {
    "id": 45,
    "q": "El splicing es realizado por un complejo llamado:",
    "options": [
      "Espliceosoma (Spliceosome)",
      "Ribosoma",
      "Nucleosoma",
      "Proteasoma"
    ],
    "correct": 0,
    "exp": "Complejo de snRNPs y prote√≠nas."
  },
  {
    "id": 46,
    "q": "¬øCu√°l es la funci√≥n del capuch√≥n 5' (5' Cap)?",
    "options": [
      "Proteger el ARNm de la degradaci√≥n y ayudar al ribosoma a encontrar el inicio.",
      "Terminar la transcripci√≥n.",
      "Codificar el primer amino√°cido.",
      "Unir intrones."
    ],
    "correct": 0,
    "exp": "El ribosoma eucariota se une al Cap y escanea buscando el AUG."
  },
  {
    "id": 47,
    "q": "Las tetraciclinas act√∫an:",
    "options": [
      "Bloqueando la uni√≥n del aminoacil-ARNt al sitio A del ribosoma bacteriano.",
      "Inhibiendo la ARN polimerasa.",
      "Rompiendo el ADN.",
      "Impidiendo el splicing."
    ],
    "correct": 0,
    "exp": "Es un mecanismo bacteriost√°tico cl√°sico."
  },
  {
    "id": 48,
    "q": "La hip√≥tesis de 'un gen, una enzima' (ahora 'un gen, un polip√©ptido') fue propuesta por:",
    "options": [
      "Beadle y Tatum",
      "Watson y Crick",
      "Darwin",
      "Mendel"
    ],
    "correct": 0,
    "exp": "Aunque hay excepciones (splicing alternativo, ARNs no codificantes), es el concepto fundacional."
  },
  {
    "id": 49,
    "q": "¬øQu√© mol√©cula contiene el anticod√≥n?",
    "options": [
      "ARNt",
      "ARNm",
      "ARNr",
      "ADN"
    ],
    "correct": 0,
    "exp": "El anticod√≥n del ARNt es complementario al cod√≥n del ARNm."
  }
];

// L√≥gica
let current = 0;
let userState = new Array(db.length).fill(null);
let marked = new Set();
let activeIndices = db.map((_, i) => i);

function init() {
    renderNav();
    loadQuestion(0);
}

function renderNav() {
    // CORRECCI√ìN: El ID correcto en HTML es 'nav-container', no 'nav-grid'
    const grid = document.getElementById('nav-container');
    
    if (!grid) return; // Seguridad extra
    
    grid.innerHTML = '';
    activeIndices.forEach((realIdx, viewIdx) => {
        const btn = document.createElement('div');
        const s = userState[realIdx];
        let cls = 'nav-btn';
        if (viewIdx === current) cls += ' active';
        if (s) cls += s.ok ? ' correct' : ' incorrect';
        if (marked.has(realIdx)) cls += ' marked';
        
        btn.className = cls;
        btn.innerText = viewIdx + 1;
        btn.onclick = () => loadQuestion(viewIdx);
        grid.appendChild(btn);
    });
    
    // Stats
    const ok = userState.filter(x => x && x.ok).length;
    document.getElementById('score-val').innerText = ok;
    document.getElementById('progress-indicator').innerText = `Pregunta ${current + 1} / ${activeIndices.length}`;
}

function loadQuestion(idx) {
    current = idx;
    const realIdx = activeIndices[idx];
    const data = db[realIdx];
    const s = userState[realIdx];

    document.getElementById('q-number').innerText = `Q${idx + 1}`;
    document.getElementById('q-text').innerText = data.q;
    
    // Mark Btn
    const mb = document.querySelector('.mark-btn');
    mb.className = marked.has(realIdx) ? 'mark-btn active' : 'mark-btn';
    mb.innerHTML = marked.has(realIdx) ? 'Marcada ‚òÖ' : 'Marcar ‚òÜ';

    // Options
    const area = document.getElementById('options-area');
    area.innerHTML = '';
    data.options.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'option';
        div.innerText = opt;
        
        if (s) {
            div.classList.add('disabled');
            if (i === data.correct) div.classList.add('correct');
            else if (i === s.sel) div.classList.add('incorrect');
        } else {
            div.onclick = () => answer(realIdx, i);
        }
        area.appendChild(div);
    });

    // Feedback
    const fb = document.getElementById('feedback-area');
    if (s) {
        fb.style.display = 'block';
        fb.className = `feedback ${s.ok ? 'success' : 'error'}`;
        document.getElementById('feedback-title').innerText = s.ok ? '¬°Correcto!' : 'Incorrecto';
        document.getElementById('feedback-msg').innerText = data.exp;
    } else {
        fb.style.display = 'none';
    }

    // Buttons
    document.getElementById('prev-btn').disabled = idx === 0;
    document.getElementById('next-btn').innerText = idx === activeIndices.length - 1 ? 'Resultados' : 'Siguiente ‚û°';
    renderNav();
}

function answer(realIdx, sel) {
    const data = db[realIdx];
    const ok = sel === data.correct;
    userState[realIdx] = { sel, ok };
    loadQuestion(current);
}

function toggleMark() {
    const realIdx = activeIndices[current];
    if (marked.has(realIdx)) marked.delete(realIdx);
    else marked.add(realIdx);
    loadQuestion(current);
}

function navigate(dir) {
    const next = current + dir;
    if (next >= 0 && next < activeIndices.length) loadQuestion(next);
    else if (next >= activeIndices.length) showResults();
}

function showResults() {
    let ok = 0;
    activeIndices.forEach(i => { if (userState[i] && userState[i].ok) ok++; });
    const pct = Math.round((ok / activeIndices.length) * 100) || 0;
    
    const circle = document.getElementById('final-circle');
    circle.style.background = `conic-gradient(var(--success) ${pct}%, #ecf0f1 0%)`;
    document.getElementById('final-score').innerText = pct + '%';
    document.getElementById('final-msg').innerText = `Acertaste ${ok} de ${activeIndices.length}.`;
    document.getElementById('results-modal').style.display = 'flex';
}

function restart(mode) {
    document.getElementById('results-modal').style.display = 'none';
    if (mode === 'all') {
        activeIndices = db.map((_, i) => i);
        userState.fill(null);
    } else if (mode === 'failed') {
        const fail = [];
        db.forEach((_, i) => { if (userState[i] && !userState[i].ok) fail.push(i); });
        if (!fail.length) return alert("¬°Sin fallos!");
        activeIndices = fail;
        activeIndices.forEach(i => userState[i] = null);
    } else if (mode === 'marked') {
        const m = Array.from(marked).sort((a,b)=>a-b);
        if (!m.length) return alert("¬°Sin marcas!");
        activeIndices = m;
        activeIndices.forEach(i => userState[i] = null);
    }
    loadQuestion(0);
}

// CORRECCI√ìN: Funci√≥n que faltaba para cerrar el modal
function closeModal() {
    document.getElementById('results-modal').style.display = 'none';
}

init();
</script>
</body>
</html>