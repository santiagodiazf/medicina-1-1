<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bloque IV: Enzimolog√≠a y Coenzimas</title>
    <style>
        :root {
            --primary: #7c3aed; /* Violeta Enzim√°tico */
            --primary-dark: #5b21b6;
            --primary-light: #ede9fe;
            --bg: #f5f3ff;
            --text: #1e1b4b;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary-dark);
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            display: inline-block;
            width: 100%;
        }

        .question-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .question-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* --- Checkbox para Marcar --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid #ddd6fe;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #6d28d9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #1e1b4b;
            line-height: 1.5;
        }

        /* Etiquetas para diagramas */
        .img-tag {
            display: block;
            margin-top: 12px;
            padding: 10px;
            background-color: #f3e8ff;
            border-left: 4px solid #a855f7;
            color: #6b21a8;
            font-size: 0.9em;
            font-style: italic;
            border-radius: 0 4px 4px 0;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #374151;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary-dark);
            padding-left: 25px; /* Efecto desplazamiento */
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #064e3b !important;
            font-weight: 600;
        }

        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        /* Caja de Explicaci√≥n */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #f3e8ff;
            border-left: 5px solid var(--primary);
            border-radius: 6px;
            display: none;
            font-size: 0.95em;
            color: #4c1d95;
            animation: slideDown 0.3s ease-out;
        }
        .explanation.visible {
            display: block;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- √Årea de Controles --- */
        #controls-area {
            margin-top: 50px;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary);
        }

        .action-btn {
            background: var(--primary); color: white; border: none;
            padding: 12px 25px; font-size: 1.05em; border-radius: 8px;
            cursor: pointer; margin: 8px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .action-btn:hover { 
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-options button {
            width: 100%;
            background: #4b5563;
        }
        .restart-options button:hover { background: #1f2937; }
        .restart-options button:first-child { background: var(--primary); }

    </style>
</head>
<body>

    <h1>Bloque IV: Enzimolog√≠a y Coenzimas</h1>
    <div style="text-align: center; color: #4c1d95; margin-bottom: 30px;">
        √Ålvaro Cond√≥n | Cin√©tica Enzim√°tica, Vitaminas y Coenzimas
    </div>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>Resultados de la sesi√≥n</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer todo el test</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Repasar marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Repasar falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Falladas + Marcadas</button>
        </div>
    </div>

<script>
    const quizData = [
        { 
            q: "Cu√°l de estas enzimas no tiene correctamente asignado el n√∫mero de la clasificaci√≥n de Linneo:", 
            opts: ["Fosfoglucomutasa -> 5", "ALT -> 2", "Hidroxilasa -> 3", "NADPH citocromo p450 reductasa -> 1", "√Åcido graso sintasa -> 4"], 
            a: "Hidroxilasa -> 3", 
            exp: "Las hidroxilasas son oxidorreductasas (Clase 1), no hidrolasas (Clase 3)." 
        },
        { 
            q: "A qu√© referencia la expresi√≥n matem√°tica (V = Vmax [S] / (Km + [S])):", 
            opts: ["A la ecuaci√≥n de Michaelis-Menten", "A la ecuaci√≥n de Henderson- Hasselbach", "A la ecuaci√≥n Lineweaver- Burk", "A la cin√©tica de una enzima alost√©rica", "La expresi√≥n es incorrecta"], 
            a: "A la ecuaci√≥n de Michaelis-Menten", 
            exp: "Es la ecuaci√≥n fundamental de la cin√©tica enzim√°tica hiperb√≥lica." 
        },
        { 
            q: "La expresi√≥n Œ±= 1 + [I] / KI en cin√©tica enzim√°tica explica:", 
            opts: ["Todas son ciertas", "La modificaci√≥n que experimenta Km y/o Vm√°x en presencia de inhibidor enzim√°tico", "Que el grado de inhibici√≥n depende de la naturaleza del inhibidor (KI)", "Que a mayor concentraci√≥n de inhibidor, mayor modificaci√≥n de la representaci√≥n gr√°fica lineal", "El valor que alcanza el par√°metro cin√©tico aparente"], 
            a: "Todas son ciertas", 
            exp: "El factor alfa (Œ±) multiplica a Km y/o Vmax dependiendo del tipo de inhibici√≥n." 
        },
        { 
            q: "Dos rectas que representan una cin√©tica enzim√°tica en ausencia y en presencia de inhibidor se cortan en un mismo punto en el eje de las X. El inhibidor es:", 
            opts: ["No competitivo", "Competitivo", "Mixto", "Acompetitivo", "Ninguna es cierta"], 
            a: "No competitivo", 
            exp: "Si el corte en X (-1/Km) es constante, Km no cambia. Si Vmax disminuye, es no competitiva pura." 
        },
        { 
            q: "Dos rectas representan la cin√©tica enzim√°tica en ausencia y en presencia del inhibidor. Se cortan en un mismo punto en el eje de las Y. El inhibidor es:", 
            opts: ["Competitivo", "Mixto", "Acompetitivo", "No competitivo", "Ninguna es cierta"], 
            a: "Competitivo", 
            exp: "Corte en Y (1/Vmax) constante = Vmax no cambia. Km aumenta (recta m√°s tendida) = Competitiva." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es incorrecta respecto a la quimiotripsina:", 
            opts: ["La triada catal√≠tica del centro activo es serina, histidina, aspartato", "Es una ser√≠n proteasa", "En el sitio catal√≠tico se produce un ataque electr√≥filo sobre el sustrato", "Durante la cat√°lisis se forma un complejo tetra√©drico entre enzima y sustrato", "El ‚ÄìOH de la serina ataca el carbono carbonilo electropositivo del enlace pept√≠dico"], 
            a: "En el sitio catal√≠tico se produce un ataque electr√≥filo sobre el sustrato", 
            exp: "Falso. El ox√≠geno de la Serina es un NUCLE√ìFILO rico en electrones que ataca al carbonilo." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta respecto al mecanismo de acci√≥n de las coenzimas:", 
            opts: ["TPP-> ion iluro", "CoA-> enlace tiol√©ster", "5‚Äô-desoxiadenosilcobalamina ->rotura homol√≠tica", "NADP+-> semirreducci√≥n-formaci√≥n radical", "PLP-> base Schiff"], 
            a: "NADP+-> semirreducci√≥n-formaci√≥n radical", 
            exp: "NADP+ transfiere un i√≥n hidruro (2 electrones de golpe), no pasa por radicales semiquinona estables (como FAD o Q)." 
        },
        { 
            q: "Indica qu√© asociaci√≥n no es correcta entre vitamina, coenzima que deriva de ella y patolog√≠a que origina su carencia:", 
            opts: ["Vit. B6-> PLP ->anemia microc√≠tica", "Vit. B1->TPP -> S√≠ndrome de Wernicke-Korsakov", "Vit. B5-> CoA ->beri-beri", "Vit C-> √°cido asc√≥rbica-> escorbuto", "Vit. B3-> NAD+ -> pelagra"], 
            a: "Vit. B5-> CoA ->beri-beri", 
            exp: "El beri-beri es por d√©ficit de B1 (Tiamina), no de B5 (√Åcido pantot√©nico)." 
        },
        { 
            q: "Indica que asociaci√≥n no es correcta entre vitamina, coenzima derivada y patolog√≠a que origina su carencia:", 
            opts: ["Vit B12 > 5‚Äô-desoxiadenosilcobalamina > anemia megalobl√°stica", "Vit B1 > TPP > beri-beri", "Vit B6 > PLP > S√≠ndrome de Wernicke-Korsakov", "Vit C > √Åcido asc√≥rbico > escorbuto", "Vit B3 > NAD+ > pelagra"], 
            a: "Vit B6 > PLP > S√≠ndrome de Wernicke-Korsakov", 
            exp: "El s√≠ndrome de Wernicke-Korsakoff es por d√©ficit de B1 (alcoholismo), no de B6." 
        },
        { 
            q: "Qu√© funci√≥n atribuida a la coenzima no es la correcta:", 
            opts: ["THB > transporte de metilos", "THF > transporte de restos monocarbonados", "TPP > transporte de aldeh√≠dos activos", "Lipoamida > transporte de acilos", "NAD+ > transporte de electrones"], 
            a: "THB > transporte de metilos", 
            exp: "La tetrahidrobiopterina (THB) es cofactor redox en hidroxilaciones (Phe->Tyr), no transporta metilos (eso lo hace SAM o THF)." 
        },
        { 
            q: "Cu√°l de estas siglas est√° incorrectamente traducida:", 
            opts: ["THF : √°cido tetrahidrof√≥lico", "NAD: nicotinamida adenina dinucle√≥tido", "UDP- glucosa: urid√≠ndifosfoglucosa", "TPP: trifosfato de fosfonucle√≥sido", "THB: tetrahidrobiopterina"], 
            a: "TPP: trifosfato de fosfonucle√≥sido", 
            exp: "TPP significa Tiamina Pirofosfato." 
        },
        { 
            q: "El atrapamiento de folatos hace referencia a una deficiencia vitam√≠nica:", 
            opts: ["D√©ficit de cobalamina (B12)", "D√©ficit de tiamina", "D√©ficit de piridoxina", "D√©ficit de riboflavina", "D√©ficit de nicotinamida"], 
            a: "D√©ficit de cobalamina (B12)", 
            exp: "Sin B12, la metionina sintasa no funciona y el folato queda atrapado irreversiblemente como N5-metil-THF." 
        },
        { 
            q: "Una enzima:", 
            opts: ["Modifica la velocidad de la reacci√≥n", "Afecta al balance energ√©tico de la reacci√≥n", "Facilita una reacci√≥n que no se produce espont√°neamente (termodin√°micamente)", "Aumenta la energ√≠a necesaria para alcanzar el estado de transici√≥n", "Todas son ciertas"], 
            a: "Modifica la velocidad de la reacci√≥n", 
            exp: "Las enzimas aceleran reacciones (cin√©tica) pero no alteran el equilibrio ni la termodin√°mica (ŒîG)." 
        },
        { 
            q: "El sitio alost√©rico de una enzima:", 
            opts: ["Todas son falsas", "Est√° presente en todas las enzimas", "Est√° ubicado en el centro activo de la enzima", "Es el sitio de uni√≥n s√≥lo de los efectores positivos", "Contribuye a la formaci√≥n del complejo tetra√©drico"], 
            a: "Todas son falsas", 
            exp: "Es un sitio distinto del centro activo, presente solo en enzimas alost√©ricas, y une tanto activadores como inhibidores." 
        },
        { 
            q: "La influencia de los catalizadores sobre la velocidad de las reacciones se debe a que:", 
            opts: ["Disminuyen la energ√≠a de activaci√≥n de las reacciones", "Convierten en exot√©rmicas a las reacciones endot√©rmicas", "Transforman en exerg√≥nicas las reacciones enderg√≥nicas", "Hacen posibles las reacciones enderg√≥nicas", "B y C son ciertas"], 
            a: "Disminuyen la energ√≠a de activaci√≥n de las reacciones", 
            exp: "Al estabilizar el estado de transici√≥n, reducen la barrera energ√©tica necesaria para que ocurra la reacci√≥n." 
        },
        { 
            q: "La concentraci√≥n de sustrato con la que se consigue saturar a la mitad de la enzima presente en una reacci√≥n, coincide en su valor num√©rico con el de:", 
            opts: ["La Km de la reacci√≥n que se considera", "La Vmax de la reacci√≥n que se considera", "El de dicha Vmax, pero s√≥lo si la enzima sufre inhibici√≥n por el sustrato", "El de la Vmax, pero cuando la enzima sufre inhibici√≥n por el producto", "Ninguna es cierta"], 
            a: "La Km de la reacci√≥n que se considera", 
            exp: "Definici√≥n de Km: [S] a la cual V = Vmax/2." 
        },
        { 
            q: "Un inhibidor competitivo de car√°cter reversible:", 
            opts: ["A mayor concentraci√≥n de inhibidor, mayor pendiente de la recta de Lineweaver-Burk", "Altera la Vmax de la reacci√≥n", "No altera la afinidad de la enzima por el sustrato", "Destruye moment√°neamente el centro activo de la enzima", "Ninguna es cierta"], 
            a: "A mayor concentraci√≥n de inhibidor, mayor pendiente de la recta de Lineweaver-Burk", 
            exp: "Pendiente = Km/Vmax. Como Km aumenta (aparente) y Vmax es cte, la pendiente aumenta." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es cierta en relaci√≥n con el NADP+:", 
            opts: ["Es la forma oxidada del coenzima", "Es la forma activa del coenzima", "Es la forma reducida del coenzima", "Su funci√≥n es transportar grupos fosforilo", "Act√∫a como grupo prost√©tico"], 
            a: "Es la forma oxidada del coenzima", 
            exp: "NADP+ (oxidado) acepta electrones para pasar a NADPH (reducido)." 
        },
        { 
            q: "Cu√°l de estos coenzimas interviene en procesos redox:", 
            opts: ["NAD+/NADP+", "THF", "CoA", "Biotina", "PLP"], 
            a: "NAD+/NADP+", 
            exp: "Son los transportadores universales de electrones solubles." 
        },
        { 
            q: "Cu√°l de estos coenzimas es vitam√≠nico:", 
            opts: ["NADP+", "√Åcido lipoico", "Tetrahidrobiopterina", "Coenzima Q10", "S-adenosilmetionina"], 
            a: "NADP+", 
            exp: "Proviene de la vitamina B3 (Niacina). Los otros se pueden sintetizar en el cuerpo humano." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta:", 
            opts: ["PLP-> anillo nicotinamida", "Biotina-> anillo imidazol", "TPP-> anillo tiazol", "FMN/FAD-> anillo isoaloxazina", "NAD+/NADP+-> anillo piridina"], 
            a: "PLP-> anillo nicotinamida", 
            exp: "PLP tiene un anillo de piridina sustituido, pero NO de nicotinamida (eso es NAD). El t√©rmino correcto es Piridoxal." 
        },
        { 
            q: "El mecanismo de acci√≥n conlleva la formaci√≥n de una base de Schiff en:", 
            opts: ["PLP", "Biotina", "TPP", "FMN/FAD", "NAD+/NADP+"], 
            a: "PLP", 
            exp: "El grupo aldeh√≠do del PLP forma una imina (base de Schiff) con el grupo amino del sustrato." 
        },
        { 
            q: "Qu√© asociaci√≥n es incorrecta respecto a la contribuci√≥n del amino√°cido a la funci√≥n/propiedad de la prote√≠na:", 
            opts: ["Lisina -> ataque nucle√≥filo al sustrato", "Aspartato -> car√°cter √°cido de la prote√≠na", "Serina -> sitio fosforilable de una prote√≠na", "Ciste√≠na -> formaci√≥n de puentes disulfuro", "Histidina -> cesi√≥n/captaci√≥n de protones"], 
            a: "Lisina -> ataque nucle√≥filo al sustrato", 
            exp: "Aunque la Lisina puede participar, el ataque nucle√≥filo es la funci√≥n distintiva de la Serina (o Ciste√≠na)." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es incorrecta respecto a las ser√≠n proteasas:", 
            opts: ["La triada catal√≠tica del centro activo es serina, histidina, glutamato", "Rompen enlaces pept√≠dicos", "Durante la cat√°lisis se forma un complejo tetra√©drico entre enzima y sustrato", "El ‚ÄìOH de la serina ataca al C carbonilo electropositivo del enlace pept√≠dico", "En el sitio catal√≠tico se produce un ataque nucle√≥filo sobre el sustrato"], 
            a: "La triada catal√≠tica del centro activo es serina, histidina, glutamato", 
            exp: "La tr√≠ada es Ser-His-Asp (Aspartato, no Glutamato)." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta respecto al mecanismo de acci√≥n de las coenzimas:", 
            opts: ["THF-> formaci√≥n base de Schiff", "CoA-> enlace tiol√©ster", "TPP-> formaci√≥n de i√≥n hiluro", "5‚Äô-desoxiadenosilcobalamina-> rotura homol√≠tica", "FAD->semirreducci√≥n-formaci√≥n radical"], 
            a: "THF-> formaci√≥n base de Schiff", 
            exp: "THF transporta unidades de un carbono unidas a sus nitr√≥genos N5/N10, no forma bases de Schiff." 
        },
        { 
            q: "Dos rectas representan la cin√©tica enzim√°tica en ausencia y en presencia de inhibidor. Se cortan en el eje X. Cu√°l de las siguientes afirmaciones es correcta:", 
            opts: ["La Vmax de esta enzima var√≠a en presencia de inhibidor", "La recta A representa la cin√©tica del inhibidor", "El inhibidor es de tipo competitivo", "El punto de corte en el eje de las X es -1/Œ±Km", "Ninguna es cierta"], 
            a: "La Vmax de esta enzima var√≠a en presencia de inhibidor", 
            exp: "Corte en X igual = Km igual. Vmax cambia = Inhibici√≥n No Competitiva." 
        },
        { 
            q: "El mecanismo de acci√≥n conlleva el transporte de un i√≥n hidruro en:", 
            opts: ["NAD+/NADP+", "CoQ10", "FMN/FAD", "Tetrahidrobiopterina", "√Åcido lipoico"], 
            a: "NAD+/NADP+", 
            exp: "Transfieren H- (dos electrones y un prot√≥n)." 
        },
        { 
            q: "El mecanismo de acci√≥n conlleva una rotura hemol√≠tica dentro del coenzima en:", 
            opts: ["Coenzima.B12", "Biotina", "TPP", "FMN/FAD", "PLP"], 
            a: "Coenzima.B12", 
            exp: "El enlace Cobalto-Carbono es d√©bil y se rompe homol√≠ticamente generando un radical." 
        },
        { 
            q: "Durante el transporte de hidr√≥geno se forman radicales en el paso intermedio en:", 
            opts: ["Todas son ciertos", "CoQ10", "Vit. C", "FMN", "FAD"], 
            a: "Todas son ciertos", 
            exp: "Todas estas mol√©culas pueden aceptar un solo electr√≥n formando radicales estables (semiquinonas)." 
        },
        { 
            q: "El d√©ficit de formas monocarbonadas a expensas del ac√∫mulo de N5-metil-THF:", 
            opts: ["Se conoce como atrapamiento de folatos", "Todas son ciertas", "Se debe a un exceso de vit.B12", "Se traduce en anemia hemol√≠tica", "Est√° relacionado con la s√≠ntesis de succinil-CoA a partir de metilmalonil-CoA"], 
            a: "Se conoce como atrapamiento de folatos", 
            exp: "Consecuencia del d√©ficit de B12: el folato queda 'atrapado' en la forma metilada in√∫til." 
        },
        { 
            q: "Cu√°l de estos √°tomos est√° en condiciones de provocar un ataque electr√≥filo sobre el sustrato:", 
            opts: ["D- A y B son ciertas", "A- Un metal de transici√≥n", "B- Un nitr√≥geno cuaternario", "C- El grupo ‚ÄìOH de la serina", "E- B y C son ciertas"], 
            a: "D- A y B son ciertas", 
            exp: "Los metales (√°cidos de Lewis) y cargas positivas atraen electrones (son electr√≥filos)." 
        },
        { 
            q: "El acoplamiento inducido hace referencia a:", 
            opts: ["Un modelo de encaje entre enzima y sustrato", "El orden de actuaci√≥n de las enzimas", "La disposici√≥n de las enzimas en un complejo enzim√°tico", "La activaci√≥n de la enzima", "La forma de uni√≥n del grupo prost√©tico a la enzima"], 
            a: "Un modelo de encaje entre enzima y sustrato", 
            exp: "Modelo de Koshland: la enzima cambia de forma al unirse el sustrato ('guante y mano')." 
        },
        { 
            q: "Las enzimas influyen en la cin√©tica de la reacci√≥n que catalizan porque:", 
            opts: ["Aumentan la velocidad de la reacci√≥n al disminuir la energ√≠a de activaci√≥n", "Disminuyen la velocidad de la reacci√≥n al aumentar la energ√≠a de activaci√≥n", "Posibilitar reacciones enderg√≥nicas", "Modifican el balance energ√©tico global", "Posibilitan reacciones que no se dar√≠an de manera espont√°nea desde el punto de vista termodin√°mico"], 
            a: "Aumentan la velocidad de la reacci√≥n al disminuir la energ√≠a de activaci√≥n", 
            exp: "Definici√≥n b√°sica de cat√°lisis." 
        },
        { 
            q: "Respecto a KM es falso que:", 
            opts: ["Viene expresada en segundos", "Es la constante de Michaelis", "Es la relaci√≥n entre todas las constantes de velocidad de una reacci√≥n catalizada por una enzima", "Se define como aquella concentraci√≥n de sustrato a la cu√°l se alcanza la mitad de la velocidad m√°xima de la reacci√≥n", "Mide la afinidad de la enzima por el sustrato"], 
            a: "Viene expresada en segundos", 
            exp: "Falso. Km es una concentraci√≥n (Molaridad), no tiempo." 
        },
        { 
            q: "Cuando hablamos de KM o vmax aparente es falso que:", 
            opts: ["El factor Œ± es el grado de disociaci√≥n del sustrato", "Es la modificaci√≥n que experimentan KM o vmax en presencia de un inhibidor enzim√°tico", "El nuevo valor se obtiene al introducir un factor Œ± que afecta a los par√°metros cin√©ticos", "El factor Œ± responde a la expresi√≥n Œ±=1 + [I]/K", "Tendr√° traducci√≥n en la representaci√≥n gr√°fica de la cin√©tica enzim√°tica"], 
            a: "El factor Œ± es el grado de disociaci√≥n del sustrato", 
            exp: "Falso. Alfa es el factor de modificaci√≥n por el inhibidor." 
        },
        { 
            q: "La representaci√≥n gr√°fica de Lineweaver-Burck es la de una ecuaci√≥n y=ax+b, donde:", 
            opts: ["a es la pendiente de la recta = KM / vmax", "a es la pendiente de la recta = KM x vmax", "a es el punto de corte en el eje de las Y = 1/vmax", "a es el punto de corte en el eje de las X = -1/KM", "a es el punto de corte en el eje de las Y = KM / vmax"], 
            a: "a es la pendiente de la recta = KM / vmax", 
            exp: "Ecuaci√≥n: 1/V = (Km/Vmax)(1/S) + 1/Vmax. Pendiente = Km/Vmax." 
        },
        { 
            q: "Un inhibidor competitivo de car√°cter reversible:", 
            opts: ["Todas son ciertas", "No afecta a la Vmax de la reacci√≥n enzim√°tica", "Aumenta la KM de la enzima", "Aumenta la pendiente de la recta en la ecuaci√≥n de Lineweaver-Burk", "Œ± multiplica a KM"], 
            a: "Todas son ciertas", 
            exp: "Todas describen perfectamente la inhibici√≥n competitiva." 
        },
        { 
            q: "Es falso en relaci√≥n con la lisozima que:", 
            opts: ["Es una enzima del tipo 1 de la clasificaci√≥n de Linneo", "Hidroliza enlaces glucos√≠dicos", "El mecanismo de acci√≥n combina cat√°lisis √°cido base y tensi√≥n sobre sustrato", "Se forma un cati√≥n carbonio en el proceso de rotura del enlace", "Interviene glut√°mico"], 
            a: "Es una enzima del tipo 1 de la clasificaci√≥n de Linneo", 
            exp: "Falso. La lisozima hidroliza paredes bacterianas (Tipo 3: Hidrolasas)." 
        },
        { 
            q: "Las ser√≠n proteasas presentan una triada catal√≠tica en el centro activo constituida por:", 
            opts: ["Serina, histidina y aspartato", "Serina, histidina y tirosina", "Serina, histidina y lisina", "Serina, valina y lisina", "Serina, alanina y glicocola"], 
            a: "Serina, histidina y aspartato", 
            exp: "Repetida: Ser-His-Asp." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta:", 
            opts: ["√Åcido lipoico-> vitamina B12", "TPP->vitamina B1", "PLP->vitamina B6", "CoA-> vitamina B5", "Biotina-> vitamina H"], 
            a: "√Åcido lipoico-> vitamina B12", 
            exp: "El √°cido lipoico no es vitamina B12 (cobalamina)." 
        },
        { 
            q: "Cu√°l de estos coenzimas no interviene en procesos redox:", 
            opts: ["S-adenosilmetionina", "√Åcido lipoico", "Tetrahidrobiopterina", "Coenzima Q1", "NADP+"], 
            a: "S-adenosilmetionina", 
            exp: "SAM es donante de metilos." 
        },
        { 
            q: "Cu√°l de estos coenzimas es nucleot√≠dico:", 
            opts: ["NADP+", "PLP", "TPP", "Coenzima Q10", "Biotina"], 
            a: "NADP+", 
            exp: "Contiene nucle√≥tido de adenina." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta (Estructura anillo):", 
            opts: ["PLP-> anillos tetrapirr√≥licos", "Biotina-> anillo imidazol", "TPP-> anillo tiazol", "FMN/FAD-> anillo isoaloxazina", "NAD+/NADP+-> anillo piridina"], 
            a: "PLP-> anillos tetrapirr√≥licos", 
            exp: "Repetida: PLP es piridina, no tetrapirrol." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta (Mecanismo):", 
            opts: ["PLP-> transporte de un i√≥n hidruro", "Biotina-> formaci√≥n carboxibiotina", "TPP-> formaci√≥n carbani√≥n", "CoA-> formaci√≥n enlace tiol√©ster", "Coenzima B12-> rotura homol√≠tica"], 
            a: "PLP-> transporte de un i√≥n hidruro", 
            exp: "Repetida: PLP no transporta hidruro." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta (Siglas):", 
            opts: ["THF-> tetrahidroflavina", "TPP-> tiam√≠n pirofosfato", "PLP-> fosfato de piridoxal", "THB-> tetrahidrobiopterina", "NAD+->nicotinamida adenina dinucle√≥tido"], 
            a: "THF-> tetrahidroflavina", 
            exp: "THF es Tetrahidrofolato." 
        },
        { 
            q: "Qu√© parte de su estructura es coincidente entre la prote√≠na transportadora de grupos acilo (ACP) y el CoA:", 
            opts: ["Un resto de fosfopantete√≠na", "Un anillo imidazol", "Un anillo pirr√≥lico", "Un anillo isoalozacina", "Un residuo de aspartato"], 
            a: "Un resto de fosfopantete√≠na", 
            exp: "Es el brazo largo flexible que porta el grupo -SH." 
        },
        { 
            q: "El TPP interviene en las siguientes v√≠as metab√≥licas:", 
            opts: ["Todas son ciertas", "V√≠a de las pentosas fosfato", "S√≠ntesis de acetil-CoA a partir de piruvato", "Descarboxilaci√≥n de 2-oxo√°cidos", "Ninguna es cierta"], 
            a: "Todas son ciertas", 
            exp: "Cofactor clave en descarboxilaciones y transcetolasa." 
        },
        { 
            q: "En las reacciones de transaminaci√≥n se forma una base de Schiff entre:", 
            opts: ["El grupo aldehido del coenzima y el amino en posici√≥n Œ± del amino√°cido", "El grupo amino del coenzima y el carboxilo en posici√≥n Œ± del amino√°cido", "El grupo aldehido del coenzima y el carboxilo en posici√≥n Œ± del amino√°cido", "El grupo fosfato del coenzima y el amino en posici√≥n Œ± del amino√°cido", "El grupo aldehido del coenzima y el carbonilo del enlace pept√≠dico de la prote√≠na"], 
            a: "El grupo aldehido del coenzima y el amino en posici√≥n Œ± del amino√°cido", 
            exp: "Mecanismo cl√°sico de las transaminasas dependientes de PLP." 
        },
        { 
            q: "Qu√© es falso respecto al atrapamiento de folatos:", 
            opts: ["Carencia de vit. C", "Ac√∫mulo de homociste√≠na", "Ac√∫mulo de N5-metilTHF", "Niveles normales de folatos en sangre", "Anemia megalobl√°stica"], 
            a: "Carencia de vit. C", 
            exp: "Repetida: No tiene que ver con vitamina C." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es cierta en relaci√≥n con el NADP+ (Repetida):", 
            opts: ["Es un coenzima nicot√≠nico", "Es la forma activa del coenzima", "Es la forma reducida del coenzima", "Su funci√≥n es transportar grupos fosforilo", "Act√∫a como grupo prost√©tico"], 
            a: "Es un coenzima nicot√≠nico", 
            exp: "Correcto, pertenece a la familia de nucle√≥tidos de nicotinamida." 
        },
        { 
            q: "Cuando una enzima se fosforila, ¬øqu√© mecanismo de la regulaci√≥n de la actividad enzim√°tica est√° en juego?", 
            opts: ["Modificaci√≥n covalente", "Regulaci√≥n alost√©rica", "Prote√≥lisis limitada", "Aumento de la expresi√≥n", "Ninguna es cierta"], 
            a: "Modificaci√≥n covalente", 
            exp: "Se a√±ade covalentemente un grupo fosfato (usualmente por quinasas)." 
        },
        { 
            q: "Cu√°l de estos coenzimas no es vitam√≠nico:", 
            opts: ["Lipoamida", "PLP", "TPP", "CoA", "Biocitina"], 
            a: "Lipoamida", 
            exp: "El cuerpo sintetiza √°cido lipoico." 
        },
        { 
            q: "El coenzima cuyo mecanismo de acci√≥n consiste en formar una base de Schiff con el sustrato es:", 
            opts: ["Fosfato de piridoxal (PLP)", "Metilcobalamina", "Tiam√≠n pirofosfato", "Flav√≠n mononucle√≥tido", "√Åcido lipoico"], 
            a: "Fosfato de piridoxal (PLP)", 
            exp: "Repetida: Mecanismo del PLP." 
        },
        { 
            q: "Qu√© es falso respecto al atrapamiento de folatos (variante):", 
            opts: ["Carencia de vitamina C", "Ac√∫mulo de homociste√≠na", "Ac√∫mulos de N5-MetilTHF", "Niveles normales de folatos en sangre", "Anemia megalobl√°stica"], 
            a: "Carencia de vitamina C", 
            exp: "Repetida." 
        },
        { 
            q: "Cu√°l de estas asociaciones no hace referencia a un coenzima de √≥xidorreducci√≥n:", 
            opts: ["DHF; THF; folato", "NAD+; NADH(H+); coenzimas nicot√≠nicos", "FMN; FMNH+; FMNH2; coenzimas flav√≠nicos", "FAD; FADH; FADH2; coenzimas flav√≠nicos", "UQ; UQH; UQH2; coenzima Q"], 
            a: "DHF; THF; folato", 
            exp: "Folatos transportan carbonos, no electrones." 
        },
        { 
            q: "Cu√°l de estos coenzimas funciona como grupo prost√©tico de la enzima:", 
            opts: ["FMN/FAD", "NADP+", "Coenzima Q10", "TPP", "CoA"], 
            a: "FMN/FAD", 
            exp: "Frecuentemente est√°n covalentemente unidos o muy fuertemente asociados (flavoprote√≠nas)." 
        },
        { 
            q: "Si dos rectas que representan la cin√©tica enzim√°tica en ausencia y en presencia de inhibidor se cortan en un mismo punto en el eje X es verdad que:", 
            opts: ["El inhibidor es de tipo no competitivo", "El punto de corte en el eje de las Y es -1/aKM", "El punto de corte en el eje de las X es 1/aVmax", "La Vmax caracter√≠stica de esta enzima var√≠a en presencia de inhibidor"], 
            a: "El inhibidor es de tipo no competitivo", 
            exp: "Repetida: Caracter√≠stica gr√°fica de la inhibici√≥n no competitiva." 
        },
        { 
            q: "Respecto a la estructura de la coenzima, cu√°l de estas asociaciones es incorrecta:", 
            opts: ["PLP ---> Anillos tetrapirr√≥licos", "FMN/FAD ---> Anillo isoaloxacina", "Biotina ---> Anillo imidazol + Anillo tiofeno", "TPP ---> Anillo tiazol"], 
            a: "PLP ---> Anillos tetrapirr√≥licos", 
            exp: "Repetida: PLP no tiene tetrapirroles." 
        },
        { 
            q: "A qu√© hace referencia la expresi√≥n matem√°tica V0 = Vmax [S] / (KM + [S]):", 
            opts: ["A la ecuaci√≥n de Michaelis-Menten", "A la ecuaci√≥n de Lineweaver-Burk", "A la cin√©tica de una enzima alost√©rica", "A la ecuaci√≥n de Hendersson-Hasselbach"], 
            a: "A la ecuaci√≥n de Michaelis-Menten", 
            exp: "Repetida." 
        },
        { 
            q: "Indica qu√© asociaci√≥n no es correcta entre vitamina, coenzima derivado y patolog√≠a que origina su carencia:", 
            opts: ["Vit. B12 ‚Üí 5‚Äô-desoxiadenosilcobalamina ‚Üís√≠ndrome de Wernicke- Korsakov", "Vit. B1 ‚Üí TPP ‚Üí Beri-beri", "Vit. B6 ‚Üí PLP ‚Üí anemia microc√≠tica", "Vit. C ‚Üí √°cido asc√≥rbico ‚Üí escorbuto", "Vit. B3 ‚Üí NAD+ ‚Üí Pelagra"], 
            a: "Vit. B12 ‚Üí 5‚Äô-desoxiadenosilcobalamina ‚Üís√≠ndrome de Wernicke- Korsakov", 
            exp: "Repetida: Wernicke es B1, no B12." 
        },
        { 
            q: "Seg√∫n la clasificaci√≥n de Linneo una hidroxilasa es una:", 
            opts: ["1. Oxidorreductasa", "2. Transferasa", "3. Hidrolasa", "4. Liasa", "5. Isomerasa"], 
            a: "1. Oxidorreductasa", 
            exp: "Cataliza oxidaciones con incorporaci√≥n de ox√≠geno." 
        },
        { 
            q: "Qu√© es la Km:", 
            opts: ["Todas son correctas", "Es la constante de Michaelis", "Es la relaci√≥n entre todas las constantes de velocidad de una reacci√≥n catalizada por una enzima", "Se define como aquella concentraci√≥n de sustrato a la cu√°l se alcanza la mitad de la velocidad m√°xima de la reacci√≥n", "Mide la afinidad de la enzima por el sustrato"], 
            a: "Todas son correctas", 
            exp: "Definici√≥n completa." 
        },
        { 
            q: "Indica qu√© afirmaci√≥n es incorrecta:", 
            opts: ["Los efectos de los inhibidores irreversibles son independientes del tiempo de actuaci√≥n de los mismos", "Si la KESI es igual a la KEI entonces la uni√≥n de S a E no afecta al de I", "Si la KEI es igual a infinito entonces I no se puede combinar con E, solo con ES", "La toxicidad por cianuro se debe a su afinidad por el Fe hem√≠nico"], 
            a: "Los efectos de los inhibidores irreversibles son independientes del tiempo de actuaci√≥n de los mismos", 
            exp: "Falso. Al ser reacciones qu√≠micas de inactivaci√≥n, dependen del tiempo." 
        },
        { 
            q: "En una inhibici√≥n no competitiva (INC), selecciona la afirmaci√≥n correcta:", 
            opts: ["KESI = KEI", "En presencia de un INC la Km aumenta", "En presencia de un INC la v no se modifica", "KESI es cero"], 
            a: "KESI = KEI", 
            exp: "La afinidad del inhibidor por E y ES es id√©ntica." 
        },
        { 
            q: "Identifica la afirmaci√≥n incorrecta:", 
            opts: ["Cin√©ticas hiperb√≥licas implican procesos no saturables", "En las cin√©ticas de pre-equilibrio r√°pido (E) es semejante a la (S) y suelen ser raras en procesos bioqu√≠micos", "La v de una enzima tiene una relaci√≥n lineal con la concentraci√≥n de una enzima presente en la muestra", "El ciclo catal√≠tico de una enzima, con una relaci√≥n lineal entre (e) y v, implicar√≠a que el proceso es regenerativo"], 
            a: "Cin√©ticas hiperb√≥licas implican procesos no saturables", 
            exp: "Falso. La curva hiperb√≥lica llega a una meseta (Vmax), lo que indica SATURACI√ìN." 
        },
        { 
            q: "En el proceso de transaminaci√≥n interviene:", 
            opts: ["Solo son ciertas B y C", "Fosfato de piridoxal (B)", "Fosfato de piridoxamina (C)", "THF", "Las tres son ciertas"], 
            a: "Solo son ciertas B y C", 
            exp: "PLP (aldeh√≠do) y PMP (amina) se interconvierten durante la reacci√≥n." 
        },
        { 
            q: "Indique qu√© enzimas participan en la transdesaminaci√≥n:", 
            opts: ["b y c son ciertas", "La transaminasa glut√°mica", "La glut√°mico oxidasa", "La transaminasa asp√°rtica", "La aspartasa"], 
            a: "b y c son ciertas", 
            exp: "Implica transferir el grupo amino al glutamato (transaminasa) y luego liberar amonio (glutamato deshidrogenasa/oxidasa)." 
        }
    ];

    // --- ASIGNAR IDs √öNICOS ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px; color:#6b7280;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // Checkbox Marcar
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) markedQuestions.add(item.id);
                else markedQuestions.delete(item.id);
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";
            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);

            // Pregunta
            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;

            // --- INSERCI√ìN DE DIAGRAMAS ---
            if (item.id === 1) { // Michaelis-Menten
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 3) { // Inhibici√≥n No Competitiva
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 4) { // Inhibici√≥n Competitiva
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 22) { // PLP Base Schiff
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 30) { // Coenzima B12
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 34) { // Ajuste Inducido
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 16) { // Km concept
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 11) { // Folate Trap
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 5) { // Serine Protease Mechanism
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            }

            card.appendChild(questionText);

            // Opciones
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Explicaci√≥n:</strong> ${item.exp}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        failedQuestions.add(item.id);
                        
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) b.classList.add('correct');
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- Control Final ---
    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        if (mode === 'all') subset = quizData;
        else if (mode === 'marked') subset = quizData.filter(q => markedQuestions.has(q.id));
        else if (mode === 'failed') subset = quizData.filter(q => failedQuestions.has(q.id));
        else if (mode === 'failed_marked') subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));

        if(mode !== 'all') failedQuestions.clear(); 
        else {
            failedQuestions.clear();
            markedQuestions.clear();
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>
