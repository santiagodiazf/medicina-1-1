<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Bloque 7 - Comunicaci√≥n y Diferenciaci√≥n</title>
    <style>
        :root {
            --primary: #16a085; /* Verde azulado medicina */
            --secondary: #1abc9c;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --light: #fdfefe;
            --dark: #2c3e50;
            --bg: #e8f6f3;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--dark);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        header {
            text-align: center;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h1 { color: var(--primary); margin: 0; font-size: 2rem; }
        .prof-info { font-style: italic; color: #7f8c8d; margin-top: 5px; }
        
        .status-panel {
            background: #d1f2eb;
            padding: 15px 25px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            margin-bottom: 25px;
            color: var(--dark);
            border: 1px solid #a2d9ce;
        }

        .question-card {
            display: none;
            position: relative; /* Necesario para posicionar la marca */
            animation: slideIn 0.4s ease-out;
        }
        .question-card.active { display: block; }

        /* ESTILOS DE LA PESTA√ëA DE MARCAR */
        .bookmark-panel {
            position: absolute;
            top: 0;
            right: 0;
            background: #fff9c4;
            border: 1px solid #fbc02d;
            color: #f57f17;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s;
            z-index: 10;
        }
        .bookmark-panel:hover { transform: scale(1.05); background: #fff176; }
        .bookmark-panel input { cursor: pointer; transform: scale(1.3); }

        .question-header {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 1px;
            margin-top: 15px;
        }

        .question-text {
            font-size: 1.25rem;
            margin-bottom: 25px;
            font-weight: 600;
            padding-right: 120px; /* Espacio para que el texto no tape la marca */
        }

        .options-list {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid #bdc3c7;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            font-size: 1.05rem;
            transition: all 0.2s;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: #f4f6f7;
            transform: translateX(5px);
        }

        .option-btn:disabled { cursor: default; opacity: 0.8; }

        .correct {
            background-color: #d5f5e3 !important;
            border-color: var(--success) !important;
            color: #145a32;
        }

        .incorrect {
            background-color: #fadbd8 !important;
            border-color: var(--danger) !important;
            color: #7b241c;
        }

        .feedback-area {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            background: #f2f3f4;
            border-left: 6px solid var(--dark);
            display: none;
        }
        .feedback-area.show { display: block; }
        .rationale { margin-top: 8px; font-size: 0.95rem; }

        .nav-btn {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            margin-top: 25px;
            cursor: pointer;
            float: right;
            transition: background 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .nav-btn:hover { background: var(--secondary); transform: translateY(-2px); }

        /* PANTALLA DE RESULTADOS */
        .results-view {
            text-align: center;
            display: none;
        }
        .final-score {
            font-size: 4.5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }
        .progress-ring {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }

        .stats-summary {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: #555;
            display: inline-block;
            text-align: left;
        }

        /* GRID DE BOTONES DE ACCI√ìN */
        .action-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .action-btn:hover { transform: translateY(-3px); filter: brightness(110%); }
        .action-btn:disabled { background-color: #bdc3c7 !important; cursor: not-allowed; transform: none; filter: none; }

        .btn-restart { background-color: var(--primary); grid-column: span 2; }
        .btn-failed { background-color: var(--danger); }
        .btn-marked { background-color: var(--warning); color: #444; }
        .btn-mixed { background-color: var(--dark); grid-column: span 2; }

        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Examen Bloque 7: Diferenciaci√≥n y Comunicaci√≥n</h1>
        <div class="prof-info">Facultad de Medicina de C√°diz - Prof. Meritxell Llorca Torralba</div>
    </header>

    <div class="status-panel" id="statusBar">
        <span id="q-progress">Cargando...</span>
        <span id="score-display">Aciertos: 0</span>
    </div>
    <div class="progress-ring"><div class="progress-fill" id="progressBar"></div></div>

    <div id="quiz-container" style="margin-top: 30px;">
        </div>

    <div id="results-screen" class="results-view">
        <h2>Examen Finalizado</h2>
        <div class="final-score" id="final-number">0/0</div>
        <p id="final-text" style="font-size: 1.2rem; margin-bottom: 20px;"></p>
        
        <div class="stats-summary" id="stats-box"></div>

        <div class="action-grid">
            <button class="action-btn btn-restart" onclick="startQuiz('all')">üîÑ Reiniciar Test Completo</button>
            <button class="action-btn btn-failed" id="btn-failed" onclick="startQuiz('failed')">‚ùå Repetir Falladas</button>
            <button class="action-btn btn-marked" id="btn-marked" onclick="startQuiz('marked')">‚ö†Ô∏è Repetir Marcadas</button>
            <button class="action-btn btn-mixed" id="btn-mixed" onclick="startQuiz('mixed')">‚ùå + ‚ö†Ô∏è Repetir Falladas y Marcadas</button>
        </div>
    </div>
</div>

<script>
const quizData = [
    // --- 7.1 SE√ëALIZACI√ìN CELULAR (1-25) ---
    { topic: "Introducci√≥n", question: "¬øQu√© es la transducci√≥n de se√±al?", options: ["El transporte de se√±ales el√©ctricas por el ax√≥n.", "El proceso de convertir una se√±al extracelular en una respuesta intracelular espec√≠fica.", "La duplicaci√≥n del ADN.", "La s√≠ntesis de prote√≠nas."], correct: 1, explanation: "Es el mecanismo de 'traducci√≥n' o conversi√≥n de un tipo de se√±al (externa) a otro (interna) para generar una respuesta." },
    { topic: "Tipos de Se√±alizaci√≥n", question: "¬øQu√© tipo de se√±alizaci√≥n implica la liberaci√≥n de hormonas al torrente sangu√≠neo para actuar en c√©lulas lejanas?", options: ["Paracrina", "Sin√°ptica", "Endocrina", "Dependiente de contacto"], correct: 2, explanation: "La se√±alizaci√≥n endocrina es de largo alcance y utiliza el sistema circulatorio." },
    { topic: "Tipos de Se√±alizaci√≥n", question: "¬øQu√© caracteriza a la se√±alizaci√≥n paracrina?", options: ["Las se√±ales act√∫an como mediadores locales sobre c√©lulas vecinas.", "La c√©lula se se√±ala a s√≠ misma.", "Requiere contacto f√≠sico.", "Es exclusiva de neuronas."], correct: 0, explanation: "La se√±al difunde localmente a trav√©s del fluido extracelular para afectar a las c√©lulas cercanas." },
    { topic: "Tipos de Se√±alizaci√≥n", question: "¬øQu√© tipo de se√±alizaci√≥n es la m√°s r√°pida y precisa, actuando sobre una c√©lula postsin√°ptica?", options: ["Endocrina", "Autocrina", "Sin√°ptica", "Yuxtacrina"], correct: 2, explanation: "La se√±alizaci√≥n neuronal o sin√°ptica es r√°pida y dirigida espec√≠ficamente a una c√©lula diana." },
    { topic: "Tipos de Se√±alizaci√≥n", question: "¬øC√≥mo se llama la se√±alizaci√≥n donde la c√©lula responde a una se√±al que ella misma ha producido?", options: ["Endocrina", "Autocrina", "Paracrina", "Dependiente de contacto"], correct: 1, explanation: "Es una forma de auto-regulaci√≥n com√∫n en c√©lulas cancerosas y durante el desarrollo." },
    { topic: "Tipos de Se√±alizaci√≥n", question: "¬øQu√© tipo de se√±alizaci√≥n requiere que la mol√©cula se√±alizadora permanezca unida a la membrana de la c√©lula emisora?", options: ["Endocrina", "Dependiente de contacto (Yuxtacrina)", "Paracrina", "Sin√°ptica"], correct: 1, explanation: "Implica una interacci√≥n f√≠sica directa entre la mol√©cula se√±alizadora de membrana y el receptor de la c√©lula vecina." },
    { topic: "Mol√©culas Se√±al", question: "¬øQu√© tipo de mol√©culas se√±alizadoras pueden atravesar la membrana plasm√°tica y unirse a receptores intracelulares?", options: ["Mol√©culas grandes e hidrof√≠licas.", "Prote√≠nas grandes.", "Mol√©culas peque√±as o hidrof√≥bicas (ej. hormonas esteroides).", "Iones cargados."], correct: 2, explanation: "Al ser hidrof√≥bicas, difunden a trav√©s de la bicapa lip√≠dica y act√∫an dentro de la c√©lula (receptores nucleares)." },
    { topic: "Mol√©culas Se√±al", question: "¬ø√≥nde se encuentran los receptores para mol√©culas grandes o hidrof√≠licas?", options: ["En el n√∫cleo.", "En el citosol.", "En la superficie celular (membrana plasm√°tica).", "En la mitocondria."], correct: 2, explanation: "Estas mol√©culas no pueden cruzar la membrana, por lo que requieren receptores de superficie para transmitir el mensaje." },
    { topic: "Interruptores Moleculares", question: "¬øCu√°les son los dos mecanismos principales por los que las prote√≠nas act√∫an como interruptores moleculares?", options: ["Hidr√≥lisis y Condensaci√≥n.", "Fosforilaci√≥n y Uni√≥n a GTP.", "Transcripci√≥n y Traducci√≥n.", "Mitosis y Meiosis."], correct: 1, explanation: "Se activan/inactivan a√±adiendo fosfato (quinasas/fosfatasas) o uniendo GTP (prote√≠nas de uni√≥n a GTP)." },
    { topic: "Interruptores Moleculares", question: "¬øQu√© enzima a√±ade un grupo fosfato a una prote√≠na (activ√°ndola generalmente)?", options: ["Fosfatasa", "Quinasa", "GTPasa", "Proteasa"], correct: 1, explanation: "Las prote√≠na-quinasas transfieren un grupo fosfato del ATP a la prote√≠na diana." },
    { topic: "Interruptores Moleculares", question: "¬øQu√© enzima elimina el grupo fosfato de una prote√≠na (apagando la se√±al)?", options: ["Quinasa", "Ligasa", "Fosfatasa", "Polimerasa"], correct: 2, explanation: "Las fosfatasas eliminan el fosfato, revirtiendo el efecto de la quinasa." },
    { topic: "Interruptores Moleculares", question: "¬øCu√°ndo est√° activa una prote√≠na de uni√≥n a GTP?", options: ["Cuando tiene unido GDP.", "Cuando tiene unido GTP.", "Cuando no tiene nucle√≥tido.", "Cuando est√° fosforilada."], correct: 1, explanation: "La forma unida a GTP es la activa; la hidr√≥lisis a GDP la apaga." },
    { topic: "Receptores de Superficie", question: "¬øQu√© receptor convierte una se√±al qu√≠mica directamente en una se√±al el√©ctrica?", options: ["Receptor acoplado a Prote√≠na G (GPCR).", "Receptor Tirosina Quinasa (RTK).", "Receptor acoplado a canales i√≥nicos.", "Receptor nuclear."], correct: 2, explanation: "Al abrirse por ligando, permite el flujo de iones, cambiando el potencial de membrana." },
    { topic: "GPCRs", question: "¬øQu√© activa un Receptor Acoplado a Prote√≠na G (GPCR) al unir su ligando?", options: ["Una enzima quinasa intr√≠nseca.", "Una prote√≠na G trim√©rica intracelular.", "Un canal i√≥nico directamente.", "La transcripci√≥n de genes."], correct: 1, explanation: "El receptor activa a la prote√≠na G, que luego se disocia para activar enzimas o canales." },
    { topic: "GPCRs", question: "¬øQu√© enzima es activada por la prote√≠na G en la v√≠a del AMPc?", options: ["Fosfolipasa C", "Adenilato ciclasa", "Prote√≠na Quinasa C (PKC)", "MAP quinasa"], correct: 1, explanation: "La Adenilato ciclasa sintetiza AMP c√≠clico (segundo mensajero) a partir de ATP." },
    { topic: "GPCRs", question: "¬øQu√© segundos mensajeros genera la Fosfolipasa C al ser activada por una prote√≠na G?", options: ["AMPc y GMPc.", "IP3 (Inositol trifosfato) y DAG (Diacilglicerol).", "Ca2+ y Na+.", "ATP y ADP."], correct: 1, explanation: "El IP3 libera calcio del RE y el DAG activa la PKC en la membrana." },
    { topic: "GPCRs", question: "¬øQu√© efecto tiene el IP3 en la c√©lula?", options: ["Activa la adenilato ciclasa.", "Abre canales de Ca2+ en el Ret√≠culo Endopl√°smico, liberando calcio al citosol.", "Se une al ADN.", "Degrada prote√≠nas."], correct: 1, explanation: "El IP3 es el ligando que abre los canales de calcio del almac√©n intracelular (RE)." },
    { topic: "RTKs", question: "¬øQu√© caracteriza a los Receptores Tirosina Quinasa (RTKs)?", options: ["Tienen actividad enzim√°tica intr√≠nseca (quinasa) o se asocian a enzimas.", "Abren canales de sodio.", "Usan prote√≠nas G trim√©ricas.", "Est√°n en el n√∫cleo."], correct: 0, explanation: "Al activarse, se fosforilan a s√≠ mismos (autofosforilaci√≥n) en residuos de tirosina." },
    { topic: "RTKs", question: "¬øQu√© peque√±a GTPasa es activada frecuentemente por los RTKs?", options: ["Ran", "Ras", "Rab", "Rho"], correct: 1, explanation: "Ras es una prote√≠na interruptor clave que inicia la cascada de las MAP-quinasas." },
    { topic: "RTKs", question: "¬øQu√© cascada de se√±alizaci√≥n es activada por Ras y es crucial para la proliferaci√≥n celular?", options: ["Cascada de caspasas.", "Cascada de MAP-quinasas.", "Cascada de coagulaci√≥n.", "V√≠a Wnt."], correct: 1, explanation: "La v√≠a MAP-quinasa (Mitogen-Activated Protein Kinase) transmite se√±ales desde la membrana al n√∫cleo para estimular la divisi√≥n." },
    { topic: "RTKs", question: "¬øQu√© quinasa es clave en la v√≠a de se√±alizaci√≥n que promueve el crecimiento celular y la supervivencia (v√≠a PI3K)?", options: ["Akt (o PKB).", "PKA.", "PKC.", "CaMK."], correct: 0, explanation: "Akt fosforila dianas que inhiben la apoptosis y promueven el crecimiento." },
    { topic: "Integraci√≥n", question: "¬øC√≥mo decide una c√©lula su destino (dividirse, diferenciarse, morir)?", options: ["Siguiendo una sola se√±al.", "Mediante la integraci√≥n simult√°nea de m√∫ltiples se√±ales.", "Al azar.", "Dependiendo solo de sus nutrientes."], correct: 1, explanation: "La c√©lula procesa e integra una combinaci√≥n compleja de se√±ales para tomar decisiones ('cross-talk')." },
    { topic: "Sinapsis", question: "¬øQu√© tipo de sinapsis permite el flujo directo de iones entre c√©lulas (bidireccional)?", options: ["Sinapsis qu√≠mica.", "Sinapsis el√©ctrica (uniones gap).", "Sinapsis hormonal.", "Sinapsis lenta."], correct: 1, explanation: "Las uniones gap conectan los citoplasmas, permitiendo una transmisi√≥n el√©ctrica instant√°nea." },
    { topic: "Sinapsis", question: "¬øQu√© mol√©cula media la se√±alizaci√≥n en una sinapsis qu√≠mica?", options: ["Una hormona.", "Un neurotransmisor.", "Un l√≠pido.", "Un anticuerpo."], correct: 1, explanation: "El neurotransmisor se libera a la hendidura sin√°ptica y se une a receptores postsin√°pticos." },
    { topic: "Se√±alizaci√≥n", question: "¬øQu√© gas act√∫a como mol√©cula se√±alizadora paracrina atravesando membranas?", options: ["Ox√≠geno (O2).", "√ìxido N√≠trico (NO).", "Di√≥xido de carbono (CO2).", "Helio."], correct: 1, explanation: "El NO relaja el m√∫sculo liso de los vasos sangu√≠neos (vasodilataci√≥n) actuando intracelularmente." },

    // --- 7.2 & 7.3 DIFERENCIACI√ìN Y FENOTIPO (26-40) ---
    { topic: "Diferenciaci√≥n", question: "¬øQu√© mecanismo permite generar diversos tipos celulares con el mismo genoma?", options: ["Mutaci√≥n selectiva.", "P√©rdida de genes.", "Expresi√≥n g√©nica diferencial.", "Duplicaci√≥n del genoma."], correct: 2, explanation: "Diferentes tipos celulares transcriben y traducen distintos subconjuntos de genes." },
    { topic: "Estabilidad", question: "¬øQu√© factor NO contribuye a la estabilidad de los tejidos?", options: ["Comunicaci√≥n celular (factores de supervivencia).", "Adhesi√≥n celular selectiva.", "Memoria celular.", "Mutaci√≥n constante."], correct: 3, explanation: "La mutaci√≥n constante desestabilizar√≠a el tejido (ej. c√°ncer); los otros tres mantienen la organizaci√≥n e identidad." },
    { topic: "Expresi√≥n", question: "¬øQu√© t√©cnica analiza el conjunto completo de ARN (transcritos) de una c√©lula?", options: ["Prote√≥mica.", "Transcript√≥mica.", "Gen√≥mica.", "Microscop√≠a."], correct: 1, explanation: "El transcriptoma refleja el perfil de expresi√≥n g√©nica en un momento dado." },
    { topic: "Memoria Celular", question: "¬øQu√© es la memoria celular?", options: ["La capacidad de las neuronas de recordar.", "La transmisi√≥n de patrones de expresi√≥n g√©nica a las c√©lulas hijas.", "El almacenamiento de glucosa.", "La reparaci√≥n del ADN."], correct: 1, explanation: "Permite que una c√©lula diferenciada (ej. hep√°tica) genere c√©lulas hijas con la misma identidad." },
    { topic: "Memoria Celular", question: "¬øQu√© mecanismo de memoria celular implica que una prote√≠na activadora estimule su propia transcripci√≥n?", options: ["Metilaci√≥n del ADN.", "Retroalimentaci√≥n positiva (bucle positivo).", "Modificaci√≥n de histonas.", "Splicing alternativo."], correct: 1, explanation: "Una vez encendido, el gen se mantiene activo indefinidamente en el linaje celular gracias a su propio producto." },
    { topic: "Memoria Celular", question: "¬øQu√© modificaci√≥n qu√≠mica del ADN se usa para la herencia epigen√©tica de patrones de silenciamiento?", options: ["Fosforilaci√≥n.", "Metilaci√≥n de citosinas.", "Acetilaci√≥n.", "Ubiquitinaci√≥n."], correct: 1, explanation: "La metilaci√≥n del ADN (en islas CpG) se copia fielmente durante la replicaci√≥n y suele reprimir genes." },
    { topic: "Memoria Celular", question: "¬øQu√© otro mecanismo epigen√©tico contribuye a la memoria celular adem√°s de la metilaci√≥n del ADN?", options: ["Modificaciones de histonas heredables.", "Mutaciones som√°ticas.", "Cambio de ARNt.", "Transporte de membrana."], correct: 0, explanation: "Las c√©lulas hijas heredan los patrones de histonas modificadas (c√≥digo de histonas) de la c√©lula madre." },
    { topic: "Reguladores Maestros", question: "¬øQu√© demuestra el gen Ey en Drosophila, capaz de inducir un ojo en la pata?", options: ["Que las moscas mutan f√°cil.", "El poder de un solo regulador maestro para desencadenar la formaci√≥n de un √≥rgano completo.", "Que el ojo no necesita genes.", "Que el ADN se pierde."], correct: 1, explanation: "Un solo factor de transcripci√≥n puede activar toda una cascada de genes necesarios para formar un √≥rgano." },
    { topic: "Plasticidad", question: "¬øEs el estado diferenciado irreversible?", options: ["S√≠, absolutamente.", "No, las c√©lulas pueden reprogramarse experimentalmente.", "Solo en bacterias.", "Solo en plantas."], correct: 1, explanation: "La reprogramaci√≥n celular (ej. iPS) demuestra que la diferenciaci√≥n es reversible bajo condiciones espec√≠ficas." },
    { topic: "Reprogramaci√≥n", question: "¬øQu√© se logra mediante la introducci√≥n de factores de transcripci√≥n espec√≠ficos en c√©lulas adultas?", options: ["Matar a la c√©lula.", "Convertirla en un virus.", "Reprogramaci√≥n celular (ej. fibroblastos a neuronas o iPS).", "Nada."], correct: 2, explanation: "Se puede cambiar la identidad celular (transdiferenciaci√≥n) o devolverla a un estado pluripotente." },
    { topic: "Adhesi√≥n", question: "¬øC√≥mo contribuye la adhesi√≥n selectiva a la organizaci√≥n tisular?", options: ["Impide que las c√©lulas se muevan.", "Permite que c√©lulas del mismo tipo se reconozcan y agrupen (ej. v√≠a cadherinas).", "Destruye la matriz.", "Genera se√±ales de muerte."], correct: 1, explanation: "La expresi√≥n diferencial de mol√©culas de adhesi√≥n segrega y organiza los distintos tipos celulares en el embri√≥n." },
    { topic: "Comunicaci√≥n", question: "¬øQu√© ocurre con la mayor√≠a de c√©lulas animales si se les priva de se√±ales de supervivencia?", options: ["Entran en mitosis.", "Se diferencian.", "Activan la apoptosis (muerte celular programada).", "Se vuelven inmortales."], correct: 2, explanation: "Las c√©lulas requieren se√±ales constantes de su entorno para sobrevivir; su ausencia es letal por defecto." },
    { topic: "Proteoma", question: "¬øCu√°l es la diferencia entre transcriptoma y proteoma?", options: ["Son lo mismo.", "Transcriptoma = ARN (intenci√≥n); Proteoma = Prote√≠nas (acci√≥n/funci√≥n).", "Transcriptoma = Prote√≠nas; Proteoma = ARN.", "El proteoma es el ADN."], correct: 1, explanation: "El proteoma es la ejecuci√≥n funcional final de la informaci√≥n contenida en el transcriptoma." },
    { topic: "Control", question: "¬øQu√© principio permite una regulaci√≥n compleja con pocos factores de transcripci√≥n?", options: ["Control combinatorio.", "Control √∫nico.", "Control aleatorio.", "Control negativo."], correct: 0, explanation: "La combinaci√≥n de diferentes factores genera respuestas espec√≠ficas, ahorrando n√∫mero de reguladores." },
    { topic: "Epigen√©tica", question: "¬øLos mecanismos de memoria celular alteran la secuencia de ADN?", options: ["S√≠, causan mutaciones.", "No, son cambios epigen√©ticos (sobre el ADN) no gen√©ticos.", "A veces.", "Solo en virus."], correct: 1, explanation: "La epigen√©tica implica cambios heredables en la expresi√≥n sin cambios en la secuencia de nucle√≥tidos." },

    // --- 7.4 C√âLULAS MADRE (41-60) ---
    { topic: "Definici√≥n", question: "¬øQu√© dos propiedades definen a una c√©lula madre?", options: ["Diferenciaci√≥n terminal y muerte.", "Autorrenovaci√≥n y capacidad de diferenciaci√≥n.", "Mitosis r√°pida y gran tama√±o.", "Fagocitosis y movimiento."], correct: 1, explanation: "Deben poder dividirse para mantenerse a s√≠ mismas (autorrenovaci√≥n) y generar progenie especializada." },
    { topic: "Jerarqu√≠a", question: "¬øQu√© son las c√©lulas precursoras proliferativas (c√©lulas de tr√°nsito)?", options: ["C√©lulas madre quiescentes.", "Descendientes de c√©lulas madre que se dividen r√°pidamente para amplificar el tejido antes de diferenciarse.", "C√©lulas muertas.", "C√©lulas diferenciadas terminales."], correct: 1, explanation: "Amplifican el n√∫mero de c√©lulas antes de la diferenciaci√≥n final, pero tienen vida limitada." },
    { topic: "Tipos de Potencia", question: "¬øQu√© es una c√©lula Totipotente?", options: ["Puede formar cualquier c√©lula del cuerpo y tejidos extraembrionarios (cigoto).", "Solo forma sangre.", "Puede formar las 3 capas germinales pero no placenta.", "No se divide."], correct: 0, explanation: "Es el estado de m√°xima potencia, capaz de generar un organismo completo." },
    { topic: "Tipos de Potencia", question: "¬øQu√© define a una c√©lula Pluripotente (ej. C√©lulas Madre Embrionarias - ESC)?", options: ["Genera placenta.", "Puede diferenciarse en c√©lulas de las tres capas germinales (endo, meso, ectodermo).", "Solo genera un tipo celular.", "Es una c√©lula adulta."], correct: 1, explanation: "Pueden formar cualquier tejido del cuerpo adulto, pero no un organismo completo (falta placenta)." },
    { topic: "Tipos de Potencia", question: "¬øQu√© es una c√©lula Multipotente?", options: ["C√©lula madre adulta restringida a un linaje o tejido espec√≠fico (ej. hematopoy√©tica).", "Igual que totipotente.", "Puede formar neuronas y piel a la vez.", "Es una iPS."], correct: 0, explanation: "Su potencial est√° limitado a los tipos celulares del tejido en el que residen." },
    { topic: "Tipos de Potencia", question: "¬øQu√© es una c√©lula Unipotente?", options: ["Solo genera un tipo celular (ej. c√©lula sat√©lite muscular).", "Genera todo.", "Es una c√©lula muerta.", "Es una c√©lula cancerosa."], correct: 0, explanation: "Tiene capacidad de autorrenovaci√≥n pero solo produce un tipo de c√©lula diferenciada." },
    { topic: "Nicho", question: "¬øQu√© es el nicho de c√©lulas madre?", options: ["Una cueva en el hueso.", "Un microambiente especializado que mantiene a las c√©lulas madre en estado indiferenciado y regula su proliferaci√≥n.", "Un tipo de c√©lula madre.", "Un tumor."], correct: 1, explanation: "El nicho provee las se√±ales de soporte y control necesarias para la funci√≥n de la c√©lula madre." },
    { topic: "Nicho Intestinal", question: "¬øQu√© c√©lulas del nicho intestinal secretan se√±ales Wnt para mantener a las c√©lulas madre?", options: ["Enterocitos.", "C√©lulas caliciformes.", "C√©lulas de Paneth.", "C√©lulas M."], correct: 2, explanation: "Las c√©lulas de Paneth, situadas en el fondo de la cripta junto a las c√©lulas madre, secretan Wnt." },
    { topic: "Se√±alizaci√≥n Wnt", question: "¬øQu√© ocurre si la v√≠a Wnt se activa constitutivamente (sin control) en el intestino?", options: ["El tejido muere.", "Se genera c√°ncer colorrectal (p√≥lipos).", "No pasa nada.", "Se detiene la divisi√≥n."], correct: 1, explanation: "La sobreactivaci√≥n de Wnt provoca proliferaci√≥n excesiva de c√©lulas precursoras, conduciendo a tumores." },
    { topic: "Renovaci√≥n", question: "¬øQu√© c√©lulas se consideran terminalmente diferenciadas?", options: ["Las c√©lulas madre.", "Las c√©lulas precursoras.", "Las c√©lulas que han cesado de dividirse y ejecutan la funci√≥n del tejido (ej. eritrocito).", "El cigoto."], correct: 2, explanation: "Est√°n al final de la l√≠nea de desarrollo, realizan la funci√≥n y finalmente mueren sin dividirse m√°s." },
    { topic: "iPS", question: "¬øQu√© son las C√©lulas Madre Pluripotentes Inducidas (CMPi o iPS)?", options: ["C√©lulas embrionarias.", "C√©lulas adultas reprogramadas a un estado pluripotente similar al embrionario mediante factores de transcripci√≥n.", "C√©lulas clonadas.", "C√©lulas de la sangre."], correct: 1, explanation: "Descubiertas por Yamanaka, permiten obtener c√©lulas pluripotentes √©ticamente y paciente-espec√≠ficas." },
    { topic: "Aplicaciones", question: "¬øQu√© son los Organoides?", options: ["√ìrganos reales.", "Estructuras 3D cultivadas in vitro a partir de c√©lulas madre que imitan la arquitectura y funci√≥n de un √≥rgano.", "Piezas de robot.", "Tumores."], correct: 1, explanation: "Son modelos 'mini-√≥rganos' √∫tiles para estudiar desarrollo, enfermedades y f√°rmacos." },
    { topic: "Clonaci√≥n", question: "¬øQu√© demostr√≥ la clonaci√≥n de la oveja Dolly?", options: ["Que el n√∫cleo de una c√©lula adulta diferenciada conserva todo el genoma y puede ser reprogramado para generar un organismo.", "Que la clonaci√≥n es imposible.", "Que las c√©lulas madre no existen.", "Que el ADN se pierde."], correct: 0, explanation: "Fue la prueba de la equivalencia gen√≥mica y la reversibilidad del estado diferenciado (nuclear)." },
    { topic: "Terapia", question: "¬øCu√°l es una ventaja clave de las iPS frente a las ES (embrionarias) en medicina?", options: ["Son m√°s f√°ciles de obtener.", "Permiten trasplantes aut√≥logos (del propio paciente), evitando el rechazo inmune.", "Son totipotentes.", "Crecen m√°s r√°pido."], correct: 1, explanation: "Al provenir del propio paciente, son gen√©ticamente id√©nticas y el sistema inmune no las ataca." },
    { topic: "Hematopoyesis", question: "¬øQu√© tipo de c√©lula madre se utiliza en los trasplantes de m√©dula √≥sea?", options: ["C√©lulas madre embrionarias.", "C√©lulas madre hematopoy√©ticas (multipotentes).", "C√©lulas madre neuronales.", "Fibroblastos."], correct: 1, explanation: "Son capaces de reconstituir todo el sistema sangu√≠neo e inmune del receptor." },
    { topic: "Nicho", question: "¬øQu√© ocurre cuando una c√©lula madre hija sale del nicho?", options: ["Muere inmediatamente.", "Se diferencia al dejar de recibir las se√±ales de mantenimiento (ej. Wnt).", "Se convierte en otra c√©lula madre.", "Vuelve al nicho."], correct: 1, explanation: "La distancia f√≠sica del nicho determina el inicio de la diferenciaci√≥n." },
    { topic: "Piel", question: "¬øD√≥nde residen las c√©lulas madre de la epidermis?", options: ["En la superficie (estrato c√≥rneo).", "En la capa basal.", "En la dermis.", "En el pelo."], correct: 1, explanation: "Est√°n en la capa m√°s profunda, ancladas a la l√°mina basal, desde donde generan c√©lulas que ascienden." },
    { topic: "Recambio", question: "¬øTodos los tejidos se renuevan a la misma velocidad?", options: ["S√≠.", "No, var√≠a enormemente (ej. intestino r√°pido vs neuronas muy lento/nulo).", "Depende de la temperatura.", "Solo en ni√±os."], correct: 1, explanation: "El epitelio intestinal se renueva en d√≠as, mientras que el hueso tarda a√±os y el nervioso apenas lo hace." },
    { topic: "Potencia", question: "¬øEl cigoto es una c√©lula madre?", options: ["No, es una c√©lula diferenciada.", "S√≠, es la c√©lula madre totipotente definitiva.", "Es una c√©lula iPS.", "Es multipotente."], correct: 1, explanation: "Es el origen de todas las c√©lulas, con potencial absoluto." },
    { topic: "Investigaci√≥n", question: "¬øPara qu√© sirve un organoide de cerebro?", options: ["Para pensar.", "Para estudiar el desarrollo neuronal y enfermedades como la microcefalia in vitro.", "Para trasplantar cerebros.", "No sirve."], correct: 1, explanation: "Permite modelar procesos complejos humanos que no se pueden estudiar en animales." },

    // --- 7.5 MUERTE CELULAR (61-75) ---
    { topic: "Tipos de Muerte", question: "¬øQu√© es la Apoptosis?", options: ["Muerte por lesi√≥n aguda.", "Muerte celular programada, un proceso limpio y ordenado.", "Muerte por falta de ox√≠geno.", "Infecci√≥n viral."], correct: 1, explanation: "Es un suicidio celular fisiol√≥gico y controlado, esencial para la homeostasis." },
    { topic: "Tipos de Muerte", question: "¬øQu√© es la Necrosis?", options: ["Igual que apoptosis.", "Muerte celular accidental o patol√≥gica, 'sucia', que provoca inflamaci√≥n.", "Divisi√≥n celular.", "Diferenciaci√≥n."], correct: 1, explanation: "La c√©lula se hincha y estalla, liberando contenido t√≥xico y da√±ando el tejido vecino." },
    { topic: "Mecanismo", question: "¬øQu√© familia de proteasas ejecuta la apoptosis?", options: ["Quinasas.", "Caspasas.", "Polimerasas.", "Lipasas."], correct: 1, explanation: "Las caspasas cortan prote√≠nas clave del citoesqueleto y n√∫cleo, desmantelando la c√©lula." },
    { topic: "Mecanismo", question: "¬øC√≥mo se activan las caspasas?", options: ["Por fosforilaci√≥n.", "Por corte proteol√≠tico (cascada de activaci√≥n).", "Por uni√≥n a ADN.", "Por oxidaci√≥n."], correct: 1, explanation: "Se sintetizan como procaspasas inactivas; una activa corta y activa a la siguiente (amplificaci√≥n)." },
    { topic: "Regulaci√≥n", question: "¬øQu√© familia de prote√≠nas regula la v√≠a intr√≠nseca (mitocondrial) de la apoptosis?", options: ["Familia Bcl2.", "Familia Ras.", "Familia Rho.", "Integrinas."], correct: 0, explanation: "Bcl2 controla la liberaci√≥n de citocromo c desde la mitocondria." },
    { topic: "V√≠a Intr√≠nseca", question: "¬øQu√© liberan las mitocondrias al citosol para iniciar la apoptosis?", options: ["ATP.", "Citocromo c.", "Glucosa.", "ADN."], correct: 1, explanation: "El citocromo c en el citosol activa el ensamblaje del apoptosoma y la cascada de caspasas." },
    { topic: "Reguladores Bcl2", question: "¬øQu√© funci√≥n tienen Bax y Bak?", options: ["Son anti-apopt√≥ticos.", "Son pro-apopt√≥ticos: forman poros en la mitocondria para liberar citocromo c.", "Son factores de crecimiento.", "Son receptores."], correct: 1, explanation: "Promueven la muerte permeabilizando la membrana mitocondrial externa." },
    { topic: "Reguladores Bcl2", question: "¬øQu√© funci√≥n tiene la prote√≠na Bcl2?", options: ["Es pro-apopt√≥tica.", "Es anti-apopt√≥tica: bloquea a Bax/Bak y previene la liberaci√≥n de citocromo c.", "Es una caspasa.", "Es un mit√≥geno."], correct: 1, explanation: "Bcl2 favorece la supervivencia celular inhibiendo la muerte." },
    { topic: "V√≠a Extr√≠nseca", question: "¬øQu√© activa la v√≠a extr√≠nseca de la apoptosis?", options: ["Da√±o en el ADN.", "Receptores de muerte en la superficie celular (ej. receptor Fas).", "Falta de nutrientes.", "Estr√©s del RE."], correct: 1, explanation: "Es activada desde fuera, por ejemplo, por linfocitos T citot√≥xicos que unen el ligando Fas." },
    { topic: "Se√±ales", question: "¬øQu√© hacen los Factores de Supervivencia?", options: ["Inducen muerte.", "Suprimen la apoptosis (ej. aumentando Bcl2).", "Estimulan divisi√≥n.", "Estimulan crecimiento."], correct: 1, explanation: "Mantienen la c√©lula viva; sin ellos, la c√©lula activa su programa de suicidio por defecto." },
    { topic: "Se√±ales", question: "¬øQu√© son los Mit√≥genos?", options: ["Se√±ales que estimulan la divisi√≥n celular (mitosis).", "Se√±ales de muerte.", "C√©lulas madre.", "Org√°nulos."], correct: 0, explanation: "Promueven la entrada en el ciclo celular (superando el punto de control G1)." },
    { topic: "Se√±ales", question: "¬øQu√© son los Factores de Crecimiento?", options: ["Se√±ales que estimulan el aumento de tama√±o y masa celular (s√≠ntesis de macromol√©culas).", "Se√±ales de divisi√≥n.", "Nutrientes.", "Vitaminas."], correct: 0, explanation: "Promueven el anabolismo para que la c√©lula crezca." },
    { topic: "Fisiolog√≠a", question: "¬øPor qu√© es importante la apoptosis en el desarrollo embrionario?", options: ["Para nada.", "Para esculpir estructuras (ej. eliminar tejido entre los dedos) y ajustar el n√∫mero de c√©lulas (ej. neuronas).", "Para crear tumores.", "Para nutrir."], correct: 1, explanation: "La muerte programada elimina c√©lulas innecesarias o sobrantes para dar forma y proporci√≥n al organismo." },
    { topic: "Patolog√≠a", question: "¬øQu√© ocurre si hay demasiada apoptosis?", options: ["C√°ncer.", "Enfermedades neurodegenerativas o da√±o tisular (ej. infarto).", "Gigantismo.", "Nada."], correct: 1, explanation: "La p√©rdida excesiva de c√©lulas conduce a atrofia y fallo funcional." },
    { topic: "Patolog√≠a", question: "¬øQu√© ocurre si hay muy poca apoptosis?", options: ["C√°ncer o enfermedades autoinmunes.", "Sida.", "Fallo card√≠aco.", "Muerte del organismo."], correct: 0, explanation: "La supervivencia de c√©lulas da√±adas o autorreactivas es la base de tumores y autoinmunidad." }
];

// Inicializaci√≥n de propiedades
quizData.forEach(q => {
    q.isMarked = false;
    q.userCorrect = null; // null, true, or false
});

let activeIndices = []; 
let currentPlaylistIndex = 0;
let sessionScore = 0;
let answered = false;

document.addEventListener('DOMContentLoaded', () => {
    startQuiz('all');
});

function startQuiz(mode) {
    activeIndices = [];

    // L√≥gica de filtrado de "playlist"
    if (mode === 'all') {
        quizData.forEach(q => q.userCorrect = null); // Resetear respuestas
        // Opcional: resetear marcas con: quizData.forEach(q => q.isMarked = false);
        activeIndices = quizData.map((_, i) => i);
    } 
    else if (mode === 'failed') {
        activeIndices = quizData.map((q, i) => q.userCorrect === false ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'marked') {
        activeIndices = quizData.map((q, i) => q.isMarked ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'mixed') {
        activeIndices = quizData.map((q, i) => (q.userCorrect === false || q.isMarked) ? i : -1).filter(i => i !== -1);
    }

    if (activeIndices.length === 0) {
        alert("No hay preguntas disponibles para este modo.");
        return;
    }

    currentPlaylistIndex = 0;
    sessionScore = 0;
    
    // UI Updates
    document.getElementById('results-screen').style.display = 'none';
    document.getElementById('quiz-container').style.display = 'block';
    document.getElementById('statusBar').style.display = 'flex';
    document.querySelector('.progress-ring').style.display = 'block';
    
    loadQuestion();
}

function loadQuestion() {
    answered = false;
    const realIndex = activeIndices[currentPlaylistIndex];
    const q = quizData[realIndex];
    
    document.getElementById('q-progress').innerText = `Pregunta ${currentPlaylistIndex + 1} de ${activeIndices.length}`;
    document.getElementById('score-display').innerText = `Aciertos: ${sessionScore}`;
    
    // Barra de progreso
    const progressPercent = ((currentPlaylistIndex) / activeIndices.length) * 100;
    document.getElementById('progressBar').style.width = `${progressPercent}%`;

    const container = document.getElementById('quiz-container');
    const checkedAttr = q.isMarked ? 'checked' : '';

    let html = `
        <div class="question-card active">
            <label class="bookmark-panel">
                <input type="checkbox" onchange="toggleMark(${realIndex}, this)" ${checkedAttr}>
                <span>Marcar</span>
            </label>

            <div class="question-header">${q.topic}</div>
            <div class="question-text">${q.question}</div>
            <div class="options-list">
                ${q.options.map((opt, i) => `
                    <button class="option-btn" onclick="checkAnswer(${i}, ${q.correct}, this, ${realIndex})">
                        ${String.fromCharCode(65+i)}. ${opt}
                    </button>
                `).join('')}
            </div>
            <div class="feedback-area" id="feedback"></div>
            <button class="nav-btn" id="next-btn" onclick="nextQuestion()">Siguiente</button>
        </div>
    `;
    
    container.innerHTML = html;
}

function toggleMark(realIndex, checkbox) {
    quizData[realIndex].isMarked = checkbox.checked;
}

function checkAnswer(selected, correct, btn, realIndex) {
    if(answered) return;
    answered = true;

    const allBtns = document.querySelectorAll('.option-btn');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');

    allBtns.forEach(b => b.disabled = true);

    if(selected === correct) {
        sessionScore++;
        quizData[realIndex].userCorrect = true; // Guardar acierto
        btn.classList.add('correct');
        feedback.innerHTML = `<strong style="color:var(--success)">¬°Correcto!</strong> <div class="rationale">${quizData[realIndex].explanation}</div>`;
    } else {
        quizData[realIndex].userCorrect = false; // Guardar fallo
        btn.classList.add('incorrect');
        allBtns[correct].classList.add('correct');
        feedback.innerHTML = `<strong style="color:var(--danger)">Incorrecto.</strong> <div class="rationale">${quizData[realIndex].explanation}</div>`;
    }

    feedback.classList.add('show');
    nextBtn.style.display = 'block';
    document.getElementById('score-display').innerText = `Aciertos: ${sessionScore}`;
}

function nextQuestion() {
    if(currentPlaylistIndex < activeIndices.length - 1) {
        currentPlaylistIndex++;
        loadQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    document.getElementById('statusBar').style.display = 'none';
    document.getElementById('quiz-container').style.display = 'none';
    document.querySelector('.progress-ring').style.display = 'none';
    document.getElementById('results-screen').style.display = 'block';
    
    document.getElementById('final-number').innerText = `${sessionScore} / ${activeIndices.length}`;
    
    const percent = Math.round((sessionScore / activeIndices.length) * 100);
    let msg = "";
    if(percent >= 90) msg = "¬°Excelente!";
    else if(percent >= 70) msg = "¬°Muy bien!";
    else if(percent >= 50) msg = "Aprobado.";
    else msg = "Necesitas repasar.";
    
    document.getElementById('final-text').innerText = `${percent}% - ${msg}`;

    // Calcular estad√≠sticas para habilitar botones
    const totalFailed = quizData.filter(q => q.userCorrect === false).length;
    const totalMarked = quizData.filter(q => q.isMarked === true).length;
    const totalMixed = quizData.filter(q => q.userCorrect === false || q.isMarked).length;

    document.getElementById('stats-box').innerHTML = `
        <strong>Resumen Global:</strong><br>
        Marcadas: ${totalMarked} | Falladas: ${totalFailed}
    `;

    document.getElementById('btn-failed').disabled = (totalFailed === 0);
    document.getElementById('btn-marked').disabled = (totalMarked === 0);
    document.getElementById('btn-mixed').disabled = (totalMixed === 0);
    
    document.getElementById('btn-failed').innerText = `‚ùå Repetir Falladas (${totalFailed})`;
    document.getElementById('btn-marked').innerText = `‚ö†Ô∏è Repetir Marcadas (${totalMarked})`;
}
</script>

</body>
</html>
