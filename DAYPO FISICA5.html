<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Termodin√°mica y Biof√≠sica</title>
    <style>
        :root {
            --primary: #d35400; /* Naranja quemado del dise√±o original */
            --secondary: #2c3e50;
            --bg: #f4f4f9;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 30px;
        }

        .question-card {
            background: var(--white);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 5px solid transparent;
            position: relative;
            transition: transform 0.2s;
        }

        .question-card:hover {
            border-left: 5px solid var(--primary);
        }

        /* --- NUEVO: Estilos para el Checkbox --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 10px;
            font-size: 0.9em;
            color: var(--secondary);
            font-weight: bold;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #95a5a6;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 600;
            font-size: 1.15em;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option-btn {
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            background: #fff;
            border-radius: 6px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #444;
        }

        .option-btn:hover:not(:disabled) {
            background-color: #fdf2e9;
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.8;
        }

        .correct {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724 !important;
            font-weight: bold;
        }

        .incorrect {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24 !important;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f4fd;
            border-left: 4px solid #3498db;
            border-radius: 0 4px 4px 0;
            display: none;
            font-size: 0.95em;
        }
        .explanation.visible {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Estilos para el √°rea de controles finales --- */
        #controls-area {
            margin-top: 40px;
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        .action-btn {
            background: var(--secondary); color: white; border: none;
            padding: 12px 24px; font-size: 1em; border-radius: 6px;
            cursor: pointer; margin: 5px;
            transition: background 0.3s;
        }
        .action-btn:hover { background: #34495e; }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        .restart-options button {
            background: var(--primary);
        }
        .restart-options button:hover { background: #e67e22; }

    </style>
</head>
<body>

    <h1>Examen de Termodin√°mica</h1>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>¬øC√≥mo deseas continuar?</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer el cuestionario entero</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Hacer solo las preguntas marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Hacer solo las preguntas falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Hacer falladas y marcadas</button>
        </div>
    </div>

<script>
    // BANCO DE PREGUNTAS
    const quizData = [
        { q: "Las unidades de la entrop√≠a en el SI son:", opts: ["Kcal/¬∫C", "J/¬∫C", "Kj/h.m¬≤", "J/K"], a: "J/K" },
        { q: "El calor se mide en:", opts: ["Watios", "Julios", "Caballos de vapor", "Grados cent√≠grados"], a: "Julios" },
        { q: "La ecuaci√≥n de transmisi√≥n del calor entre dos medios, indica que el calor trasmitido es:", opts: ["Directamente proporcional a la resistencia t√©rmica", "Muy elevado", "Inversamente proporcional a la diferencia de temperaturas", "Inversamente proporcional a la resistencia t√©rmica"], a: "Inversamente proporcional a la resistencia t√©rmica" },
        { q: "Los escalofr√≠os pertenecen a la zona o nivel de regulaci√≥n:", opts: ["Vasomotora", "Sudomotora", "Voluntaria", "Metab√≥lica"], a: "Metab√≥lica" },
        { q: "En cualquier proceso en que un sistema termodin√°micamente aislado cambia de un estado a otro:", opts: ["Su entrop√≠a aumenta", "Su entalpia disminuye", "Su entalpia aumenta", "Su entrop√≠a disminuye"], a: "Su entrop√≠a aumenta" },
        { q: "En Termodin√°mica Cl√°sica, un estado se caracteriza por las magnitudes:", opts: ["Presi√≥n(P), Volumen(V) y tiempo(t)", "Presi√≥n(P), Tiempo(t) y Temperatura(T)", "Presi√≥n(P), Potencia(W) y Temperatura(T)", "Presi√≥n(P), Volumen(V) y Temperatura(T)"], a: "Presi√≥n(P), Volumen(V) y Temperatura(T)" },
        { q: "La temperatura:", opts: ["La cualidad que permite determinar si dos sistemas est√°n o no en equilibrio t√©rmico", "Es lo que sube o baja en un term√≥metro", "Es lo que regula el sol", "Se mide en calor√≠as"], a: "La cualidad que permite determinar si dos sistemas est√°n o no en equilibrio t√©rmico" },
        { q: "El ser vivo es un:", opts: ["Sistema termodin√°mico Ordenado", "Sistema termodin√°mico Estable", "Sistema termodin√°mico Sano", "Sistema termodin√°mico Instable"], a: "Sistema termodin√°mico Instable" },
        { q: "En los cambios de estado se modifica:", opts: ["No se modifica la temperatura", "La temperatura inicial y final del sistema", "La temperatura final", "La temperatura inicial"], a: "No se modifica la temperatura" },
        { q: "¬øPara que sudamos cuando la temperatura corporal es elevada?", opts: ["Para eliminar toxinas", "Para evaporar, consumir energ√≠a y bajar la temperatura de la superficie corporal", "Para usar los ventiladores", "Para oler mal"], a: "Para evaporar, consumir energ√≠a y bajar la temperatura de la superficie corporal" },
        { q: "El primer principio de la termodin√°mica introduce el concepto de:", opts: ["Temperatura", "Energ√≠a interna", "Entrop√≠a", "Entalpia"], a: "Energ√≠a interna" },
        { q: "Una funci√≥n de estado en termodin√°mica es aquella que:", opts: ["Solo depende del sentido en el que se realicen las transformaciones independientemente de los estados", "Me gusta mi carrera", "√Ålvaro Cond√≥n es el mejor", "Depende solo del estado inicial y final"], a: "Depende solo del estado inicial y final" },
        { q: "El segundo principio de la termodin√°mica introduce el concepto de:", opts: ["Energ√≠a interna", "Entalpia", "Calor", "Entropia"], a: "Entropia" },
        { q: "El primer principio de la termodin√°mica es:", opts: ["La energ√≠a ni se crea ni se destruye", "El calor", "La entalpia", "La entropia"], a: "La energ√≠a ni se crea ni se destruye" },
        { q: "El segundo principio de la termodin√°mica determina que:", opts: ["Es imposible obtener un proceso c√≠clico cuyo √∫nico efecto sea la transformaci√≥n de calor en trabajo", "Es posible obtener dicho proceso", "Es posible obtener dicho proceso en determinadas condiciones de presi√≥n", "Es posible obtener dicho proceso en determinadas condiciones de temperatura"], a: "Es imposible obtener un proceso c√≠clico cuyo √∫nico efecto sea la transformaci√≥n de calor en trabajo" },
        { q: "¬øA que concepto se llega en el principio cero de la termodin√°mica?", opts: ["Equilibrio t√©rmico / Temperatura", "Entropia", "Trabajo", "Entalpia"], a: "Equilibrio t√©rmico / Temperatura" },
        { q: "En relaci√≥n a los dos principios de la termodin√°mica usted dir√≠a:", opts: ["El primero es probabil√≠stico y el segundo r√≠gido", "Ambos son probabil√≠sticos", "El segundo es probabil√≠stico y el primero r√≠gido", "Ambos son r√≠gidos"], a: "El segundo es probabil√≠stico y el primero r√≠gido" },
        { q: "En cualquier proceso donde un sistema termodin√°micamente aislado pasa de un estado a otro:", opts: ["Su entrop√≠a aumenta", "Su entrop√≠a disminuye", "Su entalpia aumenta", "Su entalpia disminuye"], a: "Su entrop√≠a aumenta" },
        { q: "¬øQu√© no es una funci√≥n de estado?", opts: ["Presi√≥n", "Temperatura", "Entrop√≠a", "Trabajo"], a: "Trabajo" },
        { q: "¬øC√≥mo regula el ser humano su temperatura corporal?", opts: ["Cediendo calor al exterior", "Tomando calor del exterior", "Variando su resistencia t√©rmica", "Manteniendo todos los puntos del cuerpo a la misma temperatura"], a: "Variando su resistencia t√©rmica" },
        { q: "¬øC√≥mo regulan ciertos mam√≠feros y aves sometidas a bajas temperaturas el flujo de calor para sus extremidades?", opts: ["Variando su resistencia t√©rmica", "Variando su temperatura corporal", "Dejando que se congelen", "Con un sistema de circulaci√≥n contracorriente"], a: "Con un sistema de circulaci√≥n contracorriente" },
        { q: "La entrop√≠a en un sistema aislado:", opts: ["No varia", "Disminuye siempre", "Aumenta siempre", "Es reversible"], a: "Aumenta siempre" },
        { q: "En condiciones normales de 25 grados. ¬øPor que mecanismo pierde el cuerpo mas calor?", opts: ["Radiaci√≥n", "Convecci√≥n", "Transpiraci√≥n", "Respiraci√≥n"], a: "Radiaci√≥n" },
        { q: "El primer experimento de Joule establece relaci√≥n entre:", opts: ["Calor y temperatura", "Energ√≠a y materia", "Calor y trabajo", "Trabajo mec√°nico y estabilidad"], a: "Calor y trabajo" },
        { q: "La entrop√≠a relaciona:", opts: ["Calor absorbido por las transformaciones con la temperatura", "Energ√≠a interna con la presi√≥n y el volumen", "El calor con el trabajo util", "El calor con el trabajo"], a: "Calor absorbido por las transformaciones con la temperatura" },
        { q: "Un sistema es estable si:", opts: ["La temperatura es -273,5", "No emite radiaci√≥n", "Alcanza un valor m√°ximo de entrop√≠a", "Alcanza un valor m√≠nimo de entrop√≠a"], a: "Alcanza un valor m√°ximo de entrop√≠a" },
        { q: "La unidad entrop√≠a es:", opts: ["Julio", "Clausius", "Calor√≠a", "Todas las anteriores"], a: "Clausius" },
        { q: "El metabolismo se suele expresar en:", opts: ["Calor√≠a por cm¬≤ y minuto", "Kilocalor√≠as", "Kilocalor√≠as por m¬≤", "Kilocalor√≠as por m¬≤ u hora"], a: "Kilocalor√≠as por m¬≤ u hora" },
        { q: "El calor transformado en sangre se hace mediante:", opts: ["Convecci√≥n", "Conducci√≥n", "Emisi√≥n", "Refrigeraci√≥n"], a: "Convecci√≥n" },
        { q: "Los animales de sangre fr√≠a son:", opts: ["Poiquilotermos", "Homeotermos", "Enderg√≥nicos", "Exerg√≥nicos"], a: "Poiquilotermos" },
        { q: "Los animales de sangre caliente son:", opts: ["Poiquilotermos", "Homeotermos", "Enderg√≥nicos", "Exerg√≥nicos"], a: "Homeotermos" },
        { q: "Las transformaciones isotermas son:", opts: ["A presi√≥n constante", "A volumen constante", "A temperatura constante", "Presi√≥n y volumen constante"], a: "A temperatura constante" },
        { q: "El primer principio de la termodin√°mica es:", opts: ["La energ√≠a ni se crea ni se destruye, se transforma", "El calor", "Entalpia", "Entrop√≠a"], a: "La energ√≠a ni se crea ni se destruye, se transforma" },
        { q: "En una transformaci√≥n reversible a presi√≥n y temperatura constante:", opts: ["La variaci√≥n de energ√≠a libre es nula", "La variaci√≥n de energ√≠a libre es positiva", "La variaci√≥n de energ√≠a libre es negativa si no hay trabajo √∫til", "La variaci√≥n de energ√≠a libre es nula si no hay trabajo √∫til"], a: "La variaci√≥n de energ√≠a libre es nula si no hay trabajo √∫til" },
        { q: "Las transformaciones adiab√°ticas se realizan:", opts: ["A presi√≥n constante", "Sin intercambio de trabajo util", "Sin intercambio de energ√≠a", "Sin intercambio de calor"], a: "Sin intercambio de calor" },
        { q: "El cuerpo al alimentarse:", opts: ["Toma energ√≠a", "Toma materia", "Disminuye su entropia", "Aumenta S"], a: "Disminuye su entropia" },
        { q: "Al verdadero concepto de temperatura se llega por:", opts: ["Primer principio", "Segundo principio", "Principio cero", "Teor√≠a cin√©tica"], a: "Principio cero" },
        { q: "La circulaci√≥n venosa intercambia temperatura con la arteria cuando:", opts: ["Hace frio", "Hace calor", "Se liberan hormonas", "Se produce una isquemia"], a: "Hace frio" },
        { q: "El temblor o escalofr√≠o es una manera de propagaci√≥n del calor por:", opts: ["Convecci√≥n", "Radiaci√≥n", "Conducci√≥n", "No es una manera de propagaci√≥n"], a: "No es una manera de propagaci√≥n" },
        { q: "Si aumenta la entropia:", opts: ["Aumenta el desorden", "Aumenta el orden", "Disminuye la temperatura", "Disminuye el calor"], a: "Aumenta el desorden" },
        { q: "Las transformaciones adiab√°ticas (diab√°ticas en texto original) son aquellas:", opts: ["Que intercambian calor y trabajo con el exterior", "Que solo intercambia calor", "Que no intercambia calor con el exterior", "Que no intercambia trabajo con el exterior"], a: "Que no intercambia calor con el exterior" },
        { q: "Se llama calor de reacci√≥n al calor que absorbe o desprende al:", opts: ["Formarse un mol de una sustancia compuesta a partir de las sustancias simples correspondientes", "Reaccionar varias sustancias", "Quemarse totalmente una sustancia cualquiera", "Oxidarse una sustancia determinada"], a: "Formarse un mol de una sustancia compuesta a partir de las sustancias simples correspondientes" },
        { q: "El metabolismo b√°sico o basal es la cantidad de calor que produce un sujeto por metro cuadrado y por hora cuando:", opts: ["El sujeto esta en su actividad habitual a temperatura no agresiva", "El sujeto esta en reposo f√≠sico y mental a cualquier temperatura", "El sujeto esta en reposo f√≠sico y mental a temperatura agradable", "El sujeto desarrolla su actividad habitual a temperatura agradable"], a: "El sujeto esta en reposo f√≠sico y mental a temperatura agradable" },
        { q: "La principal reacci√≥n qu√≠mica que se analiza para el estudio del valor cal√≥rico del ox√≠geno es:", opts: ["C6H12O6 + O2", "NH2 + CH", "C6H6 + O2", "H2 + O2"], a: "C6H12O6 + O2" },
        { q: "La ley de Hess es fundamental para determinar:", opts: ["La cantidad de prote√≠nas de los alimentos", "El valor cal√≥rico de los alimentos", "La energ√≠a interna de los componentes qu√≠micos", "La cantidad de grasa de los alimentos"], a: "El valor cal√≥rico de los alimentos" },
        { q: "La cantidad de calor desprendido por la combusti√≥n completa de un alimento determinado se denomina:", opts: ["Energ√≠a interna del alimento", "Energ√≠a libre del alimento", "Valor cal√≥rico del alimento", "Corriente cal√≥rica"], a: "Valor cal√≥rico del alimento" },
        { q: "El valor cal√≥rico de los alimentos ser√° exactamente igual al calor desprendido de la combusti√≥n de los mismos si:", opts: ["Se produjera trabajo √∫til adem√°s de calor", "Solamente se produjera trabajo √∫til", "Nunca se produjera trabajo √∫til", "Se diera otra circunstancia"], a: "Nunca se produjera trabajo √∫til" },
        { q: "A que concepto se llega con el primer principio de la termodin√°mica:", opts: ["Energ√≠a interna", "Entalp√≠a", "Entrop√≠a", "Temperatura"], a: "Energ√≠a interna" },
        { q: "En un sistema reversible:", opts: ["S aumenta", "S disminuye", "S permanece constante", "Ninguna de las anteriores"], a: "S permanece constante" },
        { q: "La cantidad de calor Q transmitida por conducci√≥n en una unidad de tiempo se define por:", opts: ["Q/t = K * S/1 * (T1-T2)", "Q/t = K * S/1 * (T2-T1)", "Q= K * S/1 * (T1-T2)", "Q/t = K * (T1-T2)"], a: "Q/t = K * S/1 * (T1-T2)" },
        { q: "La importancia de la magnitud f√≠sica de la energ√≠a radica en:", opts: ["Su permanencia", "No se puede crear", "No se puede destruir", "Todas son ciertas"], a: "Todas son ciertas" },
        { q: "En una transformaci√≥n isoterma e isob√°rica la funci√≥n de Gibbs:", opts: ["Aumenta", "Disminuye para procesos irreversibles", "Es igual", "Ninguna es cierta"], a: "Disminuye para procesos irreversibles" },
        { q: "¬øVa en contra del primer principio la vida y sus procesos biol√≥gicos?", opts: ["Si, porque cada vez hay especies m√°s complejas", "No, porque es un subsistema", "No, porque disminuye la entropia", "Si, porque aumenta la energ√≠a"], a: "No, porque es un subsistema" },
        { q: "En una reacci√≥n reversible el trabajo √∫til es:", opts: ["M√°ximo", "M√≠nimo", "Igual", "No hay"], a: "M√°ximo" },
        { q: "En una reacci√≥n irreversible la entrop√≠a es:", opts: ["Mayor que cero (en el universo)", "Menor que cero", "Igual que cero", "Menor o igual que cero"], a: "Mayor que cero (en el universo)" },
        { q: "En un proceso reversible la entrop√≠a es:", opts: ["Mayor que cero", "Menor que cero", "Igual a cero (Variaci√≥n neta)"], a: "Igual a cero (Variaci√≥n neta)" },
        { q: "Por que un barco no puede navegar usando la energ√≠a del mar:", opts: ["Va en contra del primer principio", "Va en contra del segundo principio", "No es posible mecanicamente", "No seria rentable"], a: "Va en contra del segundo principio" },
        { q: "El verdadero concepto de temperatura se alcanza con:", opts: ["Teor√≠a de la informaci√≥n", "Teor√≠a nuclear", "Teor√≠a cin√©tica", "Teor√≠a kin√©tica"], a: "Teor√≠a cin√©tica" },
        { q: "La transmisi√≥n de calor por contacto f√≠sico entre dos cuerpos se denomina:", opts: ["Convecci√≥n", "Conducci√≥n", "Difusi√≥n", "Radiaci√≥n"], a: "Conducci√≥n" },
        { q: "Alimentarse consiste en:", opts: ["Adquirir entrop√≠a negativa", "Adquirir entrop√≠a positiva o igual a cero", "Adquirir energ√≠a en forma de calor", "Adquirir entalpia"], a: "Adquirir entrop√≠a negativa" },
        { q: "Una pieza helada pasa a l√≠quida, implicando un aumento de:", opts: ["Entrop√≠a", "Entalp√≠a", "Funci√≥n de Gibbs", "Funci√≥n de Helmholtz"], a: "Entrop√≠a" },
        { q: "El calor en el vac√≠o:", opts: ["Se propaga por convecci√≥n", "Se propaga por conducci√≥n", "No se propaga", "Se propaga por radiaci√≥n"], a: "Se propaga por radiaci√≥n" },
        { q: "La forma mas baja o degradada de energ√≠a es:", opts: ["El calor", "La temperatura", "La energ√≠a cin√©tica", "La energ√≠a potencial"], a: "El calor" },
        { q: "La entalp√≠a:", opts: ["Es una funci√≥n de estado", "No es una funci√≥n de estado", "Es trabajo", "Es calor"], a: "Es una funci√≥n de estado" },
        { q: "El calor que se transfiere de un sistema a otro:", opts: ["Es una funci√≥n de estado", "No es una funci√≥n de estado", "Se mide en watios", "Es constante"], a: "No es una funci√≥n de estado" },
        { q: "La transferencia de calor que se produce en los fluidos por desplazamiento de part√≠culas es debido a una corriente de:", opts: ["Conducci√≥n", "Radiaci√≥n", "Convecci√≥n", "Desplazante"], a: "Convecci√≥n" },
        { q: "Las transformaciones isotermas son aquellas en las que:", opts: ["La T aumenta", "La T disminuye", "No hay transferencia de calor, el calor es constante", "La Temperatura es constante"], a: "La Temperatura es constante" },
        { q: "En un proceso real:", opts: ["La entrop√≠a del universo aumenta", "La entrop√≠a del universo disminuye", "La entrop√≠a del universo se mantiene constante", "El trabajo es m√°ximo"], a: "La entrop√≠a del universo aumenta" },
        { q: "Una funci√≥n de estado es aquella que depende de:", opts: ["Del estado f√≠sico inicial y final", "Del estado final", "De varias variables que var√≠an", "Ninguna de las anteriores"], a: "Del estado f√≠sico inicial y final" },
        { q: "La entalpia del organismo es:", opts: ["M√°xima", "M√≠nima", "Equilibrada (sin contexto claro)", "Todas son falsas"], a: "Equilibrada (sin contexto claro)" },
        { q: "La energ√≠a interna relaciona:", opts: ["Entrop√≠a con trabajo", "Calor con trabajo √∫til", "Calor con entropia", "Calor con trabajo"], a: "Calor con trabajo" },
        { q: "El hipot√°lamo al aumentar la temperatura a 37 grados (desde hipotermia) o por encima de 37 (fiebre/calor):", opts: ["Produce temblor", "Produce sudor", "Produce vaso dilataci√≥n", "Produce respuestas de termorregulaci√≥n"], a: "Produce respuestas de termorregulaci√≥n" },
        { q: "Es inherente al aumento de entrop√≠a:", opts: ["La disminuci√≥n de informaci√≥n", "El aumento de informaci√≥n", "El aumento de energ√≠a", "Nada"], a: "La disminuci√≥n de informaci√≥n" },
        { q: "La posibilidad de invertir calor en trabajo es lo mismo que:", opts: ["Aumento de entrop√≠a", "Disminuci√≥n de entrop√≠a", "Aumento de entalp√≠a", "Disminuci√≥n de entalp√≠a"], a: "Disminuci√≥n de entrop√≠a" },
        { q: "Si el incremento de la funci√≥n de Gibbs y Helmholtz se iguala, diremos que la transformaci√≥n es:", opts: ["Adiab√°tica", "Isobara", "Isocora", "Isoterma"], a: "Isocora" },
        { q: "¬øQu√© tipo de perdida de calor favorece el sudor?", opts: ["Convecci√≥n", "Conducci√≥n", "Radiaci√≥n", "Evaporaci√≥n (La pregunta es falsa en sus opciones)"], a: "Evaporaci√≥n (La pregunta es falsa en sus opciones)" },
        { q: "Consecuencia de que principio es la inaccesibilidad al cero absoluto:", opts: ["Primero", "Segundo", "Tercero", "Cero"], a: "Tercero" },
        { q: "En los cambios de estado se modifica:", opts: ["La temperatura inicial", "La temperatura final", "No se modifica la temperatura", "La temperatura inicial y final"], a: "No se modifica la temperatura" },
        { q: "La ecuaci√≥n fundamental de transmisi√≥n de calor entre dos medios indica que el calor es:", opts: ["Inversamente proporcional a la resistencia termica", "Inversamente proporcional a la diferencia de temperatura", "Muy elevado", "Directamente proporcional a la resistencia termina"], a: "Inversamente proporcional a la resistencia termica" },
        { q: "La temperatura es la magnitud que permite:", opts: ["Determinar si dos cuerpos est√°n o no en equilibrio termico", "Es lo que subo o baja en un termometro", "Se mide en calorias", "Regular el sol"], a: "Determinar si dos cuerpos est√°n o no en equilibrio termico" },
        { q: "¬øPara que sudamos cuando la temperatura es elevada?", opts: ["Para refrigerarnos", "Para eliminar toxinas", "Para usar ventilacion", "Para evaporar el sudor, consumiendo energ√≠a y bajando la temperatura de la superficie corporal"], a: "Para evaporar el sudor, consumiendo energ√≠a y bajando la temperatura de la superficie corporal" },
        { q: "Los escalofr√≠os perteneces a la zona de regulaci√≥n de la temperatura:", opts: ["Sudomotora", "Voluntaria", "Metab√≥lica", "Vasomotora"], a: "Metab√≥lica" },
        { q: "En cualquier proceso donde un sistema termodin√°micamente aislado pasa de un estado a otro:", opts: ["Su entrop√≠a aumenta", "Su entrop√≠a disminuye", "Su entalp√≠a aumenta", "Su entalp√≠a disminuye"], a: "Su entrop√≠a aumenta" },
        { q: "El ser vivo es un sistema:", opts: ["Ordenado", "Estable", "Inestable (Termodin√°micamente)", "Sano"], a: "Inestable (Termodin√°micamente)" },
        { q: "El calor se mide en:", opts: ["Grados", "Vatios", "Caballos de vapor", "Julios"], a: "Julios" },
        { q: "Las unidades de la entrop√≠a en el SI son:", opts: ["J/K", "KJ/h*m¬≤", "J/Celsius", "Kcal./Celsius"], a: "J/K" },
        { q: "Se denomina ecuaci√≥n de estado:", opts: ["Las propiedades de la materia afectadas por Q y T", "Relaci√≥n matem√°tica que liga las magnitudes P,V y T", "Al consiente: P,V y T", "Relaci√≥n matem√°tica que liga las magnitudes que definen el estado de un sistema"], a: "Relaci√≥n matem√°tica que liga las magnitudes que definen el estado de un sistema" },
        { q: "Se dice que un sistema es estable, si:", opts: ["Si energ√≠a es muy elevada", "Esta en estado de m√°xima entrop√≠a", "La entalp√≠a es m√≠nima", "La entalp√≠a es m√°xima"], a: "Esta en estado de m√°xima entrop√≠a" },
        { q: "Aplicando la funci√≥n de Gibbs a la evoluci√≥n de la energ√≠a contenida en un mol de glucosa:", opts: ["La energ√≠a libre obtenida es igual a la entrop√≠a generada", "La energ√≠a libre obtenida es menor que la entalp√≠a", "La energ√≠a libre obtenida es mayor que la entalp√≠a", "La entrop√≠a generada es mayor que la energ√≠a libre"], a: "La energ√≠a libre obtenida es menor que la entalp√≠a" },
        { q: "Para que el organismo vivo se mantenga en equilibrio t√©rmico, es preciso que:", opts: ["El calor transmitido sea igual a calor producido", "El calor trasmitido sea menor a calor producido", "El calor transmitido sea mayor al calor producido", "Debe estar muy bien alimentado"], a: "El calor transmitido sea igual a calor producido" },
        { q: "¬øCu√°l de las siguientes p√©rdidas por calor, es la m√°s importante en el ser humano?", opts: ["Conducci√≥n", "Conversi√≥n", "Radiaci√≥n", "Transpiraci√≥n"], a: "Radiaci√≥n" },
        { q: "La ecuaci√≥n fundamental de transmisi√≥n del calor entre dos medios, nos dice que el calor transmitido es:", opts: ["Directamente proporcional a la resistencia t√©rmica", "Inversamente proporcional a la temperatura corporal", "Directamente proporcional a la diferencia entre la temperatura corporal y la exterior", "No depende de la temperatura exterior"], a: "Directamente proporcional a la diferencia entre la temperatura corporal y la exterior" },
        { q: "El detector en el mecanismo de control de T del cuerpo humano est√° en:", opts: ["La piel", "El hipotalamo", "El sistema circulatorio", "A y B son detectores"], a: "El hipotalamo" },
        { q: "La criobiolog√≠a estudia:", opts: ["Las c√©lulas cancer√≠genas", "Los efectos de las temperaturas bajas en biolog√≠a y medicina", "La producci√≥n y el uso de temperaturas bajas", "El calentamiento de tejidos"], a: "Los efectos de las temperaturas bajas en biolog√≠a y medicina" },
        { q: "El primer principio de la termodin√°mica es:", opts: ["Una ley indeterminista", "Una ley determinista y flexible", "Una ley determinista y r√≠gida", "Una funci√≥n exponencial"], a: "Una ley determinista y r√≠gida" },
        { q: "El primer experimento de Joule establece la relaci√≥n entre:", opts: ["Calor y temperatura", "Energ√≠a y materia", "Calor y trabajo", "Trabajo mec√°nico y estabilidad"], a: "Calor y trabajo" },
        { q: "En un sistema irreversible:", opts: ["S aumenta", "S disminuye", "S permanece constante", "Ninguna de las anteriores"], a: "S aumenta" },
        { q: "La temperatura es:", opts: ["Una energ√≠a", "Una magnitud", "Una sensaci√≥n", "Calor"], a: "Una magnitud" },
        { q: "Los puntos fijos del term√≥metro son:", opts: ["0 y 100", "Dos puntos tomados al azar y ulteriormente estandarizados", "Dos puntos que corresponden con la dilataci√≥n del mercurio en la fusi√≥n del hielo y en la ebullici√≥n del agua", "Todas son ciertas"], a: "Todas son ciertas" },
        { q: "El enunciado ‚Äúes imposible obtener un proceso c√≠clico cuando el √∫nico efecto sea la transformaci√≥n de calor en trabajo‚Äù (entrop√≠a).", opts: ["Es el enunciado del primer principio", "Es el enunciado del segundo", "Es falso", "Es el tercero"], a: "Es el enunciado del segundo" },
        { q: "A la relaci√≥n matem√°tica f(P,V,T)=0 se la denomina:", opts: ["Funci√≥n de estado", "Equilibrio termod√≠namico", "Ecuaci√≥n de estado", "Estado en equilibrio"], a: "Ecuaci√≥n de estado" },
        { q: "¬øA quien deber√≠as seguir en Instagram?", opts: ["Not_yisuss", "Santibenvenuty", "Susoocalderoon", "Ignbartel (elmejordandocharlasmotivadoras)", "Antonioarroyoo19", "Pepegarridoo", "√Ålvaro Cond√≥n, no tiene insta pero √Ålvaro Cond√≥n"], a: "√Ålvaro Cond√≥n, no tiene insta pero √Ålvaro Cond√≥n" },
        { q: "El mecanismo de las aves de unir el seno venoso con el arterial para ganar calor lo realizan:", opts: ["Cuando las p√©rdidas son grandes", "Cuando el clima es h√∫medo y caluroso", "Cuando hace mucho fr√≠o", "Cuando las p√©rdidas son grandes y hace mucho frio"], a: "Cuando las p√©rdidas son grandes y hace mucho frio" },
        { q: "Quieres ser el novi@ de Bartel?", opts: ["SI", "Si", "si", "sI"], a: "SI" },
        { q: "A escala molecular la temperatura es:", opts: ["Inversamente proporcional a la masa del cuerpo", "Inversamente proporcional a la constante de Stefan-Boltzmann", "Similar al calor", "Directamente proporcional a la velocidad de las part√≠culas que forman el cuerpo"], a: "Directamente proporcional a la velocidad de las part√≠culas que forman el cuerpo" },
        { q: "Una variable termodin√°mica que no depende del tama√±o ni de la cantidad de materia se denomina:", opts: ["Intensiva", "Extensiva", "Adiab√°tica", "Fija"], a: "Intensiva" },
        { q: "Si la variaci√≥n de energ√≠a interna es igual a cero, entonces decimos que se trata de un proceso:", opts: ["Adiab√°tico", "Isotermo", "Isobaro", "Isocoro"], a: "Isotermo" },
        { q: "La energ√≠a transferida del cuerpo a otro debido a una diferencia entre sus temperaturas se denomina:", opts: ["Calor", "Energ√≠a interna", "Trabajo cal√≥rico", "Trabajo"], a: "Calor" },
        { q: "¬øCu√°l de lo siguientes sistemas termodin√°micos puede transmitir materia a los alrededores?", opts: ["Sistema Adiab√°tico", "Sistema Cerrado", "Sistema Aislado", "Sistema Abierto"], a: "Sistema Abierto" },
        { q: "Se denomina energ√≠a:", opts: ["A la temperatura alcanzada", "Al producto escalar de la fuerza por el espacio recorrido", "A la cantidad de trabajo producido o consumida por unidad de tiempo", "A la capacidad que tienen los cuerpos para producir cambios para realizar un trabajo"], a: "A la capacidad que tienen los cuerpos para producir cambios para realizar un trabajo" },
        { q: "El proceso en el cual la energ√≠a interna se incrementa en la misma proporci√≥n que el trabajo mec√°nico se denomina:", opts: ["Adiab√°tico", "Isocoro", "Isotermo", "Isobaro"], a: "Adiab√°tico" },
        { q: "El proceso en el cual la energ√≠a interna se incrementa en la misma proporci√≥n que el trabajo mec√°nico se denomina (Repetida):", opts: ["Isotermo", "Is√≥coro", "Adiab√°tico", "Isobaro"], a: "Adiab√°tico" },
        { q: "Si en un sistema reversible a 300 K la entrop√≠a se incrementa en 200 J/K, ¬øCu√°nto calor se agrego al sistema?", opts: ["500 calor√≠as", "2.090 Julios", "60.000 calor√≠as", "60.000 Julios"], a: "60.000 Julios" },
        { q: "La energ√≠a transferida de un cuerpo a otro debido a una diferencia entre sus temperaturas se denomina:", opts: ["Calor", "Energ√≠a interna", "Trabajo", "Trabajo calorico"], a: "Calor" },
        { q: "Una funci√≥n o variable de estado puede definirse como:", opts: ["Aquella que define la forma del sistema", "Aquella cuyas variaciones NO DEPENDEN solamente de los estados inicial y final del sistema", "Aquella cuyas variaciones dependen exclusivamente de los estados inicial y final del sistema", "Aquella que nos indica el estado f√≠sico del sistema"], a: "Aquella cuyas variaciones dependen exclusivamente de los estados inicial y final del sistema" },
        { q: "Un gas contenido en un sistema cil√≠ndrico provisto de un pist√≥n sufre una expansi√≥n al absorber calor. Si la energ√≠a interna no experimenta ninguna variaci√≥n, entonces el trabajo realizo por el gas es:", opts: ["Mayor que el calor absorbido", "Igual que el calor absorbido", "Menor que el calor absorbido", "Cero"], a: "Igual que el calor absorbido" }
    ];

    // --- ASIGNAR IDs √öNICOS (NECESARIO PARA EL TRACKING) ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    // Fisher-Yates Shuffle
    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal para renderizar el quiz
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";

        // Ocultar men√∫ de reinicio y mostrar bot√≥n de finalizar
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // --- SECCI√ìN: Checkbox de Marcar para revisar ---
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            // Si ya estaba marcada en la sesi√≥n global, mantener el check
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) {
                    markedQuestions.add(item.id);
                } else {
                    markedQuestions.delete(item.id);
                }
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";

            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);
            // ------------------------------------------------

            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;
            card.appendChild(questionText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            // Preparamos opciones
            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));

            // Barajamos opciones
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Respuesta Correcta:</strong> ${item.a}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        // --- REGISTRAR FALLO ---
                        failedQuestions.add(item.id);
                        
                        // marcar la correcta visualmente
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) {
                                b.classList.add('correct');
                            }
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- FUNCIONES DE CONTROL FINAL ---

    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        
        // Scroll al final
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        // Mostrar estad√≠sticas
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        
        // Filtramos usando el 'id'
        if (mode === 'all') {
            subset = quizData;
        } else if (mode === 'marked') {
            subset = quizData.filter(q => markedQuestions.has(q.id));
        } else if (mode === 'failed') {
            subset = quizData.filter(q => failedQuestions.has(q.id));
        } else if (mode === 'failed_marked') {
            subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));
        }

        // Limpiamos los fallos de la sesi√≥n anterior
        if(mode !== 'all') {
            failedQuestions.clear(); 
        } else {
            failedQuestions.clear();
            markedQuestions.clear(); // Reset completo
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Iniciar
    renderQuiz();
</script>

</body>
</html>
