<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Pr√°cticas de Bioqu√≠mica</title>
    <style>
        :root {
            --primary: #4f46e5; /* √çndigo/Azul Profundo */
            --primary-dark: #3730a3;
            --primary-light: #e0e7ff;
            --bg: #f8fafc;
            --text: #1e293b;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary-light);
            padding-bottom: 15px;
            display: inline-block;
            width: 100%;
        }

        .question-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .question-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* --- Checkbox para Marcar --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #64748b;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #0f172a;
            line-height: 1.5;
        }

        /* Etiquetas para diagramas */
        .img-tag {
            display: block;
            margin-top: 12px;
            padding: 10px;
            background-color: #f1f5f9;
            border-left: 4px solid #94a3b8;
            color: #475569;
            font-size: 0.9em;
            font-style: italic;
            border-radius: 0 4px 4px 0;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #334155;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary-dark);
            padding-left: 25px; /* Efecto de desplazamiento */
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
            color: #14532d !important;
            font-weight: 600;
        }

        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        /* Caja de Explicaci√≥n */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #eef2ff;
            border-left: 5px solid var(--primary);
            border-radius: 6px;
            display: none;
            font-size: 0.95em;
            color: #312e81;
            animation: slideDown 0.3s ease-out;
        }
        .explanation.visible {
            display: block;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- √Årea de Controles --- */
        #controls-area {
            margin-top: 50px;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary);
        }

        .action-btn {
            background: var(--primary); color: white; border: none;
            padding: 12px 25px; font-size: 1.05em; border-radius: 8px;
            cursor: pointer; margin: 8px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .action-btn:hover { 
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-options button {
            width: 100%;
            background: #475569;
        }
        .restart-options button:hover { background: #334155; }
        .restart-options button:first-child { background: var(--primary); }

    </style>
</head>
<body>

    <h1>Pr√°cticas de Bioqu√≠mica</h1>
    <div style="text-align: center; color: #64748b; margin-bottom: 30px;">
        Santi D√≠az | M√©todos, Soluciones y T√©cnicas de Laboratorio
    </div>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>Resultados de la sesi√≥n</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer todo el test</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Repasar marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Repasar falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Falladas + Marcadas</button>
        </div>
    </div>

<script>
    // Datos convertidos al nuevo formato, conservando las explicaciones
    const quizData = [
        { 
            q: "1. El suero fisiol√≥gico es una soluci√≥n:", 
            opts: ["Isot√≥nica con el plasma", "0,32 M de NaCl", "9,5 g/L de KCl", "0,16 osmolar respecto al medio interno", "Hipot√≥nica para los hemat√≠es"], 
            a: "Isot√≥nica con el plasma", 
            exp: "El suero fisiol√≥gico (NaCl 0,9%) tiene una osmolaridad de ~0,308 Osm, similar a la del plasma." 
        },
        { 
            q: "2. Respecto al m√©todo Lowry, el reactivo de Folin-Ciocalteu tiene un pico de absorci√≥n a:", 
            opts: ["750 nm", "280 nm", "260 nm", "340 nm", "650 nm"], 
            a: "750 nm", 
            exp: "El complejo reducido de Folin-Ciocalteu presenta su m√°ximo de absorci√≥n alrededor de 750 nm (rango visible)." 
        },
        { 
            q: "3. El Œ≤-mercaptoetanol en la t√©cnica de western blotting permite:", 
            opts: ["Romper los puentes disulfuro de las prote√≠nas", "Cargar negativamente las prote√≠nas a separar", "Bloquear la membrana de transferencia", "Facilitar la uni√≥n del anticuerpo secundario", "Generar la se√±al de quimioluminiscencia"], 
            a: "Romper los puentes disulfuro de las prote√≠nas", 
            exp: "Es un agente reductor fuerte que rompe los enlaces S-S (puentes disulfuro) para desnaturalizar la estructura terciaria/cuaternaria." 
        },
        { 
            q: "4. Una centrifugaci√≥n isop√≠cnica separa las part√≠culas en funci√≥n de su:", 
            opts: ["Densidad", "Forma", "Coeficiente de sedimentaci√≥n", "Masa", "Tama√±o"], 
            a: "Densidad", 
            exp: "Las part√≠culas migran a trav√©s de un gradiente hasta detenerse en la posici√≥n donde la densidad del medio es igual a su propia densidad." 
        },
        { 
            q: "5. Una disoluci√≥n que contiene 2 Eq-g/L de NaCl tiene en un litro:", 
            opts: ["Todas las afirmaciones son correctas", "2 moles de NaCl", "2 Eq-g de NaCl", "2000 mmol de NaCl", "2 N de NaCl"], 
            a: "Todas las afirmaciones son correctas", 
            exp: "En NaCl, 1 mol = 1 Eq. Por tanto 2 Eq = 2 Moles = 2 Normal = 2000 mmol." 
        },
        { 
            q: "6. ¬øQu√© cantidad de agua hay que a√±adir para que una soluci√≥n de acetato s√≥dico y glucosa presente una osmolalidad de 0,45 y contenga 0,2 moles de sal y 0,5 moles de glucosa?", 
            opts: ["2 kg de agua", "1 kg de agua", "1 L de agua", "2 L de agua", "2 moles de agua"], 
            a: "2 kg de agua", 
            exp: "Osmoles totales = (0,2 x 2 iones) + (0,5 glucosa) = 0,9 Osm. Para tener 0,45 Osm/kg, necesitamos 2 kg (0,9/2 = 0,45)." 
        },
        { 
            q: "9. No es cierto que en la t√©cnica western blotting:", 
            opts: ["Las prote√≠nas deben estar cargadas positivamente para migrar por el gel", "La SDS-PAGE se emplea para separar previamente las prote√≠nas", "Se obtienen bandas en funci√≥n del peso molecular", "Las bandas se transfieren desde el gel a una membrana", "Se identifican prote√≠nas mediante anticuerpos espec√≠ficos"], 
            a: "Las prote√≠nas deben estar cargadas positivamente para migrar por el gel", 
            exp: "Falso. En SDS-PAGE, el SDS carga las prote√≠nas NEGATIVAMENTE para que migren hacia el √°nodo (+)." 
        },
        { 
            q: "10. Respecto al m√©todo de Lowry, se√±ala la respuesta incorrecta:", 
            opts: ["Las dos etapas del m√©todo requieren un medio √°cido para producirse", "Es un m√©todo espectrofotom√©trico cuantitativo de prote√≠nas", "La prote√≠na se despliega exponiendo residuos fen√≥licos de tirosina", "El reactivo de Folin-Ciocalteu se reduce pasando a color azul", "Se requiere Cu2+ que se une al nitr√≥geno del enlace pept√≠dico"], 
            a: "Las dos etapas del m√©todo requieren un medio √°cido para producirse", 
            exp: "Incorrecto. El m√©todo de Lowry requiere un medio b√°sico (alcalino) para la reacci√≥n de Biuret inicial y la reducci√≥n del Folin." 
        },
        { 
            q: "11. De las siguientes respuestas, se√±ale a qu√© equivale una concentraci√≥n 0,2 M de H2SO4:", 
            opts: ["0,4 N", "0,1 mol/L", "0,1 N", "0,2 Eq-g/L", "0,2 N"], 
            a: "0,4 N", 
            exp: "El H2SO4 libera 2 protones (H+). Normalidad = Molaridad x valencia (2). 0,2 x 2 = 0,4 N." 
        },
        { 
            q: "12. La normalidad de una soluci√≥n 0,5 M de H2SO4 es:", 
            opts: ["1 Normal", "2 Normal", "0,5 Normal", "Depende del pH", "Ninguna es cierta"], 
            a: "1 Normal", 
            exp: "0,5 M x 2 H+ = 1 N." 
        },
        { 
            q: "14. Calcule la molaridad y la normalidad de una disoluci√≥n en la que se disuelven 80 g de NaOH (PM 40) en agua hasta 500 ml:", 
            opts: ["4 M y 4 N", "2 M y 2 N", "2 M y 4 N", "1 M y 2 N", "4 M y 2 N"], 
            a: "4 M y 4 N", 
            exp: "80g / 40PM = 2 moles. 2 moles en 0,5L = 4 M. Como NaOH tiene 1 OH-, N = M." 
        },
        { 
            q: "15. Al disolver un soluto en agua pura, la presi√≥n de vapor de la disoluci√≥n:", 
            opts: ["Disminuye respecto a la del agua pura", "Aumenta respecto a la del agua pura", "No se modifica", "Es independiente de la concentraci√≥n de soluto", "Depende solo de la naturaleza qu√≠mica del soluto"], 
            a: "Disminuye respecto a la del agua pura", 
            exp: "Propiedad coligativa (Ley de Raoult): el soluto no vol√°til reduce la presi√≥n de vapor del disolvente." 
        },
        { 
            q: "16. Respecto al plasma, el suero fisiol√≥gico (NaCl 9,5 g/L, 0,16 M) es isot√≥nico, por lo que:", 
            opts: ["Ambos presentan una concentraci√≥n osmolar cercana a 0,32 Osm", "Ambos presentan igual concentraci√≥n molar, 0,16 M", "Presentan una concentraci√≥n osmolar de 0,16 Osm", "Provocar√≠a lisis de los hemat√≠es", "Los iones Na+ y Cl‚àí atraviesan libremente la membrana del hemat√≠e"], 
            a: "Ambos presentan una concentraci√≥n osmolar cercana a 0,32 Osm", 
            exp: "0,16 M de NaCl se disocia en 2 part√≠culas (0,16 x 2 = 0,32 Osm), igualando la osmolaridad del plasma." 
        },
        { 
            q: "17. La degradaci√≥n de Edman se emplea:", 
            opts: ["Para analizar la secuencia de amino√°cidos de un p√©ptido", "Para estudiar la estructura secundaria de las prote√≠nas", "Para separar prote√≠nas seg√∫n su peso molecular", "Exclusivamente en prote√≠nas de membrana", "Solo permite un ciclo de reacci√≥n por mol√©cula"], 
            a: "Para analizar la secuencia de amino√°cidos de un p√©ptido", 
            exp: "Permite secuenciar amino√°cidos desde el extremo N-terminal uno a uno." 
        },
        { 
            q: "18. Una soluci√≥n 0,3 M de un soluto no electrol√≠tico que difunde a trav√©s de la membrana del hemat√≠e es:", 
            opts: ["Hipot√≥nica con el hemat√≠e", "Hipert√≥nica respecto al hemat√≠e", "Una variante del suero fisiol√≥gico", "Isot√≥nica con el hemat√≠e"], 
            a: "Hipot√≥nica con el hemat√≠e", 
            exp: "Aunque sea isoosm√≥tica (0,3 M vs 0,3 Osm del plasma), si el soluto entra libremente en la c√©lula, arrastra agua consigo, comport√°ndose funcionalmente como hipot√≥nica (lisis)." 
        },
        { 
            q: "19. Una soluci√≥n de HCl tiene una concentraci√≥n de 3,26 √ó 10‚Åª¬≤ M. ¬øCu√°l es su pH?", 
            opts: ["1,49", "12,5", "2,0", "3,3"], 
            a: "1,49", 
            exp: "pH = -log[H+]. -log(0,0326) ‚âà 1,486." 
        },
        { 
            q: "18 (bis). El SDS en la t√©cnica de western blotting permite:", 
            opts: ["Cargar negativamente las prote√≠nas a separar", "Romper espec√≠ficamente puentes disulfuro", "Bloquear la membrana de transferencia", "Unir directamente el anticuerpo a la prote√≠na", "Producir la se√±al de revelado"], 
            a: "Cargar negativamente las prote√≠nas a separar", 
            exp: "El SDS (Dodecil Sulfato S√≥dico) desnaturaliza y aporta carga negativa uniforme proporcional a la masa." 
        },
        { 
            q: "19 (bis). En un aislamiento de √°cidos nucleicos, se√±ale el compuesto que se usa para su precipitaci√≥n y posterior separaci√≥n:", 
            opts: ["Etanol absoluto", "Dodecilsulfato s√≥dico (SDS)", "Cloroformo", "Alcohol isoam√≠lico", "Fenol tamponado"], 
            a: "Etanol absoluto", 
            exp: "El etanol (fr√≠o) reduce la constante diel√©ctrica del agua, haciendo insolubles el ADN/ARN y precipit√°ndolos." 
        },
        { 
            q: "20. Respecto al m√©todo de Lowry, se√±ale la respuesta correcta:", 
            opts: ["La intensidad del color azul es proporcional a la concentraci√≥n de prote√≠nas", "Es un m√©todo cuantitativo de √°cidos nucleicos", "El reactivo de Folin-Ciocalteu se oxida al generar el color azul", "Las reacciones del m√©todo requieren un medio √°cido", "Se utiliza Fe¬≥‚Å∫ para desplegar la prote√≠na"], 
            a: "La intensidad del color azul es proporcional a la concentraci√≥n de prote√≠nas", 
            exp: "Sigue la ley de Lambert-Beer: a m√°s prote√≠na, m√°s reducci√≥n de Folin, m√°s color azul (750nm)." 
        },
        { 
            q: "21. Para el aislamiento de √°cidos nucleicos, se√±ale qu√© producto se usa para solubilizar membranas y desnaturalizar prote√≠nas:", 
            opts: ["Dodecilsulfato s√≥dico (SDS)", "Cloroformo", "Fenol tamponado", "Etanol absoluto a -30 ¬∫C", "Alcohol isoam√≠lico"], 
            a: "Dodecilsulfato s√≥dico (SDS)", 
            exp: "El SDS es un detergente fuerte que rompe la bicapa lip√≠dica y desnaturaliza las prote√≠nas que protegen el ADN." 
        },
        { 
            q: "22. En la t√©cnica de western blotting, ¬øqu√© afirmaci√≥n NO es correcta?", 
            opts: ["Se bloquea la membrana con SDS para evitar uniones inespec√≠ficas", "Se separan previamente las prote√≠nas mediante SDS-PAGE", "Las prote√≠nas se transfieren desde el gel a una membrana", "Se utilizan anticuerpos primarios espec√≠ficos para la prote√≠na diana", "Los anticuerpos secundarios permiten visualizar la prote√≠na mediante se√±al"], 
            a: "Se bloquea la membrana con SDS para evitar uniones inespec√≠ficas", 
            exp: "Falso. El bloqueo se hace con prote√≠nas inertes (leche descremada, BSA), NO con SDS (que lavar√≠a las prote√≠nas pegadas)." 
        }
    ];

    // --- ASIGNAR IDs √öNICOS ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px; color:#64748b;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // Checkbox Marcar
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) markedQuestions.add(item.id);
                else markedQuestions.delete(item.id);
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";
            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);

            // Pregunta
            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;
            
            // --- INSERCI√ìN DE DIAGRAMAS ---
            if (item.id === 0 || item.id === 15) { // Isoton√≠a / Hemat√≠es
                questionText.innerHTML += `<span class='img-tag'>

[Image of isotonic hypotonic hypertonic red blood cells]
</span>`;
            } else if (item.id === 6 || item.id === 21) { // Western Blot / SDS-PAGE
                questionText.innerHTML += `<span class='img-tag'>

[Image of Western Blotting workflow]
</span>`;
            } else if (item.id === 3) { // Centrifugaci√≥n
                questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 2) { // Mercaptoetanol
                questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 13) { // Edman
                questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 17) { // ADN Precipitaci√≥n
                questionText.innerHTML += `<span class='img-tag'></span>`;
            }

            card.appendChild(questionText);

            // Opciones
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Explicaci√≥n:</strong> ${item.exp}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        failedQuestions.add(item.id);
                        
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) b.classList.add('correct');
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- Control Final ---
    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        if (mode === 'all') subset = quizData;
        else if (mode === 'marked') subset = quizData.filter(q => markedQuestions.has(q.id));
        else if (mode === 'failed') subset = quizData.filter(q => failedQuestions.has(q.id));
        else if (mode === 'failed_marked') subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));

        if(mode !== 'all') failedQuestions.clear(); 
        else {
            failedQuestions.clear();
            markedQuestions.clear();
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>
