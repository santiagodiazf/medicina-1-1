<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Física Bloque 4 (301-400)</title>
    <style>
        :root {
            --primary: #e65100; /* Orange Dark */
            --secondary: #ffe0b2;
            --accent: #f57c00;
            --success: #388e3c;
            --error: #d32f2f;
            --text: #3e2723;
            --bg-color: #fff3e0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding-top: 110px;
            padding-bottom: 60px;
        }

        /* HEADER FIJO */
        #header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #bf360c, #e65100);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
        }

        .header-content {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 1.4rem; font-weight: 700; letter-spacing: 0.5px; }
        
        .score-board {
            background: rgba(0,0,0,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* PROGRESS BAR */
        #progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.2);
            margin-top: 10px;
        }
        #progress-fill {
            height: 100%;
            background: #ffcc80;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* CONTAINER */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* CARD */
        .card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 6px solid transparent;
            transition: transform 0.2s;
        }

        .card:hover { transform: translateY(-2px); }
        .card.correct { border-left-color: var(--success); }
        .card.incorrect { border-left-color: var(--error); }

        .question-header {
            font-size: 0.85rem;
            color: #d84315;
            text-transform: uppercase;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #263238;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* OPTIONS */
        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #ffe0b2;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--accent);
            background-color: #fff3e0;
        }

        .option-btn.correct {
            background-color: #e8f5e9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #ffebee;
            border-color: var(--error);
            color: #b71c1c;
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* FEEDBACK */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff8e1;
            border-radius: 6px;
            border: 1px solid #ffcc80;
            color: #e65100;
            font-size: 0.95rem;
            display: none;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* RESET BUTTON */
        .btn-reset {
            display: block;
            width: 200px;
            margin: 40px auto;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(230, 81, 0, 0.3);
        }
        .btn-reset:hover { background: #bf360c; }

    </style>
</head>
<body>

    <div id="header-bar">
        <div class="header-content">
            <h1>Física Bloque 4 (301-400)</h1>
            <div class="score-board">
                <span id="score">0</span> / <span id="total">0</span>
            </div>
        </div>
        <div id="progress-container">
            <div id="progress-fill"></div>
        </div>
    </div>

    <div class="container" id="quiz-container">
    </div>

    <div class="container">
        <button class="btn-reset" onclick="location.reload()">Reiniciar Test</button>
    </div>

    <script>
        // BASE DE DATOS LIMPIA Y CORREGIDA (301-400)
        const questionsDB = [
            {id: "301", q: "La transmisión del impulso nervioso tiene su base en:", opts: {a:"Diferentes concentraciones de iones a ambos lados", b:"...", c:"...", d:"..."}, ans: "a", note: "Gradientes iónicos transmembrana."},
            {id: "302", q: "Si la variación de energía potencial que experimenta un ion al salir de la célula es positiva:", opts: {a:"El ion tiene tendencia a salir si el ion es positivo", b:"El ion tiene tendencia a entrar si el ion es positivo", c:"...", d:"..."}, ans: "b", note: "Si la variación de energía es positiva (ΔE > 0), el proceso NO es espontáneo, por lo que la tendencia es la contraria (entrar)."},
            {id: "303", q: "Si la variación de energía potencial que experimenta un ion al salir de la célula es negativa:", opts: {a:"El ion tiene tendencia a salir si el ion es positivo", b:"...", c:"...", d:"..."}, ans: "a", note: "Si ΔE < 0, el proceso es espontáneo, por lo que tiende a salir."},
            {id: "304", q: "En el estado de reposo existe una diferencia de potencial de unos 90mV (o -90mV), estando:", opts: {a:"...", b:"El interior cargado negativamente respecto del exterior", c:"...", d:"..."}, ans: "b", note: "Potencial de reposo negativo interior."},
            {id: "305", q: "Distribución de iones sodio:", opts: {a:"...", b:"...", c:"...", d:"La a y la c"}, ans: "d", note: "El Na+ tiende a ENTRAR tanto por gradiente químico (concentración) como eléctrico (potencial)."},
            {id: "306", q: "Transporte activo (Bomba Na/K):", opts: {a:"...", b:"Se extrae Na+ y se introduce K+", c:"...", d:"..."}, ans: "b", note: "Saca 3 Na+ e introduce 2 K+."},
            {id: "307", q: "Potencial de acción:", opts: {a:"...", b:"...", c:"...", d:"Los cambios del potencial de membrana como consecuencia de un estímulo"}, ans: "d", note: "Despolarización transitoria."},
            {id: "308", q: "En células excitables, cuando llega un estímulo:", opts: {a:"...", b:"...", c:"Se producen variaciones en la permeabilidad de la membrana", d:"..."}, ans: "c", note: "Apertura de canales iónicos."},
            {id: "309", q: "Mantenimiento de diferencia de concentraciones:", opts: {a:"...", b:"...", c:"Bombeo activo de sodio", d:"Las tres anteriores"}, ans: "c", note: "La bomba Na+/K+ mantiene los gradientes contra difusión."},
            {id: "310", q: "Tendencia de iones a entrar/salir:", opts: {a:"...", b:"...", c:"...", d:"La a y la b"}, ans: "d", note: "Depende del potencial electroquímico (membrana vs equilibrio)."},
            {id: "311", q: "Variación de tensión tras sobrepasar umbral:", opts: {a:"...", b:"...", c:"...", d:"Potencial de acción"}, ans: "d", note: "Respuesta todo o nada."},
            {id: "312", q: "Periodo refractario absoluto:", opts: {a:"...", b:"...", c:"...", d:"No se puede iniciar el impulso de acción"}, ans: "d", note: "Canales de Na+ inactivados."},
            {id: "313", q: "Periodo refractario relativo:", opts: {a:"Superior al normal", b:"...", c:"...", d:"..."}, ans: "a", note: "Requiere un estímulo mayor (umbral elevado)."},
            {id: "314", q: "Incremento energía positivo al salir ion negativo:", opts: {a:"...", b:"...", c:"El ion tendrá tendencia a entrar en la misma", d:"..."}, ans: "c", note: "Si ΔE > 0, no sale espontáneamente -> Tiende a entrar."},
            {id: "315", q: "Información potencial acción modulada en:", opts: {a:"...", b:"...", c:"...", d:"Modulada en frecuencia"}, ans: "d", note: "La intensidad del estímulo se codifica en frecuencia de disparos."},
            {id: "316", q: "Facilidad propagación impulso:", opts: {a:"...", b:"...", c:"...", d:"La a y la b"}, ans: "d", note: "Depende de resistencia (movilidad) y capacitancia (cantidad carga)."},
            {id: "317", q: "Receptor tónico (adaptación lenta):", opts: {a:"...", b:"...", c:"También se hace estacionario (mantiene respuesta)", d:"..."}, ans: "c", note: "Mantiene el potencial generador mientras dura el estímulo."},
            {id: "318", q: "Receptor fásico (adaptación rápida):", opts: {a:"Desaparece aunque el estímulo permanezca", b:"...", c:"...", d:"..."}, ans: "a", note: "Solo responde a cambios, se adapta y cesa la respuesta."},
            {id: "319", q: "Permeabilidad Na+ tras umbral:", opts: {a:"...", b:"Depende del propio potencial (Feedback positivo)", c:"...", d:"..."}, ans: "b", note: "Ciclo de Hodgkin-Huxley: Despolarización abre más canales Na+."},
            {id: "320", q: "Diferencia potencial actual y estacionario (local):", opts: {a:"...", b:"...", c:"Generador", d:"..."}, ans: "c", note: "Potencial local graduado en el receptor."},
            {id: "321", q: "Potencial generador vs acción:", opts: {a:"...", b:"...", c:"...", d:"Las tres anteriores"}, ans: "d", note: "Local, graduado, no propagado sin decremento."},
            {id: "322", q: "Permeabilidad Na+ tras umbral:", opts: {a:"...", b:"Depende del propio potencial", c:"...", d:"..."}, ans: "b", note: "Repetida (pregunta 319)."},
            {id: "323", q: "Velocidad propagación depende de:", opts: {a:"...", b:"...", c:"...", d:"La a y la b"}, ans: "d", note: "Repetida (pregunta 316)."},
            {id: "324", q: "Aumento diámetro axón:", opts: {a:"...", b:"Aumento de velocidad", c:"...", d:"..."}, ans: "b", note: "Menor resistencia axial -> Mayor velocidad."},
            {id: "325", q: "Frecuencia repetición pulsos:", opts: {a:"...", b:"...", c:"...", d:"Potencial generador"}, ans: "d", note: "La amplitud del generador determina la frecuencia de los PA."},
            {id: "326", q: "Variación tensión tras umbral:", opts: {a:"...", b:"...", c:"Potencial de acción", d:"..."}, ans: "c", note: "Repetida (pregunta 311)."},
            {id: "327", q: "Información modulada en:", opts: {a:"...", b:"...", c:"...", d:"Modulada en frecuencia"}, ans: "d", note: "Repetida (pregunta 315)."},
            {id: "328", q: "Sin estímulo (Reposo), corrientes Na/K:", opts: {a:"...", b:"...", c:"Iguales (y opuestas)", d:"..."}, ans: "c", note: "Estado estacionario: flujo neto cero (Bomba compensa fugas)."},
            {id: "329", q: "Iones cloro:", opts: {a:"...", b:"...", c:"...", d:"La a y la b"}, ans: "d", note: "Fuerzas opuestas (químico entra, eléctrico sale)."},
            {id: "330", q: "Inicio sístole ventricular:", opts: {a:"...", b:"...", c:"...", d:"Al final de la onda R (pico R/inicio S)"}, ans: "d", note: "Contracción isovolumétrica comienza tras el pico R."},
            {id: "331", q: "Contracción ventricular:", opts: {a:"...", b:"Desde el inicio de QRS hasta el final de la onda T", c:"...", d:"..."}, ans: "b", note: "Sístole eléctrica QT."},
            {id: "332", q: "Electromiografía:", opts: {a:"...", b:"...", c:"...", d:"Músculo"}, ans: "d", note: "Actividad eléctrica muscular."},
            {id: "333", q: "Potencial ECG superficie:", opts: {a:"...", b:"...", c:"La proyección del vector dipolo eléctrico en una dirección determinada", d:"..."}, ans: "c", note: "Fundamento de las derivaciones."},
            {id: "334", q: "Complejo QRS:", opts: {a:"...", b:"...", c:"El inicio de la contracción ventricular", d:"..."}, ans: "c", note: "Despolarización -> Contracción."},
            {id: "335", q: "Onda P:", opts: {a:"El inicio de la contracción auricular", b:"...", c:"...", d:"..."}, ans: "a", note: "Despolarización auricular -> Contracción."},
            {id: "336", q: "Onda P:", opts: {a:"Despolarización auricular", b:"...", c:"...", d:"..."}, ans: "a", note: "Evento eléctrico."},
            {id: "337", q: "Ritmo cerebral atención (Alerta):", opts: {a:"...", b:"Beta", c:"...", d:"..."}, ans: "b", note: "Ondas rápidas (>13 Hz)."},
            {id: "338", q: "Electrocardiógrafo es:", opts: {a:"Un galvanómetro", b:"...", c:"...", d:"..."}, ans: "a", note: "Mide diferencias de potencial (voltímetro sensible)."},
            {id: "339", q: "No se coloca electrodo:", opts: {a:"...", b:"...", c:"En el tobillo derecho (Sí, neutro)", d:"En el tobillo izquierdo"}, ans: "c", note: "El tobillo derecho es tierra (neutro), no activo en derivaciones bipolares, aunque se coloca físicamente."},
            {id: "340", q: "Derivación III:", opts: {a:"...", b:"...", c:"Brazo izquierdo y pierna izquierda", d:"..."}, ans: "c", note: "III = PI - BI (L-F)."},
            {id: "341", q: "Velocidad estándar ECG:", opts: {a:"...", b:"...", c:"25 mm/s", d:"..."}, ans: "c", note: "Estándar clínico."},
            {id: "342", q: "Onda primaria positiva (P):", opts: {a:"La difusión del estímulo eléctrico desde del nódulo del seno auricular hasta la total excitación auricular", b:"...", c:"...", d:"..."}, ans: "a", note: "Despolarización auricular."},
            {id: "343", q: "Ritmo Alfa (relajación):", opts: {a:"8, 12 Hz", b:"...", c:"...", d:"..."}, ans: "a", note: "Vigilia relajada con ojos cerrados."},
            {id: "344", q: "Intensidad EEG:", opts: {a:"...", b:"Microvoltios", c:"...", d:"..."}, ans: "b", note: "Señales muy débiles (uV)."},
            {id: "345", q: "Electrodos EMG:", opts: {a:"...", b:"...", c:"...", d:"Aguja coaxial"}, ans: "d", note: "Para unidades motoras profundas."},
            {id: "346", q: "Aumento frecuencia descarga:", opts: {a:"...", b:"Reclutación temporal", c:"...", d:"..."}, ans: "b", note: "Sumación temporal vs Espacial (número fibras)."},
            {id: "347", q: "Frecuencia EMG:", opts: {a:"...", b:"Está en la gama de los sonidos audibles (audiofrecuencia 20Hz-20kHz)", c:"...", d:"..."}, ans: "b", note: "Se puede 'escuchar' en el electromiógrafo."},
            {id: "348", q: "Objetivo campo B0 RM:", opts: {a:"...", b:"Que los spines se orienten en relación al campo", c:"...", d:"..."}, ans: "b", note: "Magnetización neta."},
            {id: "349", q: "Objetivo pulso RF RM:", opts: {a:"...", b:"...", c:"Generar un pulso de excitación (resonancia)", d:"..."}, ans: "c", note: "Perturbación."},
            {id: "350", q: "Pulso RF:", opts: {a:"...", b:"...", c:"...", d:"a y b"}, ans: "d", note: "Abate Mz y crea Mxy."},
            {id: "351", q: "Bobina receptora:", opts: {a:"...", b:"...", c:"...", d:"Detectar una señal de relajación"}, ans: "d", note: "Inducción."},
            {id: "352", q: "Constante giromagnética:", opts: {a:"...", b:"...", c:"...", d:"a y c (o b y c? q/m es correcto)"}, ans: "d", note: "Gamma = q/2m (aprox) y Larmor w=gamma*B."},
            {id: "353", q: "Núcleos RM:", opts: {a:"...", b:"...", c:"Número impar de nucleones", d:"..."}, ans: "c", note: "Espín neto."},
            {id: "354", q: "NO RM:", opts: {a:"...", b:"16 O (Par/Par)", c:"...", d:"..."}, ans: "b", note: "Espín cero."},
            {id: "355", q: "Fenómeno RM:", opts: {a:"...", b:"...", c:"El vector J será distinto a 0", d:"a y c"}, ans: "d", note: "Momento angular intrínseco (Espín)."},
            {id: "356", q: "Vector J bajo campo:", opts: {a:"...", b:"...", c:"Realiza movimiento de precesión", d:"a y c"}, ans: "d", note: "Orientación cuantizada y precesión."},
            {id: "357", q: "T1 vs T2:", opts: {a:"T1 mayor que T2", b:"...", c:"...", d:"..."}, ans: "a", note: "T1 (s) > T2 (ms) siempre en tejidos biológicos."},
            {id: "358", q: "Ceder energía al medio:", opts: {a:"Relajación longitudinal (Spin-Red)", b:"...", c:"...", d:"..."}, ans: "a", note: "Interacción con la red (Lattice)."},
            {id: "359", q: "Frecuencia Larmor depende de:", opts: {a:"...", b:"...", c:"La intensidad del campo magnético", d:"..."}, ans: "c", note: "Proporcional a B0."},
            {id: "360", q: "Tiempo Eco (TE):", opts: {a:"...", b:"...", c:"...", d:"Tiempo tras el pulso en que se capta la señal"}, ans: "d", note: "Momento de lectura."},
            {id: "361", q: "T1 recuperación:", opts: {a:"...", b:"El 63%", c:"...", d:"..."}, ans: "b", note: "Constante de tiempo exponencial (1-1/e)."},
            {id: "362", q: "T2 decaimiento:", opts: {a:"...", b:"...", c:"...", d:"El 37% (1/e)"}, ans: "d", note: "Caída al 37% del valor inicial."},
            {id: "363", q: "T2 depende de:", opts: {a:"La perdida de coherencia de fase (desfase)", b:"...", c:"...", d:"..."}, ans: "a", note: "Interacciones spin-spin."},
            {id: "364", q: "Bobina misión:", opts: {a:"...", b:"...", c:"...", d:"a y b sucesivamente"}, ans: "d", note: "Emite y luego escucha."},
            {id: "365", q: "Contraindicación RM:", opts: {a:"Portar marcapasos", b:"...", c:"...", d:"..."}, ans: "a", note: "Riesgo vital por campo magnético."},
            {id: "366", q: "Contraste RM:", opts: {a:"...", b:"Gadolinio DTPA", c:"...", d:"..."}, ans: "b", note: "Paramagnético."},
            {id: "367", q: "Vasos (Sangre flujo):", opts: {a:"...", b:"Con ausencia de señal (Flow void)", c:"...", d:"..."}, ans: "b", note: "La sangre se mueve y sale del corte antes de devolver el eco."},
            {id: "368", q: "Grasa:", opts: {a:"...", b:"Blanca en T1 y gris en T2 (T1 hiperintenso)", c:"...", d:"..."}, ans: "b", note: "Grasa brilla en T1."},
            {id: "369", q: "Hueso cortical/Calcio:", opts: {a:"...", b:"...", c:"...", d:"Negro en T1 y T2 (Hipointenso, vacío señal)"}, ans: "d", note: "Hueso cortical carece de protones móviles."},
            {id: "370", q: "Agua/Líquidos:", opts: {a:"...", b:"Negro/gris oscuro en T1, blanco en T2", c:"...", d:"..."}, ans: "b", note: "LCR o Edema: Hipointenso T1, Hiperintenso T2."},
            {id: "371", q: "NO ventaja RM:", opts: {a:"...", b:"...", c:"...", d:"La economía de sus instalaciones"}, ans: "d", note: "Es muy costosa."},
            {id: "372", q: "Inversión postural:", opts: {a:"...", b:"...", c:"...", d:"Una translación del centro de gravedad y una alineación tridimensional vertebral"}, ans: "d", note: "Repetida."},
            {id: "373", q: "Isotónico:", opts: {a:"Varía la longitud del músculo sin variar la tensión muscular", b:"...", c:"...", d:"..."}, ans: "a", note: "Repetida."},
            {id: "374", q: "Bastón:", opts: {a:"...", b:"...", c:"Reducir la fuerza muscular sobre la cadera de la pierna sana", d:"..."}, ans: "c", note: "Repetida."},
            {id: "375", q: "Suspensoterapia:", opts: {a:"...", b:"...", c:"...", d:"Elimina la gravedad y los rozamientos"}, ans: "d", note: "Repetida."},
            {id: "376", q: "Límite de ruptura:", opts: {a:"...", b:"...", c:"En general es distinto según se trate de compresión o tracción", d:"..."}, ans: "c", note: "Hueso es anisótropo."},
            {id: "377", q: "Huesos huecos:", opts: {a:"Menos peso a igual resistencia", b:"...", c:"...", d:"..."}, ans: "a", note: "Eficiencia estructural."},
            {id: "378", q: "Menos deformable:", opts: {a:"Su modulo de Young es alto", b:"...", c:"...", d:"..."}, ans: "a", note: "Young = Rigidez."},
            {id: "379", q: "Módulo Young expresa:", opts: {a:"La capacidad de elasticidad (Rigidez) de un cuerpo", b:"...", c:"...", d:"..."}, ans: "a", note: "Pendiente curva esfuerzo-deformación."},
            {id: "380", q: "Módulo Young:", opts: {a:"...", b:"...", c:"Es una característica del material", d:"..."}, ans: "c", note: "Propiedad intrínseca."},
            {id: "381", q: "Menor deformación flexión:", opts: {a:"Mayor E", b:"Menor momento", c:"Mayor Inercia (I)", d:"Todas las anteriores"}, ans: "d", note: "Flecha inversa a E*I."},
            {id: "382", q: "Huesos constituidos de:", opts: {a:"...", b:"...", c:"...", d:"Material compuesto de apatito y colágeno"}, ans: "d", note: "Composite natural."},
            {id: "383", q: "Huesos mayor resistencia a:", opts: {a:"Compresión", b:"Flexión", c:"Tracción", d:"..."}, ans: "a", note: "Mejor a compresión."},
            {id: "384", q: "Materiales elásticos:", opts: {a:"...", b:"Recuperan su forma original cuando se les deja de aplicar una fuerza"}, ans: "b", note: "Reversibilidad."},
            {id: "385", q: "Momento de inercia (I) depende de:", opts: {a:"...", b:"...", c:"...", d:"De su geometría (distribución masa)"}, ans: "d", note: "Forma sección transversal."},
            {id: "386", q: "Músculos elastómeros:", opts: {a:"La a y la b", b:"Cumple Hooke (No)", c:"...", d:"Se deforman elásticamente (pero no lineal)"}, ans: "d", note: "Gran deformación elástica no lineal."},
            {id: "387", q: "Isométrica:", opts: {a:"...", b:"...", c:"...", d:"El músculo realiza una fuerza pero este no sufre deformación (longitud cte)"}, ans: "d", note: "Repetida."},
            {id: "388", q: "NO función huesos:", opts: {a:"Nutrición (Hematopoyesis sí, pero función principal mecánica)", b:"...", c:"Flexibilidad y elasticidad corporal", d:"..."}, ans: "c", note: "La flexibilidad es articular/muscular. Hueso es rígido."},
            {id: "389", q: "Huesos material:", opts: {a:"...", b:"...", c:"Compuesto", d:"..."}, ans: "c", note: "Matriz orgánica + inorgánica."},
            {id: "390", q: "Bastón:", opts: {a:"Reducir la fuerza muscular sobre la cadera de la pierna sana", b:"...", c:"...", d:"..."}, ans: "a", note: "Repetida."},
            {id: "391", q: "Pandeo aparece en:", opts: {a:"Compresión", b:"...", c:"...", d:"..."}, ans: "a", note: "Inestabilidad columnas."},
            {id: "392", q: "Mayor módulo Young:", opts: {a:"Menos deformable es el material", b:"...", c:"...", d:"..."}, ans: "a", note: "Más rígido."},
            {id: "393", q: "Fibra central flexión:", opts: {a:"...", b:"Fibra neutra", c:"...", d:"..."}, ans: "b", note: "Sin tensión."},
            {id: "394", q: "Isotónico:", opts: {a:"...", b:"...", c:"Varía la longitud conservando la tensión (aproximadamente)", d:"..."}, ans: "c", note: "Tensión constante."},
            {id: "395", q: "Fluido ideal estrechamiento:", opts: {a:"...", b:"...", c:"Aumenta su velocidad y disminuye su presión", d:"..."}, ans: "c", note: "Repetida (Bernoulli)."},
            {id: "396", q: "Velocidad disminuye A->B:", opts: {a:"Necesariamente el diámetro del tubo ha aumentado en B respecto a A", b:"...", c:"...", d:"..."}, ans: "a", note: "Repetida (Continuidad)."},
            {id: "397", q: "Continuidad sangre:", opts: {a:"...", b:"Se puede aplicar en promedio", c:"...", d:"..."}, ans: "b", note: "Repetida."},
            {id: "398", q: "Resistencia viscosa:", opts: {a:"...", b:"Crece al aumentar la longitud y decrece al aumentar el radio", c:"...", d:"..."}, ans: "b", note: "Repetida."},
            {id: "399", q: "Turbulencia B (estrecha) vs A (ancha):", opts: {a:"...", b:"En la parte B (estrecha)", c:"...", d:"..."}, ans: "b", note: "V aumenta en estrechamiento -> Reynolds aumenta -> Turbulencia probable."},
            {id: "400", q: "Sangre órganos:", opts: {a:"...", b:"...", c:"Aumenta radio de vasos periféricos", d:"..."}, ans: "c", note: "Vasodilatación aumenta radio -> Disminuye resistencia -> Aumenta flujo."}
        ];

        // LÓGICA DEL SIMULADOR
        const quizContainer = document.getElementById('quiz-container');
        const scoreSpan = document.getElementById('score');
        const totalSpan = document.getElementById('total');
        const progressFill = document.getElementById('progress-fill');
        
        let score = 0;
        let answeredCount = 0;

        function renderQuiz() {
            totalSpan.textContent = questionsDB.length;

            questionsDB.forEach((q) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.id = `q-${q.id}`;

                const header = document.createElement('div');
                header.className = 'question-header';
                header.textContent = `Pregunta ${q.id}`;
                card.appendChild(header);

                const text = document.createElement('div');
                text.className = 'question-text';
                text.textContent = q.q;
                card.appendChild(text);

                const grid = document.createElement('div');
                grid.className = 'options-grid';

                for (const [key, value] of Object.entries(q.opts)) {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `<strong>${key.toUpperCase()})</strong> ${value}`;
                    btn.onclick = () => checkAnswer(q, key, btn, card, grid);
                    grid.appendChild(btn);
                }
                card.appendChild(grid);

                const feedback = document.createElement('div');
                feedback.className = 'feedback';
                feedback.innerHTML = `<strong>Respuesta Correcta: ${q.ans.toUpperCase()}</strong><br>${q.note}`;
                card.appendChild(feedback);

                quizContainer.appendChild(card);
            });
        }

        function checkAnswer(question, selected, btn, card, grid) {
            if (card.dataset.answered) return;
            card.dataset.answered = 'true';
            answeredCount++;

            const allBtns = grid.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.classList.add('disabled'));

            if (selected === question.ans) {
                score++;
                btn.classList.add('correct');
                card.classList.add('correct');
            } else {
                btn.classList.add('incorrect');
                card.classList.add('incorrect');
                allBtns.forEach(b => {
                    if (b.innerText.startsWith(question.ans.toUpperCase() + ')')) {
                        b.classList.add('correct');
                    }
                });
            }

            card.querySelector('.feedback').style.display = 'block';
            scoreSpan.textContent = score;
            const progress = (answeredCount / questionsDB.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        renderQuiz();

    </script>
</body>
</html>