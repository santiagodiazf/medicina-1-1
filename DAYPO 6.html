<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bloque VI: Metabolismo de Gl√∫cidos</title>
    <style>
        :root {
            --primary: #0ea5e9; /* Azul Cyan Intenso */
            --primary-dark: #0369a1;
            --primary-light: #e0f2fe;
            --bg: #f0f9ff;
            --text: #0c4a6e;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary-dark);
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            display: inline-block;
            width: 100%;
        }

        .question-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .question-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* --- Checkbox para Marcar --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid #bae6fd;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #0284c7;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #0c4a6e;
            line-height: 1.5;
        }

        /* Etiquetas para diagramas */
        .img-tag {
            display: block;
            margin-top: 12px;
            padding: 10px;
            background-color: #f0f9ff;
            border-left: 4px solid #38bdf8;
            color: #0284c7;
            font-size: 0.9em;
            font-style: italic;
            border-radius: 0 4px 4px 0;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #374151;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary-dark);
            padding-left: 25px; /* Efecto desplazamiento */
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #064e3b !important;
            font-weight: 600;
        }

        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        /* Caja de Explicaci√≥n */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #e0f2fe;
            border-left: 5px solid var(--primary);
            border-radius: 6px;
            display: none;
            font-size: 0.95em;
            color: #075985;
            animation: slideDown 0.3s ease-out;
        }
        .explanation.visible {
            display: block;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- √Årea de Controles --- */
        #controls-area {
            margin-top: 50px;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary);
        }

        .action-btn {
            background: var(--primary); color: white; border: none;
            padding: 12px 25px; font-size: 1.05em; border-radius: 8px;
            cursor: pointer; margin: 8px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .action-btn:hover { 
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-options button {
            width: 100%;
            background: #4b5563;
        }
        .restart-options button:hover { background: #1f2937; }
        .restart-options button:first-child { background: var(--primary); }

    </style>
</head>
<body>

    <h1>Bloque VI: Metabolismo de Gl√∫cidos</h1>
    <div style="text-align: center; color: #0369a1; margin-bottom: 30px;">
        Santi D√≠az | Gluc√≥lisis, Gluconeog√©nesis, Gluc√≥geno y Pentosas
    </div>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>Resultados de la sesi√≥n</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer todo el test</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Repasar marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Repasar falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Falladas + Marcadas</button>
        </div>
    </div>

<script>
    const quizData = [
        { 
            q: "En funci√≥n de su complejidad, la mol√©cula de piruvato puede ser clasificada como:", 
            opts: ["Un precursor", "Una unidad estructural", "Una macromol√©cula", "Una supramol√©cula", "Un intermediario metab√≥lico"], 
            a: "Un intermediario metab√≥lico", 
            exp: "Es una mol√©cula peque√±a de 3 carbonos, punto de cruce central en el metabolismo." 
        },
        { 
            q: "Cu√°l de estos receptores genera AMPc en la v√≠a de transducci√≥n de se√±ales mediada por ellos:", 
            opts: ["Receptor de insulina", "Receptor para factores de crecimiento", "Receptores acoplados a canales i√≥nicos", "Receptor acoplado a prote√≠na G (GPCR)", "Receptores nucleares/citopl√°smicos"], 
            a: "Receptor acoplado a prote√≠na G (GPCR)", 
            exp: "Los GPCRs activan la Adenilato Ciclasa (v√≠a Gs) produciendo AMPc." 
        },
        { 
            q: "En el metabolismo intermediario:", 
            opts: ["Las reacciones de nivel 2 conducen a la formaci√≥n de piruvato y acetil-CoA", "El ciclo de Krebs constituye la principal ruta de nivel 3 en los organismos aerobios", "El ATP se obtiene a partir de la fosforilaci√≥n oxidativa/fosforilaci√≥n acoplada a sustrato", "Todas son verdaderas", "Todas son falsas"], 
            a: "Todas son verdaderas", 
            exp: "Describe correctamente la estructura del catabolismo en tres fases." 
        },
        { 
            q: "En una dieta rica en gl√∫cidos y pobre en grasas, ¬øqu√© procesos metab√≥licos tendr√°n lugar?", 
            opts: ["Glucogenolisis, gluconeog√©nesis y lipog√©nesis", "Glucolisis, cetog√©nesis y lipog√©nesis", "Glucogenog√©nesis, lipog√©nesis y cetolisis", "Glucogenog√©nesis, glucolisis y lipog√©nesis", "Son ciertas A y C"], 
            a: "Glucogenog√©nesis, glucolisis y lipog√©nesis", 
            exp: "El exceso de glucosa se almacena (gluc√≥geno) o se oxida (gluc√≥lisis) para sintetizar grasas (lipog√©nesis)." 
        },
        { 
            q: "En una dieta pobre en gl√∫cidos y rica en grasas, ¬øqu√© procesos metab√≥licos tendr√°n lugar?", 
            opts: ["Glucogenolisis, gluconeog√©nesis y lipolisis", "Glucolisis, cetog√©nesis y lipog√©nesis", "Glucogenog√©nesis, lipog√©nesis y cetolisis", "Glucogenog√©nesis, glucolisis y lipog√©nesis", "Son ciertas B y C"], 
            a: "Glucogenolisis, gluconeog√©nesis y lipolisis", 
            exp: "El cuerpo moviliza reservas (lip√≥lisis) y fabrica glucosa para el cerebro (gluconeog√©nesis)." 
        },
        { 
            q: "Esta f√≥rmula corresponde a un metabolito intermedio de la glucolisis: (Gliceraldeh√≠do-3-P)", 
            opts: ["Gliceraldeh√≠do-3-fosfato", "Fosfato de dihidroxiacetona", "3-fosfoglicerato", "Alfa-glicerofosfato", "Fosfoenolpiruvato"], 
            a: "Gliceraldeh√≠do-3-fosfato", 
            exp: "Es la triosa con grupo aldeh√≠do." 
        },
        { 
            q: "Cu√°l de estas lanzaderas act√∫a mayoritariamente en el m√∫sculo cardiaco permitiendo el paso de equivalentes redox de la glucolisis hacia la mitocondria:", 
            opts: ["Lanzadera de aspartato-malato", "Lanzadera de alfa-glicerofosfato", "Lanzadera de citrato-malato", "Lanzadera de carnitina", "Ninguna"], 
            a: "Lanzadera de aspartato-malato", 
            exp: "Es la m√°s eficiente (genera 2.5 ATP por NADH) y predomina en coraz√≥n e h√≠gado." 
        },
        { 
            q: "La principal finalidad de la v√≠a de las pentosas fosfato es:", 
            opts: ["Formar NADPH", "Obtener ribosa 5-fosfato", "Oxidar a la glucosa", "Son ciertas A y B", "Todas son ciertas"], 
            a: "Son ciertas A y B", 
            exp: "Provee poder reductor (NADPH) para bios√≠ntesis y Ribosa-5P para nucle√≥tidos." 
        },
        { 
            q: "En la gluconeog√©nesis, la fructosa 1,6 bifosfatasa se activa por:", 
            opts: ["Aumento de insulina", "Aumento de AMP", "Aumento de fructosa 2,6 bifosfato", "Niveles de citrato", "Todas son ciertas"], 
            a: "Niveles de citrato", 
            exp: "El citrato indica alta energ√≠a y precursores, activando la gluconeog√©nesis y frenando la gluc√≥lisis." 
        },
        { 
            q: "En per√≠odo de ayuno, ¬øqu√© enzimas ver√°n disminuidas su actividad en el h√≠gado?", 
            opts: ["Adenilato ciclasa", "Prote√≠n quinasa A", "Fosfofructoquinasa 2", "Fructosa 1,6 bifosfatasa", "Piruvato carboxilasa"], 
            a: "Fosfofructoquinasa 2", 
            exp: "El glucag√≥n fosforila la enzima bifuncional, inhibiendo su actividad quinasa (PFK-2), lo que baja la F-2,6-BP." 
        },
        { 
            q: "La fructosa 1,6 bifosfato activa a la enzima:", 
            opts: ["Piruvato quinasa", "Piruvato carboxilasa", "Fosfoenolpiruvato carboxiquinasa", "Son ciertas B y C", "Todas son falsas"], 
            a: "Piruvato quinasa", 
            exp: "Es una activaci√≥n por 'feed-forward' (hacia adelante) para asegurar que la gluc√≥lisis fluya." 
        },
        { 
            q: "Tras la ingesta, la insulina favorecer√°:", 
            opts: ["La fosforilaci√≥n de la fosfofructoquinasa 1", "La actividad fosfofructoquinasa de la enzima bifuncional (Al desfosforilarla)", "La actividad fructosa-2,6-bifosfatasa de la enzima bifuncional", "La conversi√≥n de fructosa 2,6 bifosfato a fructosa 6 fosfato", "Son ciertas C y D"], 
            a: "La actividad fosfofructoquinasa de la enzima bifuncional (Al desfosforilarla)", 
            exp: "La insulina activa la fosfatasa que desfosforila la enzima bifuncional, activando PFK-2 y aumentando F-2,6-BP." 
        },
        { 
            q: "Indique qu√© pasos son irreversibles en la gluconeog√©nesis:", 
            opts: ["Glucosa 6 fosfato a glucosa (A)", "Fructosa 1,6 bifosfato a fructosa 6 fosfato (B)", "3-fosfoglicerato a 1,3-bifosfoglicerato (C)", "3-fosfoglicerato a 2-fosfoglicerato (D)", "Son ciertas A y B"], 
            a: "Son ciertas A y B", 
            exp: "Son los pasos de rodeo de las quinasas irreversibles de la gluc√≥lisis (Hexoquinasa y PFK1)." 
        },
        { 
            q: "Entre los siguientes sustratos, ¬øcu√°les ser√≠an sustratos gluconeog√©nicos?", 
            opts: ["Gliceroaldeh√≠do 3 fosfato", "Glicerol (B)", "Acetil-CoA", "Alanina (D)", "Son ciertas B y D"], 
            a: "Son ciertas B y D", 
            exp: "El glicerol y la alanina (amino√°cidos) pueden convertirse en glucosa. El Acetil-CoA NO puede en animales." 
        },
        { 
            q: "¬øCu√°l de las siguientes reacciones constituye un paso de la gluconeog√©nesis?", 
            opts: ["Œ±‚àícetoglutarato + aspartato ‚Üî glutamato + oxalacetato", "Piruvato + ATP + CO2 ‚Üî oxalacetato + ADP + Pi", "Acetil-CoA + oxalacetato + H2O ‚Üî citrato + CoA", "Degradaci√≥n de leucina", "Degradaci√≥n de lisina"], 
            a: "Piruvato + ATP + CO2 ‚Üî oxalacetato + ADP + Pi", 
            exp: "Reacci√≥n de la Piruvato Carboxilasa, primer paso para convertir piruvato en glucosa." 
        },
        { 
            q: "Por cada mol√©cula de glucosa que se oxida se pueden obtener:", 
            opts: ["Alrededor de 100 ATP en la glucolisis aerobia", "8 ATP en la glucolisis anaerobia", "4 ATP en la glucolisis anaerobia", "Alrededor de 30-32 ATP en la glucolisis aerobia", "Ninguna es cierta"], 
            a: "Alrededor de 30-32 ATP en la glucolisis aerobia", 
            exp: "Dependiendo de la lanzadera usada (30 o 32 ATP)." 
        },
        { 
            q: "El ciclo de Rapoport-Luebering:", 
            opts: ["Tiene lugar en el hepatocito", "Tiene lugar en el hemat√≠e", "Transforma el 1,3 bifosfoglicerato en 2,3 bifosfoglicerato", "Son ciertas A y C", "Son ciertas B y C"], 
            a: "Son ciertas B y C", 
            exp: "Exclusivo de eritrocitos, genera 2,3-BPG para regular la afinidad de la hemoglobina." 
        },
        { 
            q: "¬øEn qu√© pasos de la glucolisis se lleva a cabo la fosforilaci√≥n a nivel de sustrato?", 
            opts: ["Glucosa a glucosa 6 fosfato", "Fructosa 6 fosfato a fructosa 1,6 bifosfato", "Gliceroaldeh√≠do 3 fosfato a fosfato de dihidroxiacetona", "1-3 bifosfoglicerato a 3 fosfoglicerato", "3-fosfoglicerato a 2 fosfoglicerato"], 
            a: "1-3 bifosfoglicerato a 3 fosfoglicerato", 
            exp: "La fosfoglicerato quinasa transfiere el fosfato de alta energ√≠a al ADP para formar ATP." 
        },
        { 
            q: "En la degradaci√≥n del gluc√≥geno, la enzima regulable de la v√≠a:", 
            opts: ["Es la gluc√≥geno sintasa y no est√° fosforilada", "Es la gluc√≥geno fosforilasa y est√° fosforilada", "Es la gluc√≥geno sintasa y est√° fosforilada", "Es la gluc√≥geno fosforilasa y no est√° fosforilada", "Es la gluc√≥geno sintasa y est√° activada por el glucag√≥n"], 
            a: "Es la gluc√≥geno fosforilasa y est√° fosforilada", 
            exp: "La fosforilasa 'a' (activa) est√° fosforilada por acci√≥n de la cascada del glucag√≥n/adrenalina." 
        },
        { 
            q: "La enzima que transfiere residuos de glucosa al pol√≠mero de gluc√≥geno es la:", 
            opts: ["Gluc√≥geno transferasa", "Gluc√≥geno fosforilasa", "Gluc√≥geno sintasa", "Gluc√≥geno fosfatasa", "Glucogenina sintetasa"], 
            a: "Gluc√≥geno sintasa", 
            exp: "Crea enlaces alfa-1,4." 
        },
        { 
            q: "En la formaci√≥n de gluc√≥geno requiere la presencia de:", 
            opts: ["CTP", "AMP", "UMP", "UTP", "CDP"], 
            a: "UTP", 
            exp: "Se necesita UTP para formar UDP-Glucosa, el sustrato activado." 
        },
        { 
            q: "La absorci√≥n de glucosa a nivel intestinal se realiza mediante:", 
            opts: ["Difusi√≥n simple", "Cotransporte junto con i√≥n K+", "Antiporte con i√≥n Na+", "Simporte con i√≥n Na+", "Son ciertas A y C"], 
            a: "Simporte con i√≥n Na+", 
            exp: "A trav√©s del transportador SGLT1." 
        },
        { 
            q: "La siguiente reacci√≥n est√° implicada en un sistema de lanzadera de NADH(H+). ¬øDe qu√© lanzadera se trata? (Oxalacetato <-> Malato)", 
            opts: ["Lanzadera de aspartato-malato", "Lanzadera de Œ±-glicerofosfato", "Lanzadera de citrato-malato", "Lanzadera de carnitina", "Lanzadera de aspartato-glutamato"], 
            a: "Lanzadera de aspartato-malato", 
            exp: "El oxalacetato se reduce a malato para entrar a la mitocondria." 
        },
        { 
            q: "En la fase reversible de las pentosas fosfato se genera:", 
            opts: ["Glicerol-3-fosfato y glucosa-6-fosfato", "Gliceraldehido-3-P y fructosa-6-P", "Œ± -glicerofosfato y fructosa-6-fosfato", "La pentosa gastada", "Intermediarios del ciclo de Krebs"], 
            a: "Gliceraldehido-3-P y fructosa-6-P", 
            exp: "Se recuperan intermediarios glucol√≠ticos (Fructosa-6P y Gliceraldeh√≠do-3P)." 
        },
        { 
            q: "En el metabolismo del gluc√≥geno la insulina:", 
            opts: ["Inhibe la PP1 al activar a su inhibidor por fosforilaci√≥n", "Inhibe a la fosforilasa por fosforilaci√≥n", "Activa la cascada de quinasa de la fosforilasa", "Activa a la gluc√≥geno sintasa hep√°tica al desfosforilarla", "Promueve la degradaci√≥n del gluc√≥geno muscular"], 
            a: "Activa a la gluc√≥geno sintasa hep√°tica al desfosforilarla", 
            exp: "La insulina activa la fosfatasa PP1, que desfosforila la sintasa (activ√°ndola) y la fosforilasa (inhibi√©ndola)." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es incorrecta respecto al ciclo de Cori:", 
            opts: ["Se produce tras prote√≥lisis muscular y liberaci√≥n de alanina a sangre", "Utiliza el producto del metabolismo muscular de la glucosa en anaerobiosis", "Se libera lactato muscular a sangre", "En h√≠gado el lactato se convierte en piruvato", "Se trata de una v√≠a gluconeog√©nica"], 
            a: "Se produce tras prote√≥lisis muscular y liberaci√≥n de alanina a sangre", 
            exp: "Falso. La liberaci√≥n de Alanina corresponde al Ciclo de Cahill (Glucosa-Alanina), no al de Cori (Glucosa-Lactato)." 
        },
        { 
            q: "El Acetil-CoA es requerido para la s√≠ntesis de estos compuestos. Qu√© respuesta es incorrecta:", 
            opts: ["Malonil-CoA", "Dimetilalilpirofosfato", "HMG-CoA", "Citrato", "Piruvato"], 
            a: "Piruvato", 
            exp: "El Piruvato es el precursor del Acetil-CoA, no al rev√©s (la reacci√≥n PDH es irreversible)." 
        },
        { 
            q: "En la transducci√≥n de se√±al de la insulina mediada por PKB, la PI3K es:", 
            opts: ["Un receptor de la tiros√≠nquinasa dim√©rico", "Una quinasa del fosfatidilinositol-difosfato (Fosforila PIP2 a PIP3)", "Una quinasa de la PKB", "Una quinasa de la PDK", "Una fosfatasa de la PP1"], 
            a: "Una quinasa del fosfatidilinositol-difosfato (Fosforila PIP2 a PIP3)", 
            exp: "PI3K fosforila el l√≠pido de membrana PIP2 para crear el sitio de anclaje PIP3." 
        },
        { 
            q: "Respecto al regulador alost√©rico F-2,6-BP qu√© es incorrecto:", 
            opts: ["Es un activador de la fosfofructoquinasa 1, lo que promueve la gluconeog√©nesis", "Se sintetiza cuando los niveles de glucosa son altos", "Act√∫a a nivel hep√°tico", "Su s√≠ntesis es promovida por insulina", "Es producto de la enzima bifuncional cuando √©sta act√∫a en modo quinasa"], 
            a: "Es un activador de la fosfofructoquinasa 1, lo que promueve la gluconeog√©nesis", 
            exp: "Incorrecto: Activa PFK1 promoviendo la GLUC√ìLISIS e inhibe la gluconeog√©nesis." 
        },
        { 
            q: "Qu√© asociaci√≥n entre enzima -> v√≠a metab√≥lica es incorrecta:", 
            opts: ["Glucoquinasa->glucolisis", "Fructosa-1,6-bifosfatasa->gluconeog√©nesis", "Piruvato quinasa->glucolisis", "Piruvato carboxilasa->gluconeog√©nesis", "Piruvato descarboxilasa->glucolisis"], 
            a: "Piruvato descarboxilasa->glucolisis", 
            exp: "La Piruvato Descarboxilasa es una enzima de la fermentaci√≥n alcoh√≥lica (levaduras), no de la gluc√≥lisis humana (que usa PDH)." 
        },
        { 
            q: "Se√±ala la respuesta incorrecta respecto al metabolismo del gluc√≥geno:", 
            opts: ["El gluc√≥geno hep√°tico mantiene la concentraci√≥n de glucosa en sangre", "El producto de la v√≠a fosforil√≠tica de la glucogenolisis es glucosa-1-P", "La gluc√≥geno fosforilasa muscular es sensible a los niveles de glucosa", "La gluc√≥geno sintasa cataliza la formaci√≥n de enlaces Œ±1->4 utilizando UDP-glucosa", "Una acci√≥n de la enzima desramificante es la hidrolisis de enlaces glucos√≠dicos Œ±1->6"], 
            a: "La gluc√≥geno fosforilasa muscular es sensible a los niveles de glucosa", 
            exp: "El m√∫sculo no libera glucosa a la sangre ni tiene sensor de glucosa en su fosforilasa (el h√≠gado s√≠)." 
        },
        { 
            q: "Cu√°l de estas enzimas se inhibe ante la bajada del pH celular:", 
            opts: ["Gluc√≥geno fosforilasa muscular", "Piruvato deshidrogenasa", "Fosfoenolpiruvato carboxiquinasa", "Piruvato quinasa", "Fosfofructoquinasa 1 muscular"], 
            a: "Fosfofructoquinasa 1 muscular", 
            exp: "Mecanismo de protecci√≥n para evitar la acidosis l√°ctica excesiva por gluc√≥lisis anaerobia." 
        },
        { 
            q: "Cu√°l de estas asociaciones es incorrecta (M:m√∫sculo; H: h√≠gado; A: tejido adiposo).", 
            opts: ["Glucag√≥n ->cetog√©nesis-> H", "Adrenalina-> glucogenolisis -> H y M", "Glucag√≥n ->gluconeog√©nesis-> H y M", "Insulina ->captaci√≥n de glucosa-> M y A", "Insulina -> s√≠ntesis de gluc√≥geno -> H y M"], 
            a: "Glucag√≥n ->gluconeog√©nesis-> H y M", 
            exp: "El m√∫sculo NO realiza gluconeog√©nesis (carece de receptores de glucag√≥n y enzimas clave)." 
        },
        { 
            q: "La glucoquinasa tiene importancia ya que cataliza la fosforilaci√≥n:", 
            opts: ["De la glucosa en el ayuno", "De la fructosa en el ayuno", "De la glucosa en la hiperglucemia alimenticia (Km alta)", "De la glucosa cuando falta hexoquinasa", "De la glucosa en la diabetes no tratada"], 
            a: "De la glucosa en la hiperglucemia alimenticia (Km alta)", 
            exp: "Al tener alta Km, solo act√∫a eficazmente cuando la glucemia es alta (post-prandial)." 
        },
        { 
            q: "En que v√≠a metab√≥lica de la glucosa participa la enzima fosfoenol pir√∫vico carboxiquinasa (PEPCK):", 
            opts: ["Glucogenolisis", "Neoglucog√©nesis", "Glucogenog√©nesis", "Gluc√≥lisis", "Ciclo de Rappoport-Luebering"], 
            a: "Neoglucog√©nesis", 
            exp: "Cataliza el paso de Oxalacetato a PEP, gastando GTP." 
        },
        { 
            q: "El piruvato entra en la gluconeog√©nesis:", 
            opts: ["En el citosol transform√°ndose en fosfoenol piruvato directamente", "Carboxil√°ndose en la mitocondria a Oxalacetato", "Oxid√°ndose en la mitocondria a acetil-CoA", "Transform√°ndose en malato en el citosol", "Carboxil√°ndose en la mitocondria"], 
            a: "Carboxil√°ndose en la mitocondria", 
            exp: "Mediante la Piruvato Carboxilasa (mitocondrial)." 
        },
        { 
            q: "En la formaci√≥n de glucosa a partir de piruvato se necesita (Gasto energ√©tico):", 
            opts: ["8 ATP", "6 ATP (4 ATP + 2 GTP)", "4 ATP", "2 ATP", "10 ATP"], 
            a: "6 ATP (4 ATP + 2 GTP)", 
            exp: "Para sintetizar 1 glucosa desde 2 piruvatos se gastan 6 enlaces de alta energ√≠a." 
        },
        { 
            q: "El oxalacetato para atravesar la membrana mitocondrial debe transformarse en:", 
            opts: ["Piruvato", "Malato", "Lactato", "Malonato", "Ninguna es cierta"], 
            a: "Malato", 
            exp: "No existe transportador de oxalacetato; usa la lanzadera de malato." 
        },
        { 
            q: "La enzima piruvato carboxilasa es esencial para:", 
            opts: ["Oxidaci√≥n del piruvato", "Formaci√≥n del lactato", "Iniciar la gluconeog√©nesis (y anaplerosis)", "Transformar lactato en piruvato", "Transformar fosfoenolpiruvato a piruvato"], 
            a: "Iniciar la gluconeog√©nesis (y anaplerosis)", 
            exp: "Genera oxalacetato para gluconeog√©nesis o para rellenar el ciclo de Krebs." 
        },
        { 
            q: "¬øPor qu√© se forma lactato en la gluc√≥lisis anaerobia?", 
            opts: ["Para oxidar al piruvato", "Para regenerar al NAD+ e impedir el bloqueo de la gluc√≥lisis", "Para oxidar el NADH produciendo en la oxidaci√≥n del gliceroaldeh√≠do 3 fosfato", "Son ciertas B y C", "Son ciertas A y C"], 
            a: "Para regenerar al NAD+ e impedir el bloqueo de la gluc√≥lisis", 
            exp: "Sin NAD+, la GAPDH se detendr√≠a y la gluc√≥lisis parar√≠a." 
        },
        { 
            q: "En la v√≠a de las pentosas fosfato, las deshidrogenadas requieren:", 
            opts: ["FMN", "FAD", "NADP+", "NAD+", "TPP"], 
            a: "NADP+", 
            exp: "G6PDH y 6-fosfogluconato deshidrogenasa usan NADP+ para formar NADPH." 
        },
        { 
            q: "La enzima que cataliza la reacci√≥n entre el gliceroaldeh√≠do 3 fosfato y la seudoheptulosa 7 fosfato es:", 
            opts: ["Transaminasa", "Transcetolasa", "Transaldolasa", "Epomerasa", "Transfosforilasa"], 
            a: "Transaldolasa", 
            exp: "Transfiere un grupo de 3 carbonos." 
        },
        { 
            q: "En la s√≠ntesis de gluc√≥geno adem√°s de la gluc√≥geno-sintasa interviene la ‚Äúenzima ramificante‚Äù. ¬øCu√°l es √©sta?", 
            opts: ["Alfa-glucan-1,4-1,4-glucosiltransferasa", "Alfa-glucan-1,4-1,6-glucosiltransferasa", "Alfa-glucan-1,4-1,3-glucosiltransferasa", "1,6-glucosidasa", "Fosforilasa"], 
            a: "Alfa-glucan-1,4-1,6-glucosiltransferasa", 
            exp: "Crea los puntos de ramificaci√≥n alfa-1,6." 
        },
        { 
            q: "Por degradaci√≥n completa de una mol√©cula de gluc√≥geno se obtiene:", 
            opts: ["Glucosa-6-fosfato", "S√≥lo glucosa", "Glucosa-1-fosfato y en menor proporci√≥n glucosa", "Glucosa-1-fosfato, glucosa-6-fosfato y glucosa", "Glucosa-6-fosfato y glucosa"], 
            a: "Glucosa-1-fosfato y en menor proporci√≥n glucosa", 
            exp: "G1P de las ramas lineales (fosforilasa) y Glucosa libre de los puntos de ramificaci√≥n (desramificante)." 
        },
        { 
            q: "La insulina act√∫a como hipoglucemiante ya que:", 
            opts: ["Favorece la entrada de glucosa en las c√©lulas no hep√°ticas", "Favorece la entrada de glucosa en las c√©lulas hep√°ticas", "Favorece la glucogenog√©nesis", "A y C son ciertas", "B y C son ciertas"], 
            a: "A y C son ciertas", 
            exp: "Activa GLUT4 en m√∫sculo/grasa y almacenamiento de gluc√≥geno." 
        },
        { 
            q: "La entrada de glucosa en las c√©lulas del cerebro viene determinada por:", 
            opts: ["La presencia de adenilato ciclasa en la membrana de las c√©lulas", "El gradiente de concentraci√≥n de glucosa entre sangre y citoplasma celular", "Por acci√≥n del glucag√≥n", "La concentraci√≥n sangu√≠nea de insulina", "Ninguna de las anteriores"], 
            a: "El gradiente de concentraci√≥n de glucosa entre sangre y citoplasma celular", 
            exp: "Usa GLUT1/3, que son independientes de insulina y funcionan por gradiente." 
        },
        { 
            q: "¬øCual de los siguientes √≥rganos que se citan no necesitan la presencia de insulina para la captaci√≥n de la glucosa?", 
            opts: ["Eritrocito", "Hip√≥fisis", "Adiposo", "Coraz√≥n", "Leucocitos"], 
            a: "Eritrocito", 
            exp: "Usa GLUT1, independiente de insulina (Adiposo y Coraz√≥n usan GLUT4, dependiente)." 
        },
        { 
            q: "El h√≠gado puede liberar glucosa a la sangre y el m√∫sculo no. Esto es debido a que:", 
            opts: ["El h√≠gado posee glucosa-6-fosfatasa y el m√∫sculo no", "El m√∫sculo presenta glucosa-6-fosfatasa", "El h√≠gado carece de glucosa-6-fosfatasa", "La membrana de la c√©lula muscular es libremente permeable a la glucosa", "Ninguna es cierta"], 
            a: "El h√≠gado posee glucosa-6-fosfatasa y el m√∫sculo no", 
            exp: "Sin G6Pasa, el m√∫sculo no puede desfosforilar la glucosa para que salga de la c√©lula." 
        },
        { 
            q: "Indica qu√© afirmaci√≥n es incorrecta en relaci√≥n a la glucokinasa (Tipo IV/hexoquinasa D):", 
            opts: ["Tiene una Km mayor que otras hexoquinasas", "Muestra inhibici√≥n por la glucosa 6P", "Es una relaci√≥n de tipo transferasa", "Se encuentra en h√≠gado y p√°ncreas", "Su s√≠ntesis es inducida por insulina"], 
            a: "Muestra inhibici√≥n por la glucosa 6P", 
            exp: "A diferencia de las hexoquinasas I-III, la GK hep√°tica NO se inhibe por su producto G6P." 
        },
        { 
            q: "En relaci√≥n a las ingestas excesivas de etanol, indica qu√© afirmaci√≥n es incorrecta:", 
            opts: ["Inhiben la malato deshidrogenasa del TCA lo que produce depleci√≥n del oxalacetato", "Aumentan el estr√©s oxidativo", "Producen un exceso de NADH", "Disminuyen la s√≠ntesis de lactato por la lactato deshidrogenasa"], 
            a: "Disminuyen la s√≠ntesis de lactato por la lactato deshidrogenasa", 
            exp: "Falso. El exceso de NADH favorece la conversi√≥n de Piruvato a Lactato, causando acidosis l√°ctica." 
        },
        { 
            q: "¬øCu√°l de las siguientes reacciones es exclusiva de la gluconeog√©nesis?", 
            opts: ["Lactato a piruvato", "Oxalacetato a fosfoenolpiruvato", "1,3-bifosfoglicerato a 3-fosfoglicerato", "Fosfoenolpiruvato a piruvato", "Ninguna es cierta"], 
            a: "Oxalacetato a fosfoenolpiruvato", 
            exp: "Reacci√≥n de la PEPCK." 
        },
        { 
            q: "La ruta glucol√≠tica en las c√©lulas se encuentra localizada en:", 
            opts: ["Citosol", "Ribosomas", "Ret√≠culo endopl√°smico", "Mitocondrias", "N√∫cleo"], 
            a: "Citosol", 
            exp: "Todas las enzimas glucol√≠ticas son citos√≥licas." 
        },
        { 
            q: "Tras un desayuno abundante, todas las afirmaciones abajo indicadas son esperables, excepto una de ellas. Identifica cu√°l es:", 
            opts: ["Actividad incrementada de la acetil CoA carboxilasa", "Aumento de la glucogenolisis", "Actividad reducida de la piruvato carboxilasa", "Actividad reducida de la fosfoenol piruvato carboxiquinasa", "Aumento de la s√≠ntesis de gluc√≥geno"], 
            a: "Aumento de la glucogenolisis", 
            exp: "Tras comer (insulina alta), la glucogen√≥lisis se INHIBE, no aumenta." 
        },
        { 
            q: "Identifica la afirmaci√≥n incorrecta en relaci√≥n al metabolismo energ√©tico en humanos:", 
            opts: ["El ATP se puede formar en ausencia de ox√≠geno", "El eritrocito no puede formar oxalacetato para formar malato procedente de citrato", "No tiene efectos sobre el transporte de ox√≠geno en sangre", "Afecta a los niveles de gluc√≥geno almacenado", "El ciclo de Rapoport-Luebering es exclusivo de eritrocitos"], 
            a: "No tiene efectos sobre el transporte de ox√≠geno en sangre", 
            exp: "El metabolismo glucol√≠tico en eritrocitos genera 2,3-BPG que S√ç afecta al transporte de ox√≠geno." 
        },
        { 
            q: "En la transducci√≥n de se√±al celular de la insulina mediada por PKB no interviene:", 
            opts: ["IRS-1", "Receptor tiros√≠n kinasa dim√©rico", "Fosfolipasa C", "PI3K", "PDK"], 
            a: "Fosfolipasa C", 
            exp: "PLC es t√≠pica de receptores Gq, no de la v√≠a principal de la insulina (IRS/PI3K/PKB)." 
        },
        { 
            q: "Cual de las siguientes afirmaciones es correcta respecto a PKA:", 
            opts: ["Es una tiros√≠n kinasa", "Se activa por fosforilaci√≥n", "Se activa por insulina", "Se activa por niveles intracelulares de AMPc", "Desfosforila a las enzimas del metabolismo intermediario"], 
            a: "Se activa por niveles intracelulares de AMPc", 
            exp: "PKA (Protein Kinase A) es dependiente de AMPc." 
        }
    ];

    // --- ASIGNAR IDs √öNICOS ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px; color:#6b7280;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // Checkbox Marcar
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) markedQuestions.add(item.id);
                else markedQuestions.delete(item.id);
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";
            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);

            // Pregunta
            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;

            // --- INSERCI√ìN DE DIAGRAMAS ---
            if (item.id === 5) { // Gluc√≥lisis
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 12) { // Gluconeog√©nesis bypass
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 28) { // Ciclo de Cori/Cahill
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 30) { // Se√±alizaci√≥n Insulina
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 19) { // Gluc√≥geno s√≠ntesis
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 49) { // Pentosas Fosfato
                 questionText.innerHTML += `<span class='img-tag'>

[Image of pentose phosphate pathway oxidative phase]
</span>`;
            }

            card.appendChild(questionText);

            // Opciones
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Explicaci√≥n:</strong> ${item.exp}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        failedQuestions.add(item.id);
                        
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) b.classList.add('correct');
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- Control Final ---
    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        if (mode === 'all') subset = quizData;
        else if (mode === 'marked') subset = quizData.filter(q => markedQuestions.has(q.id));
        else if (mode === 'failed') subset = quizData.filter(q => failedQuestions.has(q.id));
        else if (mode === 'failed_marked') subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));

        if(mode !== 'all') failedQuestions.clear(); 
        else {
            failedQuestions.clear();
            markedQuestions.clear();
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>
