<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizz Biología Celular y Molecular (201-300)</title>
    <style>
        :root {
            --primary: #2c3e50; --secondary: #3498db; --success: #27ae60;
            --danger: #e74c3c; --light: #f4f7f6; --marked: #f1c40f;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--light); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 1.5rem; }
        
        /* Índice de navegación */
        .index-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); gap: 5px; margin-bottom: 25px; padding: 15px; background: #eee; border-radius: 8px; max-height: 200px; overflow-y: auto; }
        .index-item { height: 35px; display: flex; align-items: center; justify-content: center; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; font-size: 0.8rem; transition: 0.2s; }
        .index-item.active { border: 2px solid var(--primary); background: #d6eaf8; font-weight: bold; }
        .index-item.correct { background: var(--success); color: white; border-color: #1e8449; }
        .index-item.wrong { background: var(--danger); color: white; border-color: #943126; }
        .index-item.is-marked { background: var(--marked) !important; color: black; border: 2px solid #d4ac0d; }

        /* Preguntas */
        .question-card { display: none; border: 2px solid #f0f0f0; padding: 20px; border-radius: 10px; }
        .question-card.active { display: block; animation: fadeIn 0.3s; }
        .question-text { font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; color: var(--primary); }
        
        .options { list-style: none; padding: 0; }
        .option-item { padding: 12px; margin: 10px 0; background: #fff; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: 0.2s; }
        .option-item:hover { background: #f1f8ff; border-color: var(--secondary); }
        .option-item.correct { background: #d4edda !important; border-color: #28a745; color: #155724; font-weight: bold; pointer-events: none; }
        .option-item.wrong { background: #f8d7da !important; border-color: #dc3545; color: #721c24; pointer-events: none; }
        .option-item.disabled { pointer-events: none; opacity: 0.6; }

        .explanation { margin-top: 20px; padding: 15px; background: #eaf4ff; border-left: 5px solid var(--secondary); display: none; font-size: 0.95rem; border-radius: 0 8px 8px 0; }
        
        .controls { display: flex; justify-content: space-between; margin-top: 25px; gap: 10px; }
        button { padding: 12px; border: none; border-radius: 6px; cursor: pointer; background: var(--secondary); color: white; font-weight: bold; flex: 1; transition: 0.3s; }
        button:disabled { background: #ccc; }
        .mark-btn { background: var(--marked); color: #333; }

        #results-screen { display: none; text-align: center; }
        .score-display { font-size: 4rem; font-weight: bold; color: var(--primary); margin: 20px 0; }
        .retry-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 30px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>Cuestionario de Biología Celular: Preguntas 201 - 300</h1>
    
    <div id="quiz-ui">
        <div class="index-container" id="index-nav"></div>
        <div id="questions-container"></div>
        
        <div class="controls">
            <button id="prev-btn" onclick="move(-1)">Anterior</button>
            <button class="mark-btn" id="mark-toggle" onclick="toggleMark()">Marcar Pregunta</button>
            <button id="next-btn" onclick="move(1)">Siguiente</button>
        </div>
    </div>

    <div id="results-screen">
        <h2>Resultados Finales</h2>
        <div class="score-display" id="score-text">0 / 100</div>
        <div class="retry-options">
            <button onclick="restart('all')">Realizar Completo</button>
            <button onclick="restart('failed')" style="background:var(--danger)">Solo Falladas</button>
            <button onclick="restart('marked')" style="background:var(--marked); color:black">Solo Marcadas</button>
            <button onclick="restart('failed_marked')" style="background:var(--primary)">Falladas + Marcadas</button>
        </div>
    </div>
</div>

<script>
const quizData = [
    {q:"201. ¿Cuál es el mecanismo por el cual el sitio activo de una enzima ayuda a reducir la energía de activación?", a:["Orientando los sustratos para favorecer una reacción entre ellos.","Alterando la forma del sustrato para imitar la conformación del estado de transición.","Acelerando la reacción para que el equilibrio se alcance antes.","Uniéndose irreversiblemente al sustrato."], c:1, e:"Las enzimas estabilizan el estado de transición, que es la configuración de mayor energía."},
    {q:"202. Las proteínas que actúan como 'andamios' estructurales suelen ser:", a:["Proteínas motoras.","Enzimas metabólicas.","Proteínas fibrosas.","Receptores de superficie."], c:2, e:"Proteínas como el colágeno o la queratina dan soporte y estructura mecánica."},
    {q:"203. Un polipéptido migra más rápido en un gel SDS-PAGE si:", a:["Se une a otra proteína con carga positiva.","Se rompen sus puentes disulfuro con DTT.","Mantiene sus puentes disulfuro (lo que lo mantiene plegado y compacto).","Se aumenta el pH del tampón."], c:2, e:"Si se mantiene compacto, encuentra menos resistencia al pasar por los poros del gel de poliacrilamida."},
    {q:"204. ¿Dónde se localiza típicamente el sitio de unión de un ligando en la estructura proteica?", a:["En la superficie lisa de la proteína.","Dentro de una cavidad en la superficie de la proteína.","Enterrado en el interior profundo e hidrófobo.","Solo aparece tras la desnaturalización."], c:1, e:"La especificidad requiere una cavidad o grieta que permita múltiples enlaces no covalentes."},
    {q:"205. ¿Qué tipo de interacciones son más importantes para proporcionar la unión específica de 'guante a mano' del cAMP a su receptor?", a:["Enlaces de hidrógeno.","Interacciones electrostáticas.","Fuerzas de van der Waals.","Interacciones hidrofóbicas."], c:0, e:"Los puentes de hidrógeno permiten una orientación y especificidad química muy precisas."},
    {q:"206. ¿En qué clasificación de enzimas entra la lisozima?", a:["Isomerasa.","Proteasa.","Nucleasa.","Hidrolasa."], c:3, e:"La lisozima hidroliza los polisacáridos de las paredes celulares bacterianas."},
    {q:"207. ¿Qué molécula pequeña se une estrechamente a la hemoglobina para ayudarla a transportar oxígeno?", a:["Retinal.","Biotina.","Zinc.","Hemo."], c:3, e:"El grupo hemo contiene el átomo de hierro necesario para unir reversiblemente el O2."},
    {q:"208. ¿Cuál de las siguientes afirmaciones sobre la alostería es verdadera?", a:["Los reguladores alostéricos suelen ser productos de otras reacciones en la misma vía.","La regulación alostérica siempre es negativa.","Solo las enzimas sufren regulación alostérica.","El sitio alostérico es idéntico al sitio activo."], c:0, e:"Muchos inhibidores alostéricos son productos finales que regulan su propia vía (feed-back)."},
    {q:"209. ¿Qué duplicará la Vmax de una reacción enzimática?", a:["Añadir menos inhibidor competitivo.","Añadir ATP para dar más energía.","Duplicar el número de moléculas de enzima.","Añadir el doble de sustrato."], c:2, e:"La Vmax es proporcional a la concentración de enzima presente."},
    {q:"210. Una mutación en el gen Ras que contribuye al cáncer suele:", a:["Impedir que Ras se fabrique.","Aumentar la afinidad de Ras por el GDP.","Disminuir la afinidad de Ras por el GTP.","Disminuir la tasa de hidrólisis de GTP por Ras."], c:3, e:"Al no poder hidrolizar el GTP, Ras queda bloqueado en su forma activa, enviando señales de crecimiento continuas."},
    {q:"211. ¿Qué mecanismo asegura el movimiento unidireccional de una proteína motora?", a:["Un cambio conformacional acoplado a la liberación de fosfato (Pi).","La polaridad del sustrato sobre el que se mueve.","Un cambio conformacional acoplado a la unión de ADP.","Un cambio conformacional acoplado a la hidrólisis de ATP."], c:3, e:"La hidrólisis de ATP hace que el cambio conformacional sea irreversible termodinámicamente."},
    {q:"212. La adición de ubicuitina a una proteína suele dar como resultado:", a:["Su asociación a la membrana.","La degradación de la proteína.","La secreción de la proteína.","Su translocación nuclear."], c:1, e:"La poliubicuitinación marca a las proteínas para ser destruidas en el proteasoma."},
    {q:"213. El estudio a gran escala de todas las proteínas expresadas se llama:", a:["Proteómica.","Biología estructural.","Genómica.","Bioinformática."], c:0, e:"La proteómica estudia el proteoma (totalidad de proteínas)."},
    {q:"214. ¿Qué característica de los cromosomas mitóticos refleja cómo fueron nombrados?", a:["Su movimiento.","Su color (al teñirse con tintes).","Su forma.","Su localización."], c:1, e:"Chromos (color) y soma (cuerpo). Se tiñen intensamente con colorantes básicos."},
    {q:"215. ¿Qué constituye el esqueleto (backbone) del ADN?", a:["Azúcar-base.","Fosfato-fosfato.","Azúcar-fosfato.","Fosfato-base."], c:2, e:"Cadenas alternas de desoxirribosa y grupos fosfato."},
    {q:"216. ¿Qué enlace mantiene unidos los nucleótidos en una sola cadena de ADN?", a:["Enlace de hidrógeno.","Enlace fosfodiéster.","Interacción iónica.","Enlace peptídico."], c:1, e:"Enlace covalente entre el 3'-OH de un azúcar y el 5'-fosfato del siguiente."},
    {q:"217. ¿Qué grupo funcional se encuentra en el extremo 5' del ADN?", a:["Hidroxilo.","Hidronio.","Fosfato (fosforilo).","Carboxilo."], c:2, e:"El extremo 5' libre tiene un grupo fosfato unido al carbono 5 de la pentosa."},
    {q:"218. El ADN sirve como molde (template) para fabricar:", a:["Lípidos.","ARN.","Polisacáridos.","Colesterol."], c:1, e:"Proceso conocido como transcripción."},
    {q:"219. Número total de cromosomas en células somáticas humanas:", a:["22.","23.","44.","46."], c:3, e:"23 pares de cromosomas (2n = 46)."},
    {q:"220. ¿Qué NO se respondería mediante un cariotipo convencional?", a:["¿Es hombre o mujer?","¿Contienen piezas de otros cromosomas?","¿Tiene un cromosoma extra?","¿Contienen mutaciones puntuales?"], c:3, e:"El cariotipo ve macroestructuras, no cambios de una sola base (mutación puntual)."},
    {q:"221. Los cromosomas en interfase:", a:["Están menos densamente empaquetados que en mitosis.","Comparten el territorio con su homólogo.","Están restringidos al nucleolo.","Están completamente enredados."], c:0, e:"La cromatina está expandida para permitir la transcripción."},
    {q:"222. ¿Qué NO es necesario para la transmisión adecuada en eucariotas?", a:["Regiones codificantes de proteínas.","Orígenes de replicación.","Telómeros.","Centrómeros."], c:0, e:"Se pueden transmitir fragmentos de ADN sin genes (ADN basura) si tienen origen, telómero y centrómero."},
    {q:"223. El nucleolo es el sitio de:", a:["Síntesis de proteínas.","Replicación de ADN.","Síntesis de ARN ribosómico.","Degradación de proteínas."], c:2, e:"Allí se sintetizan los ARNr y se ensamblan las subunidades ribosomales."},
    {q:"224. Los cromosomas mitóticos son aproximadamente _______ veces más compactos que el ADN extendido.", a:["10.000.","1.000.","100.","500."], c:0, e:"La compactación extrema facilita la segregación sin roturas."},
    {q:"225. En 'cuentas de un collar', ¿qué componente NO se retiene?", a:["Histonas de unión (H1).","ADN de unión (linker DNA).","Partícula central del nucleosoma.","Histonas del núcleo."], c:0, e:"La histona H1 induce el empaquetado de fibra de 30nm; no está en la forma más extendida."},
    {q:"226. Unidad básica de la estructura del cromosoma eucariota:", a:["Cromatina.","Nucleosoma.","Nucleótido.","Centrosoma."], c:1, e:"El ADN enrollado en el octámero de histonas."},
    {q:"227. ¿Cuántas veces se enrolla el ADN en un nucleosoma?", a:["1.0.","2.5.","1.7.","3.0."], c:2, e:"Aproximadamente 1.7 vueltas (147 pares de bases)."},
    {q:"228. ¿Qué histona NO forma parte del núcleo del nucleosoma?", a:["H2A.","H2B.","H3.","H1."], c:3, e:"H1 es la histona de unión, externa al octámero."},
    {q:"229. Los complejos de remodelación de la cromatina:", a:["Reclutan polimerasa.","Modifican colas N-terminales.","Usan ATP para mover nucleosomas.","Degradan histonas."], c:2, e:"Deslizan los nucleosomas para exponer secuencias de ADN."},
    {q:"230. Forma más condensada de cromatina en interfase:", a:["Eucromatina.","Heterocromatina.","Fibra de 30 nm.","Cromatina activa."], c:1, e:"Zona densa y generalmente inactiva transcripcionalmente."},
    {q:"231. Modificación de histonas que conduce al silenciamiento:", a:["Metilación de la lisina 9 en H3.","Acetilación de la lisina 9.","Metilación de la lisina 4.","Fosforilación de serinas."], c:0, e:"La metilación en H3K9 es una marca clásica de heterocromatina."},
    {q:"232. Grupo químico NO común en colas de histonas:", a:["Metilo.","Sulfhidrilo.","Fosforilo.","Acetilo."], c:1, e:"Los grupos tiol (-SH) no son marcas epigenéticas estándar."},
    {q:"233. En los 40, no se creía que el ADN fuera el material genético porque:", a:["Alta carga negativa.","Demasiado simple (4 bloques).","Estaba solo en citoplasma.","Muy inestable."], c:1, e:"Se pensaba que las proteínas, con 20 aminoácidos, eran más capaces de portar información."},
    {q:"234. Hershey y Chase marcaron el ADN con:", a:["3H.","14C.","35S.","32P."], c:3, e:"El Fósforo-32 marca el ADN porque este tiene fosfatos; el Azufre-35 marca proteínas."},
    {q:"235. La replicación del ADN es semiconservadora porque:", a:["La hélice original queda intacta.","Cada hija tiene dos hebras nuevas.","Cada hija tiene una parental y una nueva.","Solo se copia la mitad."], c:2, e:"Experimento de Meselson-Stahl."},
    {q:"236. Los orígenes de replicación son ricos en:", a:["G-C.","G-T.","C-A.","A-T."], c:3, e:"Los pares A-T tienen solo 2 puentes de hidrógeno, son más fáciles de abrir."},
    {q:"237. ¿Cuántas horquillas de replicación se forman al abrir un origen?", a:["Una.","Dos.","Tres.","Cuatro."], c:1, e:"La replicación es bidireccional."},
    {q:"238. La ADN polimerasa une nucleótidos al extremo:", a:["5' fosfato.","3' hidroxilo (OH).","2' hidroxilo.","Nitrogenado."], c:1, e:"Siempre crece en dirección 5' -> 3'."},
    {q:"239. ¿Qué proporciona energía para la polimerización del ADN?", a:["ATP citosólico.","Hidrólisis de pirofosfato (PPi).","Helicasa.","Gradiente protones."], c:1, e:"La ruptura de los enlaces fosfato del nucleótido entrante (dNTP)."},
    {q:"240. Función principal de la primasa:", a:["Sellar nicks.","Sintetizar cebador de ARN.","Desenrollar hélice.","Corregir errores."], c:1, e:"La polimerasa necesita un extremo 3'-OH previo para empezar."},
    {q:"241. En la cadena retrasada, los fragmentos se llaman:", a:["Watson.","Okazaki.","Cebadores.","Telómeros."], c:1, e:"Fragmentos cortos de ADN sintetizados discontinuamente."},
    {q:"242. Enzima que une fragmentos de Okazaki:", a:["Helicasa.","Primasa.","Ligasa.","Topoisomerasa."], c:2, e:"Crea el enlace fosfodiéster final."},
    {q:"243. Mantiene a la polimerasa unida al ADN:", a:["Helicasa.","Abrazadera deslizante.","Proteína SSB.","Complejo ORC."], c:1, e:"Permite que la polimerasa sea procesiva y no se caiga."},
    {q:"244. Dirección de corrección (proofreading):", a:["5' a 3'.","3' a 5'.","2' a 5'.","Aleatoria."], c:1, e:"Actividad exonucleasa 3'->5' para quitar el último nucleótido erróneo."},
    {q:"245. ¿Cómo se alivia el estrés tensional por delante de la horquilla?", a:["Ligasa.","Topoisomerasas.","SSB.","Telomerasa."], c:1, e:"Corta y vuelve a sellar el ADN para evitar el superenrollamiento."},
    {q:"246. La telomerasa:", a:["Acorta cromosomas.","Usa molde ARN propio para extender.","Repara timina.","Solo en bacterias."], c:1, e:"Soluciona el problema del final de la replicación en eucariotas lineales."},
    {q:"247. Marca la hebra nueva para reparación de errores:", a:["Metilación.","'Nick' (mella) transitorio.","Uracilo.","Cola poli-A."], c:1, e:"Las mellas indican cuál es la hebra recién hecha antes de ligarse."},
    {q:"248. Desaminación de citosina produce:", a:["Guanina.","Adenina.","Uracilo.","Timina."], c:2, e:"La C se convierte en U, un error común."},
    {q:"249. Pérdida espontánea de base de purina:", a:["Desaminación.","Despurinización.","Dímero pirimidina.","Inversión."], c:1, e:"Crea un sitio AP (apurínico)."},
    {q:"250. Reparación de roturas de doble cadena con pérdida de nucleótidos:", a:["Recombinación homóloga.","Unión extremos no homólogos.","Escisión de bases.","Fisión nuclear."], c:1, e:"Es un mecanismo rápido pero 'sucio' (propenso a error)."},
    {q:"251. Recombinación homóloga requiere:", a:["Ausencia molde.","Secuencia homóloga (respaldo).","Telomerasa.","Dímeros timina."], c:1, e:"Usa la cromátida hermana como guía para una reparación perfecta."},
    {q:"252. El plegamiento del ARN se debe a:", a:["Enlaces covalentes.","Apareamiento intramolecular (puentes H).","Ribosomas.","Intrones."], c:1, e:"Permite que el ARN tenga funciones catalíticas (ribozimas)."},
    {q:"253. Sobre la ARN polimerasa, es FALSA:", a:["Inicia sin cebador.","No tiene proofreading tan eficaz.","Cataliza enlaces fosfodiéster.","Añade bases en dirección 3' a 5'."], c:3, e:"Siempre añade en dirección 5' -> 3'."},
    {q:"254. En bacterias, reconoce el promotor:", a:["Elongación.","Factor sigma.","Beta.","TBP."], c:1, e:"Se desprende tras iniciar la transcripción."},
    {q:"255. Transcribe la mayoría de genes de proteínas:", a:["Pol I.","Pol II.","Pol III.","Pol IV."], c:1, e:"La ARN polimerasa II es la responsable de los ARNm."},
    {q:"256. La caja TATA es reconocida por:", a:["ADN pol.","TFIID.","Espliceosoma.","p53."], c:1, e:"Parte del complejo de iniciación eucariota."},
    {q:"257. Para liberar a la Pol II y comenzar elongación, debe ser:", a:["Ubicuitinada.","Fosforilada en cola C-terminal.","Desfosforilada.","Metilada."], c:1, e:"La fosforilación del CTD permite el escape del promotor."},
    {q:"258. Modificación en extremo 5' del ARNm eucariota:", a:["Poliadenilación.","Capucha 7-metilguanosina.","Splicing.","Metilación bases."], c:1, e:"Protege de degradación y ayuda al inicio de la traducción."},
    {q:"259. Eliminación de intrones:", a:["Traducción.","Splicing.","Replicación.","Capping."], c:1, e:"Proceso de corte y empalme."},
    {q:"260. Complejo responsable del splicing:", a:["Ribosoma.","Espliceosoma.","Proteasoma.","Replisoma."], c:1, e:"Formado por snRNPs."},
    {q:"261. El splicing alternativo permite:", a:["Misma proteína siempre.","Un solo gen produce varias proteínas.","Traducción rápida.","ADN se replique."], c:1, e:"Aumenta enormemente la diversidad proteica en eucariotas."},
    {q:"262. Función del ARNt:", a:["Codificar secuencia.","Adaptador codón-aminoácido.","Núcleo ribosoma.","Degradar ARN."], c:1, e:"Traduce el lenguaje de nucleótidos al de aminoácidos."},
    {q:"263. Une aminoácido a su ARNt:", a:["ARN pol.","Aminoacil-ARNt sintetasa.","Peptidil transferasa.","Helicasa."], c:1, e:"Usa ATP para cargar el ARNt."},
    {q:"264. Formación del enlace peptídico en ribosoma:", a:["Subunidad pequeña.","Sitio A.","Sitio catalítico subunidad grande.","Citosol."], c:2, e:"Actividad de ribozima de la subunidad mayor."},
    {q:"265. Codón de inicio:", a:["UAA.","AUG.","UGA.","UAG."], c:1, e:"Codifica para metionina."},
    {q:"266. Antibióticos como tetraciclina son seguros porque:", a:["No entran.","Explotan diferencias ribosomales.","No fabrican proteínas.","Degradan ADN."], c:1, e:"Nuestros ribosomas mitocondriales son parecidos, pero los citoplásmicos no."},
    {q:"267. Degradación de proteínas en eucariotas:", a:["Golgi.","RE.","Proteasoma.","Núcleo."], c:2, e:"Destruye proteínas mal plegadas o marcadas con ubicuitina."},
    {q:"268. La diferenciación celular se debe a:", a:["Pérdida de genes.","Expresión diferencial.","Cambios secuencia.","Posición núcleo."], c:1, e:"Todas las células tienen el mismo ADN, pero expresan genes distintos."},
    {q:"269. Reguladores de la transcripción se unen al:", a:["Surco menor.","Surco mayor.","Telómeros.","Enlaces internos."], c:1, e:"El surco mayor ofrece patrones de puentes H más distintivos."},
    {q:"270. Genes bacterianos en un único ARNm:", a:["Exón.","Operón.","Regulón.","Intrón."], c:1, e:"Permite la regulación coordinada de vías metabólicas."},
    {q:"271. Represor de triptófano se une cuando:", a:["Niveles bajos.","Altos (unido al triptófano).","Hambre glucosa.","Se fosforila."], c:1, e:"Control por producto final."},
    {q:"272. Operón Lac al máximo nivel cuando:", a:["Glucosa y lactosa.","No glucosa ni lactosa.","No glucosa y sí lactosa.","Glucosa y no lactosa."], c:2, e:"Requiere presencia de inductor y activación por CAP (baja glucosa)."},
    {q:"273. Potenciadores (enhancers) actúan:", a:["Solo cerca.","A miles de pares de bases.","Solo dentro.","Solo procariotas."], c:1, e:"El ADN se pliega en bucle para acercarlos al promotor."},
    {q:"274. Puente entre activadores y complejo iniciación:", a:["HAT.","Mediador.","TFIID.","Cohesina."], c:1, e:"Gran complejo proteico coordinador."},
    {q:"275. Añade grupos acetilo a histonas:", a:["Desacetilasa.","HAT.","Metilasa.","Quinasa."], c:1, e:"Relaja la cromatina y favorece la transcripción."},
    {q:"276. Capacidad de recordar identidad celular:", a:["Transducción.","Memoria celular (epigenética).","Metástasis.","Quimiotaxis."], c:1, e:"Se mantiene por bucles de retroalimentación, metilación o cromatina."},
    {q:"277. Base objetivo de metilación silenciadora:", a:["Adenina.","Guanina.","Citosina.","Timina."], c:2, e:"Ocurre en islas CpG."},
    {q:"278. Los miARN regulan por:", a:["Bloqueo replicación.","Degradación de ARNm por apareamiento.","Metilación histonas.","Exportación."], c:1, e:"Interferencia de ARN."},
    {q:"279. Lípido más abundante en membranas:", a:["Colesterol.","Glucolípidos.","Fosfolípidos.","Triacilgliceroles."], c:2, e:"Componente estructural básico."},
    {q:"280. Cabeza hidrófila y cola hidrófoba:", a:["Hidrofóbica.","Anfipática.","Hidrófila.","Simétrica."], c:1, e:"Propiedad clave para formar bicapas."},
    {q:"281. Aumenta fluidez de membrana:", a:["Colas largas.","Colas saturadas.","Dobles enlaces (insaturaciones).","Frío."], c:2, e:"Los codos de las colas insaturadas impiden el empaquetamiento rígido."},
    {q:"282. Fluidez en células animales se regula por:", a:["Motores.","Glucógeno.","Colesterol.","ARNm."], c:2, e:"Amortigua la fluidez (evita que sea muy fluida o muy rígida)."},
    {q:"283. Síntesis de nuevos fosfolípidos ocurre en:", a:["Golgi.","Cara citosólica RE.","Núcleo.","M. Plasmática."], c:1, e:"Luego se transportan a otros orgánulos por vesículas."},
    {q:"284. Mueven fosfolípidos al azar para igualar crecimiento:", a:["Flipasas.","Escramblasas.","Quinasas.","Hidrolasas."], c:1, e:"Las flipasas son específicas; las escramblasas no."},
    {q:"285. Proteínas que atraviesan la bicapa:", a:["Periféricas.","Integrales.","Anclaje.","Glucocáliz."], c:1, e:"Requieren dominios hidrófobos."},
    {q:"286. Proteínas atraviesan la bicapa como:", a:["Hoja beta.","Hélice alfa.","Ovillo.","Iónico."], c:1, e:"Las cadenas laterales hidrófobas miran hacia afuera (a los lípidos)."},
    {q:"287. Armazón proteico cara interna membrana:", a:["Matriz.","Corteza celular.","Glucocáliz.","Huso."], c:1, e:"Da forma y resistencia mecánica a la célula."},
    {q:"288. Capa de azúcares superficie externa:", a:["Corteza.","Glucocáliz.","Lámina basal.","Bicapa."], c:1, e:"Protección y reconocimiento celular."},
    {q:"289. Difunde más fácil por bicapa pura:", a:["Na+.","Aminoácidos.","Glucosa.","O2."], c:3, e:"Moléculas pequeñas no polares pasan libremente."},
    {q:"290. Transporte a favor de gradiente sin gasto energético:", a:["Activo.","Pasivo / facilitado.","Ósmosis activa.","Exocitosis."], c:1, e:"Impulsado por la entropía."},
    {q:"291. Proteína cambia de conformación para transferir soluto:", a:["Canal.","Transportador.","Porina.","Acuaporina."], c:1, e:"Son más lentos que los canales."},
    {q:"292. Bomba Na+/K+ bombea:", a:["3 Na+ adentro, 2 K+ afuera.","3 Na+ afuera, 2 K+ adentro.","Ambos afuera.","Agua afuera."], c:1, e:"Mantiene el gradiente electroquímico."},
    {q:"293. Ion más abundante en el exterior:", a:["K+.","Mg2+.","Na+.","Ca2+."], c:2, e:"Sodio es el catión extracelular principal."},
    {q:"294. Ion más abundante en el interior:", a:["Na+.","Cl-.","K+.","Ca2+."], c:2, e:"Potasio es el catión intracelular principal."},
    {q:"295. Mueve dos solutos en misma dirección:", a:["Uniporte.","Antiporte.","Simporte.","Canal."], c:2, e:"Ejemplo: Simporte Na+/Glucosa."},
    {q:"296. Canales iónicos vs Transportadores:", a:["Más lentos.","Siempre ATP.","Selectividad y compuerta.","Contra gradiente."], c:2, e:"Son mucho más rápidos y funcionan como poros selectivos."},
    {get q(){return "297. Potencial de membrana en reposo depende de:";}, a:["Filtración Na+.","Filtración K+.","Ca2+.","Cl-."], c:1, e:"La salida de K+ por canales de filtración deja carga negativa adentro."},
    {q:"298. Potencial de acción se desencadena en el valor:", a:["Umbral.","Negativo máximo.","Reposo.","Neutro."], c:0, e:"Punto de no retorno para abrir canales de Na+."},
    {q:"299. Fase de despolarización por:", a:["K+ voltaje.","Na+ voltaje.","Ca2+ ligando.","Bomba Na/K."], c:1, e:"Entrada masiva de carga positiva."},
    {q:"300. Llegada de potencial al terminal abre:", a:["Canales Cl-.","Canales Ca2+ voltaje.","Canales K+.","Envoltura nuclear."], c:1, e:"La entrada de Calcio dispara la fusión de vesículas sinápticas."}
];

let userAnswers = new Array(quizData.length).fill(null);
let markedQuestions = new Set();
let currentViewIndices = [];
let currentIdx = 0;

function init(mode = 'all') {
    const container = document.getElementById('questions-container');
    const nav = document.getElementById('index-nav');
    container.innerHTML = ''; nav.innerHTML = '';
    
    if(mode === 'all') currentViewIndices = quizData.map((_, i) => i);
    else if(mode === 'failed') currentViewIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
    else if(mode === 'marked') currentViewIndices = Array.from(markedQuestions);
    else if(mode === 'failed_marked') {
        const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        currentViewIndices = Array.from(new Set([...failed, ...markedQuestions]));
    }

    if(currentViewIndices.length === 0) {
        alert("No hay preguntas en esta selección.");
        return init('all');
    }

    currentViewIndices.forEach((realIdx, displayIdx) => {
        const data = quizData[realIdx];
        const card = document.createElement('div');
        card.className = `question-card ${displayIdx === 0 ? 'active' : ''}`;
        card.id = `q-card-${displayIdx}`;
        card.innerHTML = `
            <div class="question-text">${data.q}</div>
            <ul class="options">
                ${data.a.map((opt, i) => `<li class="option-item" onclick="answer(${realIdx}, ${displayIdx}, ${i})">${opt}</li>`).join('')}
            </ul>
            <div class="explanation" id="exp-${displayIdx}">${data.e}</div>
        `;
        container.appendChild(card);

        const indexBtn = document.createElement('div');
        indexBtn.className = `index-item ${displayIdx === 0 ? 'active' : ''}`;
        indexBtn.id = `nav-${displayIdx}`;
        indexBtn.innerText = realIdx + 201;
        if(markedQuestions.has(realIdx)) indexBtn.classList.add('is-marked');
        if(userAnswers[realIdx] !== null) indexBtn.classList.add(userAnswers[realIdx] === quizData[realIdx].c ? 'correct' : 'wrong');
        indexBtn.onclick = () => jump(displayIdx);
        nav.appendChild(indexBtn);
    });

    currentIdx = 0;
    updateControls();
    document.getElementById('quiz-ui').style.display = 'block';
    document.getElementById('results-screen').style.display = 'none';
}

function answer(realIdx, displayIdx, optIdx) {
    if(userAnswers[realIdx] !== null) return;
    userAnswers[realIdx] = optIdx;
    const items = document.querySelectorAll(`#q-card-${displayIdx} .option-item`);
    const correct = quizData[realIdx].c;
    
    items.forEach((item, i) => {
        if(i === correct) item.classList.add('correct');
        else if(i === optIdx) item.classList.add('wrong');
        else item.classList.add('disabled');
    });

    document.getElementById(`exp-${displayIdx}`).style.display = 'block';
    document.getElementById(`nav-${displayIdx}`).classList.add(optIdx === correct ? 'correct' : 'wrong');
}

function jump(idx) {
    document.querySelector('.question-card.active').classList.remove('active');
    document.querySelector('.index-item.active').classList.remove('active');
    document.getElementById(`q-card-${idx}`).classList.add('active');
    document.getElementById(`nav-${idx}`).classList.add('active');
    currentIdx = idx;
    updateControls();
}

function move(step) {
    let next = currentIdx + step;
    if(next >= 0 && next < currentViewIndices.length) jump(next);
    else if(next === currentViewIndices.length) showResults();
}

function toggleMark() {
    const realIdx = currentViewIndices[currentIdx];
    if(markedQuestions.has(realIdx)) {
        markedQuestions.delete(realIdx);
        document.getElementById(`nav-${currentIdx}`).classList.remove('is-marked');
    } else {
        markedQuestions.add(realIdx);
        document.getElementById(`nav-${currentIdx}`).classList.add('is-marked');
    }
    updateControls();
}

function updateControls() {
    document.getElementById('prev-btn').disabled = (currentIdx === 0);
    document.getElementById('next-btn').innerText = (currentIdx === currentViewIndices.length - 1) ? "Finalizar" : "Siguiente";
    const realIdx = currentViewIndices[currentIdx];
    document.getElementById('mark-toggle').innerText = markedQuestions.has(realIdx) ? "Desmarcar" : "Marcar Pregunta";
}

function showResults() {
    document.getElementById('quiz-ui').style.display = 'none';
    document.getElementById('results-screen').style.display = 'block';
    const score = currentViewIndices.filter(i => userAnswers[i] === quizData[i].c).length;
    document.getElementById('score-text').innerText = `${score} / ${currentViewIndices.length}`;
}

function restart(mode) {
    if (mode === 'all') { 
        userAnswers.fill(null); 
        markedQuestions.clear(); 
    } else {
        // CORRECCIÓN: Si reiniciamos por fallidas o marcadas, 
        // debemos resetear las respuestas de ESAS preguntas específicas
        // para poder volver a contestarlas.
        
        let targetIndices = [];
        if(mode === 'failed') {
            targetIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        } else if(mode === 'marked') {
            targetIndices = Array.from(markedQuestions);
        } else if(mode === 'failed_marked') {
            const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
            targetIndices = Array.from(new Set([...failed, ...markedQuestions]));
        }

        // Limpiamos las respuestas previas de las preguntas que vamos a re-intentar
        targetIndices.forEach(idx => {
            userAnswers[idx] = null;
        });
    }
    
    // Ahora iniciamos el modo correspondiente
    init(mode);
}

// Mejora en la función init para asegurar que los botones de navegación 
// se limpien de colores previos si la respuesta ahora es null
function init(mode = 'all') {
    const container = document.getElementById('questions-container');
    const nav = document.getElementById('index-nav');
    container.innerHTML = ''; nav.innerHTML = '';
    
    if(mode === 'all') currentViewIndices = quizData.map((_, i) => i);
    else if(mode === 'failed') currentViewIndices = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
    else if(mode === 'marked') currentViewIndices = Array.from(markedQuestions);
    else if(mode === 'failed_marked') {
        const failed = userAnswers.map((ans, i) => (ans !== null && ans !== quizData[i].c) ? i : -1).filter(i => i !== -1);
        currentViewIndices = Array.from(new Set([...failed, ...markedQuestions]));
    }

    if(currentViewIndices.length === 0) {
        alert("No hay preguntas en esta selección.");
        return; // Eliminamos el init('all') automático para no confundir al usuario
    }

    currentViewIndices.forEach((realIdx, displayIdx) => {
        const data = quizData[realIdx];
        const card = document.createElement('div');
        card.className = `question-card ${displayIdx === 0 ? 'active' : ''}`;
        card.id = `q-card-${displayIdx}`;
        
        // Generar opciones asegurando que no tengan clases de "correcto/error" previas
        card.innerHTML = `
            <div class="question-text">${data.q}</div>
            <ul class="options">
                ${data.a.map((opt, i) => `<li class="option-item" onclick="answer(${realIdx}, ${displayIdx}, ${i})">${opt}</li>`).join('')}
            </ul>
            <div class="explanation" id="exp-${displayIdx}">${data.e}</div>
        `;
        container.appendChild(card);

        const indexBtn = document.createElement('div');
        indexBtn.className = `index-item ${displayIdx === 0 ? 'active' : ''}`;
        indexBtn.id = `nav-${displayIdx}`;
        indexBtn.innerText = realIdx + 201;
        
        // Solo añadimos clases si realmente hay un valor en userAnswers
        if(markedQuestions.has(realIdx)) indexBtn.classList.add('is-marked');
        if(userAnswers[realIdx] !== null) {
            indexBtn.classList.add(userAnswers[realIdx] === quizData[realIdx].c ? 'correct' : 'wrong');
        }
        
        indexBtn.onclick = () => jump(displayIdx);
        nav.appendChild(indexBtn);
    });

    currentIdx = 0;
    updateControls();
    document.getElementById('quiz-ui').style.display = 'block';
    document.getElementById('results-screen').style.display = 'none';
}

init();
</script>
</body>
</html>