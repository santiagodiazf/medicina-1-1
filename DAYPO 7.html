<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bloque V: Metabolismo y Bioenerg√©tica</title>
    <style>
        :root {
            --primary: #059669; /* Verde Esmeralda */
            --primary-dark: #047857;
            --primary-light: #d1fae5;
            --bg: #ecfdf5;
            --text: #064e3b;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary-dark);
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            display: inline-block;
            width: 100%;
        }

        .question-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .question-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* --- Checkbox para Marcar --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid #a7f3d0;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #10b981;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #064e3b;
            line-height: 1.5;
        }

        /* Etiquetas para diagramas */
        .img-tag {
            display: block;
            margin-top: 12px;
            padding: 10px;
            background-color: #f0fdf4;
            border-left: 4px solid #34d399;
            color: #065f46;
            font-size: 0.9em;
            font-style: italic;
            border-radius: 0 4px 4px 0;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #374151;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary-dark);
            padding-left: 25px; /* Efecto desplazamiento */
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #d1fae5 !important;
            border-color: #059669 !important;
            color: #064e3b !important;
            font-weight: 600;
        }

        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        /* Caja de Explicaci√≥n */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #dcfce7;
            border-left: 5px solid var(--primary);
            border-radius: 6px;
            display: none;
            font-size: 0.95em;
            color: #14532d;
            animation: slideDown 0.3s ease-out;
        }
        .explanation.visible {
            display: block;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- √Årea de Controles --- */
        #controls-area {
            margin-top: 50px;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary);
        }

        .action-btn {
            background: var(--primary); color: white; border: none;
            padding: 12px 25px; font-size: 1.05em; border-radius: 8px;
            cursor: pointer; margin: 8px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .action-btn:hover { 
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-options button {
            width: 100%;
            background: #4b5563;
        }
        .restart-options button:hover { background: #1f2937; }
        .restart-options button:first-child { background: var(--primary); }

    </style>
</head>
<body>

    <h1>Bloque V: Bioqu√≠mica</h1>
    <div style="text-align: center; color: #065f46; margin-bottom: 30px;">
        Santi D√≠az | Metabolismo, Cadena Respiratoria y Ciclo de Krebs
    </div>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>Resultados de la sesi√≥n</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer todo el test</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Repasar marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Repasar falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Falladas + Marcadas</button>
        </div>
    </div>

<script>
    const quizData = [
        { 
            q: "Uno de estos compuestos no es de alto contenido en energ√≠a de hidr√≥lisis:", 
            opts: ["Fosfoenolpiruvato", "Acetoacetato", "Succinil-CoA", "S-adenosilmetionina", "1,3-bisfosfoglicerato"], 
            a: "Acetoacetato", 
            exp: "El acetoacetato es un cuerpo cet√≥nico, no un compuesto con enlace de alta energ√≠a (como el fosfoenol o un tio√©ster)." 
        },
        { 
            q: "Se√±ala el orden correcto del flujo de electrones procedente del NADH:", 
            opts: ["NADH ‚Üí Complejo I ‚Üí ubiquinona ‚Üí complejo III ‚Üí citocromo c ‚Üí complejo IV ‚Üí O2", "NADH ‚Üí Complejo I ‚Üí citocromo c ‚Üí complejo III ‚Üí ubiquinona ‚Üí complejo IV ‚Üí O2", "NADH ‚Üí complejo I ‚Üí ubiquinona ‚Üí complejo II ‚Üí citocromo c ‚Üí complejo IV ‚Üí O2", "NADH ‚Üí complejo II ‚Üí ubiquinona ‚Üí complejo III ‚Üí citocromo c ‚Üí complejo IV ‚Üí O2", "NADH ‚Üí complejo I ‚Üí ubiquinona ‚Üí citocromo c ‚Üí complejo III ‚Üí complejo IV ‚Üí O2"], 
            a: "NADH ‚Üí Complejo I ‚Üí ubiquinona ‚Üí complejo III ‚Üí citocromo c ‚Üí complejo IV ‚Üí O2", 
            exp: "Es la secuencia can√≥nica de la cadena respiratoria para electrones de alto potencial." 
        },
        { 
            q: "Sobre los componentes de la cadena de transporte de electrones, es incorrecto que:", 
            opts: ["El complejo II bombea 2H+ desde la matriz hasta el espacio intermembrana al pasar por √©l los electrones del FADH2", "La ubiquinona es una benzoquinona lipof√≠lica que transporta electrones difundiendo por la membrana interna mitocondrial", "El citocromo c es una hemoprote√≠na que transporta electrones de uno en uno desde el complejo III al IV", "El complejo I o NADH deshidrogenasa transporta los electrones del NADH hasta la ubiquinona, bombeando 4H+"], 
            a: "El complejo II bombea 2H+ desde la matriz hasta el espacio intermembrana al pasar por √©l los electrones del FADH2", 
            exp: "El Complejo II (Succinato deshidrogenasa) NO es una bomba de protones; no contribuye directamente al gradiente." 
        },
        { 
            q: "Sobre los inhibidores de la cadena de transporte electr√≥nico indica la respuesta correcta:", 
            opts: ["La oligomicina inhibe la ATPasa (Complejo V)", "La rotenona inhibe el complejo IV", "La rotenona es inhibidor del complejo II", "El cianuro inhibe el complejo I", "El √≥xido n√≠trico es inhibidor del complejo I"], 
            a: "La oligomicina inhibe la ATPasa (Complejo V)", 
            exp: "La oligomicina bloquea el canal F0 de la ATP sintasa, impidiendo el retorno de protones." 
        },
        { 
            q: "Indique cu√°l de los siguientes compuestos al hidrolizarse libera la menor cantidad de energ√≠a:", 
            opts: ["AMP", "ATP", "ADP", "Fosfoenolpiruvato", "Fosfocreatina"], 
            a: "AMP", 
            exp: "El AMP tiene un enlace √©ster fosfato simple (baja energ√≠a) comparado con los enlaces anh√≠drido fosfato del ATP/ADP." 
        },
        { 
            q: "La citrato sintasa cataliza la reacci√≥n:", 
            opts: ["Condensaci√≥n de oxalacetato y acetil-CoA", "Formaci√≥n de citrato", "Ambas, condensaci√≥n de oxalacetato con acetil-CoA y formaci√≥n de citrato", "Formaci√≥n de isocitrato", "Todas son ciertas"], 
            a: "Ambas, condensaci√≥n de oxalacetato con acetil-CoA y formaci√≥n de citrato", 
            exp: "Es la reacci√≥n inicial del Ciclo de Krebs: Oxalacetato + Acetil-CoA -> Citrato + CoA-SH." 
        },
        { 
            q: "¬øCu√°l de los siguientes componentes de la cadena respiratoria mitocondrial contribuye m√°s al gradiente de protones?", 
            opts: ["El complejo I", "La ubiquinona", "El complejo II", "El complejo III", "I y III contribuyen por igual"], 
            a: "I y III contribuyen por igual", 
            exp: "Tanto el Complejo I como el Complejo III bombean 4 protones por cada par de electrones que los atraviesa (El IV bombea 2)." 
        },
        { 
            q: "El estado metab√≥lico en el que se da la m√°xima velocidad de respiraci√≥n mitocondrial en condiciones fisiol√≥gicas se denomina:", 
            opts: ["Estado 3 Respiratorio", "Respiraci√≥n m√°xima", "Control respiratorio m√°ximo", "Pico respiratorio", "Estado 4 Respiratorio"], 
            a: "Estado 3 Respiratorio", 
            exp: "Estado 3 = Sustrato abundante + ADP abundante (m√°xima s√≠ntesis de ATP y consumo de O2)." 
        },
        { 
            q: "En un experimento de oximetr√≠a con mitocondrias aisladas, se√±ala la situaci√≥n en la que se consumir√≠a ox√≠geno si se a√±ade:", 
            opts: ["A- Malato como sustrato, oligomicina y un desacoplante", "B- Malato como sustrato, rotenona y ADP", "C- Succinato como sustrato, rotenona y ADP", "D- Malato como sustrato, antimicina y ADP", "E- A y C son correctas"], 
            a: "E- A y C son correctas", 
            exp: "A) El desacoplante permite el flujo de e- sin ATP sintasa. C) El succinato entra en el Complejo II, salt√°ndose el bloqueo de rotenona en el I." 
        },
        { 
            q: "El √≥xido n√≠trico (NO) act√∫a sobre la respiraci√≥n mitocondrial:", 
            opts: ["Compite con el ox√≠geno por el lugar de fijaci√≥n en la citocromo oxidasa (Complejo IV)", "Inhibi√©ndola mediante uni√≥n al complejo I", "Activ√°ndola", "Compite con el ox√≠geno a nivel del complejo I", "No tiene efecto sobre la cadena respiratoria"], 
            a: "Compite con el ox√≠geno por el lugar de fijaci√≥n en la citocromo oxidasa (Complejo IV)", 
            exp: "El NO es un inhibidor competitivo reversible del ox√≠geno en el Complejo IV." 
        },
        { 
            q: "En el metabolismo intermediario:", 
            opts: ["Todas son ciertas", "Las reacciones de nivel 2 conducen a la formaci√≥n de piruvato y acetil-CoA", "El ciclo de Krebs constituye la principal ruta de nivel 3 en organismos aerobios", "El ATP se obtiene por fosforilaci√≥n oxidativa y a nivel de sustrato", "Todas son falsas"], 
            a: "Todas son ciertas", 
            exp: "Resume correctamente la convergencia catab√≥lica y la generaci√≥n de energ√≠a." 
        },
        { 
            q: "En funci√≥n de su complejidad, la mol√©cula de piruvato puede clasificarse como:", 
            opts: ["Un intermediario metab√≥lico", "Un precursor estructural", "Una unidad estructural", "Una macromol√©cula", "Una supramol√©cula"], 
            a: "Un intermediario metab√≥lico", 
            exp: "Es un compuesto central de 3 carbonos, cruce de m√∫ltiples v√≠as." 
        },
        { 
            q: "Durante el transporte de hidr√≥geno se forman radicales en el paso intermedio en:", 
            opts: ["CoQ10 (ubiquinona)", "Vitamina C", "FMN", "FAD", "Todas son ciertas"], 
            a: "Todas son ciertas", 
            exp: "Todas estas mol√©culas pueden aceptar 1 electr√≥n y formar un estado radical libre estable (semiquinona)." 
        },
        { 
            q: "Respecto a la cadena de transporte de electrones y a la fosforilaci√≥n oxidativa, se√±ale la respuesta incorrecta:", 
            opts: ["Exclusivamente para la s√≠ntesis de una mol√©cula de ATP se necesitan 3H+", "Los complejos III y IV est√°n conectados por el citocromo c", "El paso de los electrones del NADH hasta el ox√≠geno produce un bombeo de 10H+", "El complejo II no act√∫a como bomba de H+", "El paso de los electrones del FADH2 produce un bombeo de 6H+"], 
            a: "Exclusivamente para la s√≠ntesis de una mol√©cula de ATP se necesitan 3H+", 
            exp: "Generalmente se considera que se requieren 4H+ en total (3 para la s√≠ntesis + 1 para el transporte de fosfato). La afirmaci√≥n de 'exclusivamente 3H+' suele marcarse como incorrecta en este contexto." 
        },
        { 
            q: "Respecto a la estructura de la ATP sintasa, se√±ale la respuesta correcta:", 
            opts: ["Las subunidades beta son las subunidades catal√≠ticas", "Las subunidades alfa son las subunidades catal√≠ticas", "La subunidad beta est√° situada en la membrana interna mitocondrial", "El factor F0 y F1 est√°n unidos por el interior por un tallo formado por subunidad beta"], 
            a: "Las subunidades beta son las subunidades catal√≠ticas", 
            exp: "La cabeza F1 tiene 3 subunidades beta que contienen los centros activos para formar ATP." 
        },
        { 
            q: "Uno de estos compuestos no es de alta energ√≠a de hidr√≥lisis (Repetida):", 
            opts: ["Acetoacetato", "S-adenosilmetionina", "Palmitil-CoA", "Fosfoenolpiruvato", "1,3-bisfosfoglicerato"], 
            a: "Acetoacetato", 
            exp: "Reiteraci√≥n: el acetoacetato es un cuerpo cet√≥nico normal, no de alta energ√≠a." 
        },
        { 
            q: "Cu√°l de las siguientes afirmaciones es falsa respecto a la reacci√≥n de la alfa-cetoglutarato deshidrogenasa:", 
            opts: ["Genera NADPH(H+)", "Requiere TPP, lipoamida y FAD", "Se trata de un paso del ciclo de Krebs", "La cataliza la alfa-cetoglutarato deshidrogenasa", "El producto es succinil-CoA"], 
            a: "Genera NADPH(H+)", 
            exp: "Falso. Genera NADH, no NADPH. Es an√°loga a la piruvato deshidrogenasa." 
        },
        { 
            q: "¬øCu√°les de los siguientes intermediarios metab√≥licos son productos catab√≥licos de los amino√°cidos?", 
            opts: ["Todas son ciertas", "Piruvato", "Fumarato", "Oxalacetato", "Alfa-cetoglutarato"], 
            a: "Todas son ciertas", 
            exp: "Los esqueletos carbonados de los amino√°cidos se degradan a intermediarios del ciclo de Krebs o piruvato." 
        },
        { 
            q: "En el metabolismo oxidativo:", 
            opts: ["El piruvato se oxida a acetil-CoA", "El piruvato se transforma en lactato", "Todo el acetil-CoA procede de la gluc√≥lisis", "El destino √∫nico del acetil-CoA es el ciclo de Krebs", "Las fermentaciones constituyen el paso final"], 
            a: "El piruvato se oxida a acetil-CoA", 
            exp: "Es el paso clave de entrada al metabolismo oxidativo mitocondrial." 
        },
        { 
            q: "Respecto a la decarboxilaci√≥n oxidativa del piruvato, ¬øcu√°l de las siguientes afirmaciones es FALSA?", 
            opts: ["Su rendimiento energ√©tico es de 4 ATP", "El primer coenzima de la reacci√≥n es el TPP", "Tiene lugar en la mitocondria", "El proceso es catalizado por un complejo multienzim√°tico", "Son falsas A y B"], 
            a: "Su rendimiento energ√©tico es de 4 ATP", 
            exp: "Produce 1 NADH, que equivale a ~2.5 ATP (no 4) en la cadena respiratoria." 
        },
        { 
            q: "¬øCu√°l es la finalidad de la lanzadera de alfa-glicerofosfato?", 
            opts: ["Oxidar el NADH formado en la gluc√≥lisis", "Reducir al fosfato dihidroxiacetona sin otro objetivo", "Frenar la gluc√≥lisis", "Mantener elevadas las concentraciones citos√≥licas de NADH", "Evitar la entrada de electrones en la cadena respiratoria"], 
            a: "Oxidar el NADH formado en la gluc√≥lisis", 
            exp: "Permite regenerar NAD+ en el citosol para que la gluc√≥lisis contin√∫e, transfiriendo los electrones a la mitocondria." 
        },
        { 
            q: "Indique qu√© metabolito lleva un fosfato con alto contenido energ√©tico:", 
            opts: ["1,3- bisfosfoglicerato", "Glucosa 6 fosfato", "Gliceraldeh√≠do 3 fosfato", "2-fosfoglicerato", "Glicerofosfato"], 
            a: "1,3- bisfosfoglicerato", 
            exp: "Contiene un enlace acil-fosfato de muy alta energ√≠a." 
        },
        { 
            q: "¬øPor qu√© se forma lactato en la gluc√≥lisis anaerobia?", 
            opts: ["Para regenerar NAD+ y evitar el bloqueo de la gluc√≥lisis", "Para oxidar al piruvato y eliminarlo", "Para mantener la glucosa dentro de la c√©lula", "Para consumir ATP en exceso", "Porque la lactato deshidrogenasa solo funciona en anaerobiosis"], 
            a: "Para regenerar NAD+ y evitar el bloqueo de la gluc√≥lisis", 
            exp: "Es esencial para reciclar el NAD+ consumido en el paso de GAPDH cuando no hay ox√≠geno." 
        },
        { 
            q: "Desde el punto de vista termodin√°mico en una reacci√≥n qu√≠mica endot√©rmica:", 
            opts: ["Hay que comunicarle calor", "Se desprende calor", "Se desprende energ√≠a libre", "Hay que comunicar energ√≠a libre para que tenga lugar", "Se ha alcanzado el equilibrio"], 
            a: "Hay que comunicarle calor", 
            exp: "Endot√©rmica significa que absorbe calor del entorno (Delta H positivo)." 
        },
        { 
            q: "Se√±ala el grupo de coenzimas correcto que forman parte del Complejo Piruvato Deshidrogenasa:", 
            opts: ["NAD+, FAD, CoA, Tiamina Pirofosfato y Lipoamida", "NAD+, FMN, CoA, Tiamina Pirofosfato y Lipoamida", "NADP+, FMN, CoA, Tiamina Pirofosfato y Lipoamida", "NAD+, FAD, Acetil-CoA, Tiamina Pirofosfato y Lipoamida", "NADP+, FAD, Acetil-CoA, Tiamina Pirofosfato y Lipoamida"], 
            a: "NAD+, FAD, CoA, Tiamina Pirofosfato y Lipoamida", 
            exp: "Son los 5 cofactores cl√°sicos del complejo PDH." 
        },
        { 
            q: "Qu√© pasos del ciclo de Krebs regulan el ATP y el NADH:", 
            opts: ["Isocitrato a alfa-cetoglutarato y alfa-cetoglutarato a succinil-CoA", "Isocitrato a alfa-cetoglutarato", "Succinato a fumarato", "Malato a oxalacetato", "Fumarato a malato"], 
            a: "Isocitrato a alfa-cetoglutarato y alfa-cetoglutarato a succinil-CoA", 
            exp: "Las dos deshidrogenasas irreversibles del ciclo son los principales puntos de regulaci√≥n." 
        },
        { 
            q: "Respecto al ciclo de Krebs, se√±ala la respuesta incorrecta:", 
            opts: ["Las tres √∫ltimas reacciones son carboxilaciones sucesivas para formar de nuevo oxalacetato", "Se obtienen 3 NADH y 1 FADH2 por acetil-CoA", "Se dan dos decarboxilaciones oxidativas consecutivas", "Se obtiene una mol√©cula de GTP por fosforilaci√≥n a nivel de sustrato", "La primera reacci√≥n es la condensaci√≥n de acetil-CoA con oxalacetato"], 
            a: "Las tres √∫ltimas reacciones son carboxilaciones sucesivas para formar de nuevo oxalacetato", 
            exp: "Incorrecto. Las √∫ltimas reacciones son Oxidaci√≥n (Succinato), Hidrataci√≥n (Fumarato) y Oxidaci√≥n (Malato), no carboxilaciones." 
        },
        { 
            q: "Se√±ala la respuesta correcta sobre inhibidores de la cadena respiratoria:", 
            opts: ["E- La A y la D son correctas", "A- La rotenona es inhibidor del complejo I", "B- La rotenona inhibe el complejo IV", "C- El cianuro inhibe el complejo III", "D- La oligomicina inhibe el complejo V"], 
            a: "E- La A y la D son correctas", 
            exp: "Rotenona bloquea el Complejo I y Oligomicina la ATP sintasa (Complejo V)." 
        },
        { 
            q: "En relaci√≥n con experimentos de oximetr√≠a se√±ala la respuesta correcta:", 
            opts: ["Todas son ciertas", "Se denomina estado 3 respiratorio a la m√°xima velocidad de consumo de ox√≠geno", "La diferencia entre el estado 3 con L-Arginina y L-NAME se denomina actividad funcional de la mtNOS", "La valinomicina act√∫a como desacoplante al formar un poro", "Se define estado 4 al estado de reposo por falta de ADP"], 
            a: "Todas son ciertas", 
            exp: "Todas las definiciones sobre estados respiratorios e inhibidores son correctas." 
        },
        { 
            q: "Respecto al rendimiento energ√©tico de la fosforilaci√≥n oxidativa, es cierto que:", 
            opts: ["Por cada par de electrones del NADH se forman y transportan unas 2,5 mol√©culas de ATP", "Los electrones del NADH producen el bombeo de 6H+", "El Complejo II bombea 4 H+", "Para la s√≠ntesis y transporte de ATP se necesitan exactamente 2 H+", "Ninguna de las respuestas es cierta"], 
            a: "Por cada par de electrones del NADH se forman y transportan unas 2,5 mol√©culas de ATP", 
            exp: "Es el valor de consenso actual (P/O ~ 2.5 para NADH)." 
        },
        { 
            q: "Respecto a la ATP sintasa, elige la afirmaci√≥n incorrecta (Repetida):", 
            opts: ["Para la s√≠ntesis y transporte de una mol√©cula de ATP se necesitan 3 H+ (Enunciado original: 3 ATP)", "Cataliza la reacci√≥n ADP + Pi ‚Üí ATP", "Est√° formada por dos unidades: F0 y F1", "Es inhibida por la oligomicina", "En la unidad F1, la subunidad Œ≤ es la catal√≠tica"], 
            a: "Para la s√≠ntesis y transporte de una mol√©cula de ATP se necesitan 3 H+ (Enunciado original: 3 ATP)", 
            exp: "La afirmaci√≥n 'se necesitan 3 ATP' es absurda (circular) y si fuera '3 H+' tambi√©n suele considerarse incorrecta (se requieren 4). Por tanto, esta es la falsa." 
        },
        { 
            q: "Se√±ala el orden correcto del flujo de electrones procedentes del NADH (Detallado):", 
            opts: ["NADH ‚Üí FMN ‚Üí Ubiquinona ‚Üí citocromo b ‚Üí citocromo c1 ‚Üí citocromo c ‚Üí citocromo a3 ‚Üí O2", "NADH ‚Üí Ubiquinona ‚Üí citocromo c1 ‚Üí FMN ‚Üí citocromo b ‚Üí citocromo a3 ‚Üí O2", "NADH ‚Üí FMN ‚Üí Ubiquinona ‚Üí citocromo a3 ‚Üí citocromo c1 ‚Üí citocromo b ‚Üí O2", "NADH ‚Üí FMN ‚Üí citocromo b ‚Üí Ubiquinona ‚Üí citocromo c1 ‚Üí citocromo a3 ‚Üí O2"], 
            a: "NADH ‚Üí FMN ‚Üí Ubiquinona ‚Üí citocromo b ‚Üí citocromo c1 ‚Üí citocromo c ‚Üí citocromo a3 ‚Üí O2", 
            exp: "Detalle de los grupos prost√©ticos: FMN (I) -> Q -> cyt b/c1 (III) -> cyt c -> cyt a/a3 (IV)." 
        },
        { 
            q: "En un experimento de oximetr√≠a con mitocondrias aisladas, se√±ala la situaci√≥n en la que se consumir√≠a ox√≠geno (Repetida/Variaci√≥n):", 
            opts: ["E- B y D son correctas", "A- Malato como sustrato, rotenona y ADP", "B- Succinato como sustrato, rotenona y ADP", "C- Malato como sustrato, antimicina y ADP", "D- Malato como sustrato, oligomicina y un desacoplante"], 
            a: "E- B y D son correctas", 
            exp: "B) Succinato entra por el complejo II (saltando rotenona). D) Desacoplante permite consumo sin s√≠ntesis de ATP." 
        },
        { 
            q: "En el metabolismo intermediario (Repetida):", 
            opts: ["Todas son ciertas", "Las reacciones de nivel 2 conducen a la formaci√≥n de piruvato y acetil-CoA", "El ciclo de Krebs constituye la principal ruta de nivel 3", "El ATP se obtiene a partir de la fosforilaci√≥n oxidativa"], 
            a: "Todas son ciertas", 
            exp: "Reiteraci√≥n de conceptos generales." 
        },
        { 
            q: "Cu√°l de las siguientes afirmaciones es falsa respecto a la reacci√≥n del complejo piruvato deshidrogenasa:", 
            opts: ["Es una descarboxilaci√≥n oxidativa del ciclo de Krebs", "Requiere TPP, lipoamida y FAD", "Genera NADH(H+)", "La cataliza la piruvato deshidrogenasa", "No requiere aporte de energ√≠a"], 
            a: "Es una descarboxilaci√≥n oxidativa del ciclo de Krebs", 
            exp: "Falso. Es el paso PREVIO al ciclo de Krebs, no forma parte del ciclo en s√≠." 
        },
        { 
            q: "Cu√°l de estas afirmaciones son falsas respecto del ciclo de Krebs:", 
            opts: ["Hay una fosforilaci√≥n a nivel de sustrato en el paso de fosfoenolpiruvato a piruvato generando ATP", "Es una ruta anfib√≥lica", "Genera equivalentes reductores FADH2 y NADH(H+)", "Est√° regulado por los niveles de NAD+/NADH intramitocondriales", "La principal ruta anapler√≥tica est√° catalizada por la piruvato carboxilasa"], 
            a: "Hay una fosforilaci√≥n a nivel de sustrato en el paso de fosfoenolpiruvato a piruvato generando ATP", 
            exp: "Esa reacci√≥n pertenece a la GLUC√ìLISIS, no al ciclo de Krebs (donde la fosforilaci√≥n es Succinil-CoA -> Succinato)." 
        },
        { 
            q: "Cu√°l de estas afirmaciones es falsa respecto de la fosforilaci√≥n oxidativa:", 
            opts: ["La s√≠ntesis de ATP requiere del desacoplamiento entre transporte de electrones y bombeo de protones", "La velocidad de consumo de O2 mide la velocidad del transporte de electrones", "El control respiratorio significa que el transporte de electrones est√° vinculado a la s√≠ntesis de ATP", "La eficiencia respiratoria P/O mide las mol√©culas de Pi incorporadas al ATP por ox√≠geno consumido"], 
            a: "La s√≠ntesis de ATP requiere del desacoplamiento entre transporte de electrones y bombeo de protones", 
            exp: "Falso. Requiere ACOPLAMIENTO. Si se desacopla, hay transporte de electrones pero no s√≠ntesis de ATP." 
        },
        { 
            q: "De los siguientes transportadores electr√≥nicos, ¬øcu√°l es m√≥vil dentro de la membrana?", 
            opts: ["CoQ (ubiquinona)", "Grupos Fe-S de las prote√≠nas", "Citocromos b", "FMN", "Citocromos a1 y a2"], 
            a: "CoQ (ubiquinona)", 
            exp: "Es un l√≠pido hidrof√≥bico que se mueve libremente en la bicapa lip√≠dica." 
        },
        { 
            q: "Respecto al bombeo de protones desde la matriz mitocondrial hacia el espacio intermembrana, ¬øqu√© es falso?", 
            opts: ["El complejo V bombea 4H+ al espacio intermembrana", "El complejo I bombea 4H+", "El complejo II no bombea H+", "El complejo III bombea 4H+", "El complejo IV bombea 2H+"], 
            a: "El complejo V bombea 4H+ al espacio intermembrana", 
            exp: "Falso. El complejo V (ATP sintasa) permite el retorno de H+ hacia la matriz, no los bombea hacia fuera." 
        },
        { 
            q: "Se√±ala cu√°l de estas sustancias es producto de las reacciones de nivel 2 del catabolismo:", 
            opts: ["Todas son ciertas", "Acetil-CoA", "Piruvato", "Glicerol", "Intermediarios del ciclo de Krebs"], 
            a: "Todas son ciertas", 
            exp: "Productos de degradaci√≥n de mon√≥meros (gl√∫cidos, l√≠pidos, amino√°cidos) antes de la oxidaci√≥n final." 
        },
        { 
            q: "Qu√© pasos del ciclo de Krebs regulan el ATP y el NADH (Repetida):", 
            opts: ["Isocitrato a alfa-cetoglutarato y alfa-cetoglutarato a succinil-CoA", "Isocitrato a alfa-cetoglutarato", "Succinato a fumarato", "Malato a oxalacetato", "Ninguno de los anteriores"], 
            a: "Isocitrato a alfa-cetoglutarato y alfa-cetoglutarato a succinil-CoA", 
            exp: "Reiteraci√≥n de los puntos de control del ciclo." 
        },
        { 
            q: "Respecto a la ATP sintasa, elige la opci√≥n incorrecta (Repetida/Variaci√≥n):", 
            opts: ["Para la s√≠ntesis y transporte de una mol√©cula de ATP se necesitan 3 ATP (original)", "Cataliza la reacci√≥n ADP + Pi --> ATP", "Est√° formada por dos unidades: F0 y F1", "Es inhibida por la oligomicina", "En la unidad F1, la subunidad beta es catal√≠tica"], 
            a: "Para la s√≠ntesis y transporte de una mol√©cula de ATP se necesitan 3 ATP (original)", 
            exp: "Frase incorrecta y circular." 
        },
        { 
            q: "Cu√°l de los siguientes compuestos no es de alta energ√≠a de hidr√≥lisis:", 
            opts: ["Carboxibiotina", "ATP", "Acil-CoA", "Fosfoenolpiruvato", "Fosfocreatina"], 
            a: "Carboxibiotina", 
            exp: "Aunque es un cofactor activado ('CO2 activado'), su hidr√≥lisis no es la fuente energ√©tica principal comparable a los fosfatos de alta energ√≠a en este contexto." 
        },
        { 
            q: "El piruvato de la glucolisis se transforma en acetil-CoA mediante una descarboxilaci√≥n oxidativa catalizada por el complejo:", 
            opts: ["Piruvato deshidrogenasa", "Piruvato descarboxilasa", "Piruvato carboxiquinasa", "Piruvato carboxilasa", "Acetil-CoA carboxilasa"], 
            a: "Piruvato deshidrogenasa", 
            exp: "El complejo PDH." 
        },
        { 
            q: "Identifica qu√© afirmaci√≥n es correcta en relaci√≥n a la regulaci√≥n del complejo piruvato deshidrogenasa:", 
            opts: ["El acetil CoA, el NADH y el ATP son inhibidores alost√©ricos de la PDHasa", "La insulina inhibe la actividad de la PDHasa", "Todas las afirmaciones anteriores son correctas", "La PDH kinasa regula positivamente la actividad de la PDHasa"], 
            a: "El acetil CoA, el NADH y el ATP son inhibidores alost√©ricos de la PDHasa", 
            exp: "Indican un estado de alta energ√≠a, por lo que frenan la entrada de combustible al ciclo de Krebs." 
        },
        { 
            q: "Ciclo de Krebs. Indica los sustratos que van a producir equivalentes de poder reductor (NADH/FADH2): (1) isocitrato, (2) alfa-cetoglutarato (3) malato y (4) succinil CoA", 
            opts: ["Solo los compuestos 1, 2 y 3", "Solo los compuestos 2 y 4", "Solo los compuestos 1 y 3", "Solo el compuesto 4"], 
            a: "Solo los compuestos 1, 2 y 3", 
            exp: "Succinyl-CoA produce GTP, no NADH/FADH2 directamente en su conversi√≥n a succinato." 
        },
        { 
            q: "¬øCu√°l de las siguientes condiciones disminuye la oxidaci√≥n del acetil-CoA por el ciclo de Krebs?", 
            opts: ["Un cociente bajo NAD+/NADH", "Una alta disponibilidad de Ca2+", "Un cociente elevado acetil-CoA/CoA", "Un cociente bajo ATP/ADP"], 
            a: "Un cociente bajo NAD+/NADH", 
            exp: "Poco NAD+ y mucho NADH inhibe las deshidrogenasas (falta de sustrato oxidante e inhibici√≥n por producto)." 
        },
        { 
            q: "Respecto a la reacci√≥n catalizada por la alfa-cetoglutarato deshidrogenasa, ¬øqu√© no es cierto?", 
            opts: ["Es una ruta anapler√≥tica del ciclo de Krebs", "Es una descarboxilaci√≥n oxidativa", "Requiere TPP, lipoamida y FAD", "El producto es succinil-CoA"], 
            a: "Es una ruta anapler√≥tica del ciclo de Krebs", 
            exp: "Es una reacci√≥n propia del ciclo (catab√≥lica), no de relleno (anapler√≥tica)." 
        },
        { 
            q: "Respecto a una gr√°fica de consumo de ox√≠geno mitocondrial, ¬øqu√© compuesto explicar√≠a un cese brusco del consumo en estado 3 al a√±adirlo?", 
            opts: ["Cianuro", "Oligomicina", "Mon√≥xido de carbono (CO)", "Rotenona"], 
            a: "Cianuro", 
            exp: "El cianuro bloquea el Complejo IV instant√°neamente, deteniendo todo el consumo de ox√≠geno." 
        }
    ];

    // --- ASIGNAR IDs √öNICOS ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px; color:#6b7280;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // Checkbox Marcar
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) markedQuestions.add(item.id);
                else markedQuestions.delete(item.id);
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";
            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);

            // Pregunta
            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;

            // --- INSERCI√ìN DE DIAGRAMAS ---
            if (item.id === 1) { // Cadena Respiratoria
                 questionText.innerHTML += `<span class='img-tag'>

[Image of electron transport chain complexes]
</span>`;
            } else if (item.id === 5) { // Ciclo de Krebs inicio
                 questionText.innerHTML += `<span class='img-tag'>

[Image of citric acid cycle overview]
</span>`;
            } else if (item.id === 14) { // ATP Sintasa
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 43) { // Complejo PDH
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 20) { // Lanzaderas
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            }

            card.appendChild(questionText);

            // Opciones
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Explicaci√≥n:</strong> ${item.exp}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        failedQuestions.add(item.id);
                        
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) b.classList.add('correct');
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- Control Final ---
    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        if (mode === 'all') subset = quizData;
        else if (mode === 'marked') subset = quizData.filter(q => markedQuestions.has(q.id));
        else if (mode === 'failed') subset = quizData.filter(q => failedQuestions.has(q.id));
        else if (mode === 'failed_marked') subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));

        if(mode !== 'all') failedQuestions.clear(); 
        else {
            failedQuestions.clear();
            markedQuestions.clear();
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>
