<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bioquímica - Bloque 4 (151-200)</title>
    <style>
        :root {
            --primary: #4a148c;
            --success: #2e7d32;
            --error: #c62828;
            --bg: #f4f7f6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        /* Marcador flotante */
        .score-board {
            position: sticky;
            top: 10px;
            background: white;
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            margin-bottom: 30px;
            border: 1px solid #ddd;
        }

        .score-board h2 { margin: 0; font-size: 1.1rem; color: var(--primary); }
        .score-pill { font-weight: bold; background: var(--primary); color: white; padding: 5px 15px; border-radius: 20px; }

        /* Tarjetas */
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid transparent;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: flex-start;
        }

        .option-btn:hover:not(.disabled) {
            background: #f3e5f5;
            border-color: var(--primary);
        }

        .letter {
            font-weight: bold;
            color: var(--primary);
            margin-right: 10px;
            min-width: 20px;
        }

        /* Estilos de validación */
        .correct {
            background-color: #dcedc8 !important;
            border-color: var(--success) !important;
            color: #1b5e20;
        }

        .incorrect {
            background-color: #ffcdd2 !important;
            border-color: var(--error) !important;
            color: #b71c1c;
        }

        .disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e1f5fe;
            border-left: 4px solid #039be5;
            border-radius: 5px;
            display: none;
            font-size: 0.95rem;
        }

        .reset-btn {
            display: block;
            margin: 30px auto;
            padding: 15px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="score-board">
        <h2>Bioquímica (151-200)</h2>
        <div class="score-pill">Aciertos: <span id="score">0</span> / <span id="total">0</span></div>
    </div>

    <div id="quiz-container"></div>
    
    <button class="reset-btn" onclick="location.reload()">Mezclar y Reiniciar</button>
</div>

<script>
    // Datos corregidos y verificados
    const questionsDB = [
        {
            id: 151,
            q: "El Ca2+ en músculo sobre el complejo PDH (Piruvato Deshidrogenasa):",
            opts: [
                { t: "Inhibe fosfatasa", c: false },
                { t: "Activa quinasa", c: false },
                { t: "No tiene efecto", c: false },
                { t: "Solo en hígado", c: false },
                { t: "Activa fosfatasa -> PDH activa", c: true }
            ],
            exp: "El Ca2+ (señal de contracción) activa la fosfatasa para desfosforilar y activar la PDH, produciendo energía."
        },
        {
            id: 152,
            q: "¿Qué enzima convierte la glucosa en glucosa-6-fosfato?",
            opts: [
                { t: "Glucógeno sintasa", c: false },
                { t: "Fosfofructocinasa-1", c: false },
                { t: "Glucosa-6-fosfatasa", c: false },
                { t: "Glucógeno fosforilasa", c: false },
                { t: "Hexocinasa", c: true }
            ],
            exp: "Primera reacción de la glucólisis (gasto de ATP)."
        },
        {
            id: 153,
            q: "La glucoquinasa tiene importancia ya que cataliza la fosforilación:",
            opts: [
                { t: "De la glucosa en ayuno", c: false },
                { t: "De fructosa", c: false },
                { t: "Cuando falta hexoquinasa", c: false },
                { t: "En diabetes", c: false },
                { t: "De la glucosa en la hiperglucemia alimenticia", c: true }
            ],
            exp: "Tiene baja afinidad (alta Km), actuando solo cuando la glucosa es alta."
        },
        {
            id: 154,
            q: "Indica qué afirmación es INCORRECTA en relación a la glucoquinasa:",
            opts: [
                { t: "Tiene Km mayor que otras", c: false },
                { t: "Es una transferasa", c: false },
                { t: "En hígado y páncreas", c: false },
                { t: "Es inhibida por ATP", c: false },
                { t: "Muestra inhibición por la glucosa 6P", c: true }
            ],
            exp: "A diferencia de la hexoquinasa, la glucoquinasa NO se inhibe por su producto (G6P)."
        },
        {
            id: 155,
            q: "¿Qué enzima convierte el piruvato en lactato en condiciones anaerobias?",
            opts: [
                { t: "PDH", c: false },
                { t: "Citrato sintasa", c: false },
                { t: "PFK-1", c: false },
                { t: "Piruvato quinasa", c: false },
                { t: "Lactato deshidrogenasa (LDH)", c: true }
            ],
            exp: "Regenera NAD+ para mantener la glucólisis."
        },
        {
            id: 156,
            q: "¿Por qué se forma lactato en la glucólisis anaerobia?",
            opts: [
                { t: "Para oxidar piruvato", c: false },
                { t: "Para oxidar NADH", c: false },
                { t: "Para obtener energía extra", c: false },
                { t: "Para regenerar NAD+ y oxidar NADH (evitar bloqueo)", c: true },
                { t: "Ninguna de las anteriores", c: false }
            ],
            exp: "Esencial para que la GAP-deshidrogenasa siga funcionando sin oxígeno."
        },
        {
            id: 157,
            q: "¿Qué coenzima es clave en la conversión de piruvato a lactato?",
            opts: [
                { t: "NAD+", c: false },
                { t: "FADH2", c: false },
                { t: "CoA", c: false },
                { t: "PLP", c: false },
                { t: "NADH", c: true }
            ],
            exp: "El NADH cede sus electrones al piruvato."
        },
        {
            id: 158,
            q: "¿Qué ruta metabólica produce ATP sin oxígeno?",
            opts: [
                { t: "Beta-oxidación", c: false },
                { t: "Krebs", c: false },
                { t: "Fosforilación oxidativa", c: false },
                { t: "Vía pentosas", c: false },
                { t: "Glucólisis anaerobia", c: true }
            ],
            exp: "Producción neta de 2 ATP por glucosa."
        },
        {
            id: 159,
            q: "¿Qué enzima NO interviene en la glucólisis?",
            opts: [
                { t: "Glucoquinasa", c: false },
                { t: "PFK-1", c: false },
                { t: "Triosa isomerasa", c: false },
                { t: "Gliceraldehído-3-P-DH", c: false },
                { t: "Piruvato carboxilasa", c: true }
            ],
            exp: "La Piruvato Carboxilasa es la primera enzima de la Gluconeogénesis."
        },
        {
            id: 160,
            q: "¿En qué etapa de la glucólisis hay fosforilación a nivel de sustrato?",
            opts: [
                { t: "F6P a F1,6BP", c: false },
                { t: "2-PG a PEP", c: false },
                { t: "F1,6BP a triosas", c: false },
                { t: "GAP a 1,3BPG", c: false },
                { t: "Ácido 1,3 bifosfoglicérico a 3-fosfoglicérico", c: true }
            ],
            exp: "Generación directa de ATP por la Fosfoglicerato quinasa."
        },
        {
            id: 161,
            q: "Pasos de fosforilación a nivel de sustrato:",
            opts: [
                { t: "Glucosa a G6P", c: false },
                { t: "F6P a F1,6BP", c: false },
                { t: "GAP a DHAP", c: false },
                { t: "Hexoquinasa y PFK-1", c: false },
                { t: "1-3 BPG a 3-PG (y PEP a Piruvato)", c: true }
            ],
            exp: "Son los dos pasos donde se gana ATP."
        },
        {
            id: 162,
            q: "¿Cuáles son enzimas regulables en la glucólisis?",
            opts: [
                { t: "Piruvato quinasa", c: false },
                { t: "Fosfogliceratoquinasa", c: false },
                { t: "Fosfoglucomutasa", c: false },
                { t: "Solo Glucoquinasa", c: false },
                { t: "HK/GK, PFK-1 y Piruvato Quinasa", c: true }
            ],
            exp: "Las tres irreversibles: HK/GK, PFK-1, PK."
        },
        {
            id: 163,
            q: "¿Cuál es el principal inhibidor alostérico de la fosfofructocinasa-1 (PFK-1)?",
            opts: [
                { t: "ADP", c: false },
                { t: "AMP", c: false },
                { t: "NADH", c: false },
                { t: "Citrato", c: false },
                { t: "ATP", c: true }
            ],
            exp: "El ATP actúa como señal de alta energía, inhibiendo la vía."
        },
        {
            id: 164,
            q: "¿Cuál es el efecto del ATP sobre la PFK-1?",
            opts: [
                { t: "Activa", c: false },
                { t: "Sin efecto", c: false },
                { t: "Activa gluconeogénesis", c: false },
                { t: "Desfosforila", c: false },
                { t: "La inhibe", c: true }
            ],
            exp: "Reduce la afinidad de la enzima por la fructosa-6-P."
        },
        {
            id: 165,
            q: "En músculo, el H+ elevado (acidosis) durante ejercicio intenso sobre PFK-1:",
            opts: [
                { t: "Activa", c: false },
                { t: "No afecta", c: false },
                { t: "La degrada", c: false },
                { t: "La fosforila", c: false },
                { t: "Inhibe", c: true }
            ],
            exp: "Previene el daño por acidosis láctica excesiva."
        },
        {
            id: 166,
            q: "La PFK-1 hepática está activada por:",
            opts: [
                { t: "ATP", c: false },
                { t: "Citrato", c: false },
                { t: "H+", c: false },
                { t: "Alanina", c: false },
                { t: "Fructosa-2,6-bisfosfato", c: true }
            ],
            exp: "Es el activador alostérico más potente."
        },
        {
            id: 167,
            q: "La piruvato quinasa se activa por (Feed-forward):",
            opts: [
                { t: "Citrato", c: false },
                { t: "Alanina", c: false },
                { t: "ATP", c: false },
                { t: "NADH", c: false },
                { t: "Fructosa-1,6-bisfosfato", c: true }
            ],
            exp: "Activación por el producto de la PFK-1 para coordinar la vía."
        },
        {
            id: 168,
            q: "La alanina sobre la piruvato quinasa:",
            opts: [
                { t: "Activa", c: false },
                { t: "No afecta", c: false },
                { t: "Activa en hígado", c: false },
                { t: "Inhibe músculo", c: false },
                { t: "Inhibe", c: true }
            ],
            exp: "La alanina (que viene del piruvato) señala abundancia de precursores, inhibiendo la glucólisis."
        },
        {
            id: 169,
            q: "¿Qué enzima se inhibe ante la bajada del pH celular?",
            opts: [
                { t: "Glucógeno fosforilasa", c: false },
                { t: "PDH", c: false },
                { t: "PEPCK", c: false },
                { t: "Piruvato quinasa", c: false },
                { t: "Fosfofructoquinasa 1 muscular", c: true }
            ],
            exp: "Mecanismo de protección contra la acidosis."
        },
        {
            id: 170,
            q: "Fructosa-2,6-BP en hígado:",
            opts: [
                { t: "Activa FBPasa-1", c: false },
                { t: "Inhibe PFK-1", c: false },
                { t: "No afecta", c: false },
                { t: "Activa piruvato carboxilasa", c: false },
                { t: "Activa PFK-1", c: true }
            ],
            exp: "Señal de glucosa abundante que acelera la glucólisis."
        },
        {
            id: 171,
            q: "Respecto al regulador F-2,6-BP es cierto que:",
            opts: [
                { t: "Producto de modo fosfatasa", c: false },
                { t: "Síntesis por glucagón", c: false },
                { t: "Activa FBPasa", c: false },
                { t: "Actúa en músculo", c: false },
                { t: "Facilita la glucólisis", c: true }
            ],
            exp: "Al activar PFK-1 e inhibir FBPasa-1."
        },
        {
            id: 172,
            q: "El regulador hepático que coordina glucólisis/gluconeogénesis es:",
            opts: [
                { t: "Glucógeno sintasa", c: false },
                { t: "Piruvato carboxilasa", c: false },
                { t: "LDH", c: false },
                { t: "HK II", c: false },
                { t: "Enzima bifuncional PFK-2/FBPasa-2", c: true }
            ],
            exp: "Controla los niveles de F-2,6-BP."
        },
        {
            id: 173,
            q: "La insulina pone a la enzima bifuncional en modo:",
            opts: [
                { t: "Fosfatasa", c: false },
                { t: "Hidrolasa", c: false },
                { t: "Liasa", c: false },
                { t: "Isomerasa", c: false },
                { t: "Kinasa (Quinasa)", c: true }
            ],
            exp: "Desfosforila la enzima bifuncional, activando el dominio PFK-2."
        },
        {
            id: 174,
            q: "Tras la ingesta, la insulina favorecerá:",
            opts: [
                { t: "Fosforilación PFK-1", c: false },
                { t: "Actividad FBPasa-2", c: false },
                { t: "Conversión F26BP a F6P", c: false },
                { t: "Gluconeogénesis", c: false },
                { t: "La actividad fosfofructoquinasa-2 (PFK-2)", c: true }
            ],
            exp: "Aumentando F-2,6-BP y la glucólisis."
        },
        {
            id: 175,
            q: "El glucagón, vía PKA, sobre la piruvato quinasa hepática:",
            opts: [
                { t: "Activa fosforilando", c: false },
                { t: "Activa desfosforilando", c: false },
                { t: "No afecta", c: false },
                { t: "La degrada", c: false },
                { t: "Inhibe por fosforilación", c: true }
            ],
            exp: "Frena la glucólisis hepática en ayuno."
        },
        {
            id: 176,
            q: "La fructosa 1,6 bifosfato activa a la enzima:",
            opts: [
                { t: "Piruvato carboxilasa", c: false },
                { t: "PEPCK", c: false },
                { t: "G6Pasa", c: false },
                { t: "FBPasa-1", c: false },
                { t: "Piruvato quinasa", c: true }
            ],
            exp: "Activación anterógrada."
        },
        {
            id: 177,
            q: "En la glucogenogénesis la forma activada es:",
            opts: [
                { t: "Genera glucosa", c: false },
                { t: "Interviene fosforilasa", c: false },
                { t: "ADP-Glucosa", c: false },
                { t: "Glucosa-6-P", c: false },
                { t: "UDP-glucosa", c: true }
            ],
            exp: "Donante de glucosa para la síntesis."
        },
        {
            id: 178,
            q: "La enzima que transfiere residuos de glucosa al polímero de glucógeno es:",
            opts: [
                { t: "Transferasa", c: false },
                { t: "Fosforilasa", c: false },
                { t: "Fosfatasa", c: false },
                { t: "Glucogenina", c: false },
                { t: "Glucógeno sintasa", c: true }
            ],
            exp: "Forma enlaces alfa 1-4."
        },
        {
            id: 179,
            q: "Por degradación completa de una molécula de glucógeno se obtiene:",
            opts: [
                { t: "Solo G6P", c: false },
                { t: "Solo glucosa", c: false },
                { t: "G1P, G6P y Glucosa", c: false },
                { t: "G6P y Glucosa", c: false },
                { t: "Glucosa-1-fosfato y en menor proporción glucosa", c: true }
            ],
            exp: "90% G1P, 10% Glucosa libre (enzima desramificante)."
        },
        {
            id: 180,
            q: "La glucógeno sintasa (GS). ¿Cuál es FALSA?",
            opts: [
                { t: "Máxima actividad forma I", c: false },
                { t: "Forma D activa con G6P", c: false },
                { t: "Fosfatasa separa fosfórico", c: false },
                { t: "Paso de I a D catalizado por una kinasa", c: false },
                { t: "Transformación es un ciclo reversible simple", c: true }
            ],
            exp: "Son dos reacciones distintas (quinasa y fosfatasa), no una reacción reversible simple."
        },
        {
            id: 181,
            q: "En el metabolismo del glucógeno la insulina:",
            opts: [
                { t: "Inhibe PP1", c: false },
                { t: "Inhibe fosforilasa fosforilando", c: false },
                { t: "Activa quinasas", c: false },
                { t: "Degrada glucógeno", c: false },
                { t: "Activa a la glucógeno sintasa hepática", c: true }
            ],
            exp: "La insulina activa la fosfatasa PP1, que desfosforila y activa la GS."
        },
        {
            id: 182,
            q: "La adrenalina activa glucogenólisis mediante:",
            opts: [
                { t: "Tirosina-quinasa", c: false },
                { t: "GMPc", c: false },
                { t: "Ca2+", c: false },
                { t: "PP1", c: false },
                { t: "GPCR -> AMPc -> PKA", c: true }
            ],
            exp: " Cascada de señalización clásica."
        },
        {
            id: 183,
            q: "¿Qué hormona se libera en respuesta a la hipoglucemia?",
            opts: [
                { t: "Insulina", c: false },
                { t: "Somatostatina", c: false },
                { t: "Leptina", c: false },
                { t: "Tiroxina", c: false },
                { t: "Glucagón", c: true }
            ],
            exp: "Estimula la producción hepática de glucosa."
        },
        {
            id: 184,
            q: "¿Qué hormona activa la gluconeogénesis?",
            opts: [
                { t: "Insulina", c: false },
                { t: "Leptina", c: false },
                { t: "Tiroxina", c: false },
                { t: "Adrenalina", c: false },
                { t: "Glucagón", c: true }
            ],
            exp: "Aumenta la transcripción de PEPCK y activa FBPasa-2."
        },
        {
            id: 185,
            q: "¿Cuál de estas asociaciones es incorrecta?",
            opts: [
                { t: "Glucagón -> gluconeogénesis -> H", c: false },
                { t: "Adrenalina -> glucogenolisis -> H y M", c: false },
                { t: "Insulina -> captación glucosa -> M", c: false },
                { t: "Insulina -> síntesis glucógeno -> H y M", c: false },
                { t: "Glucagón -> cetogénesis -> Músculo", c: true }
            ],
            exp: "El glucagón actúa en Hígado y Adiposo, no en músculo. Además, la cetogénesis es hepática."
        },
        {
            id: 186,
            q: "En el metabolismo del glucógeno hepático el glucagón:",
            opts: [
                { t: "Activa sintasa", c: false },
                { t: "Inhibe fosforilasa", c: false },
                { t: "Inhibe quinasas", c: false },
                { t: "Degrada muscular", c: false },
                { t: "Inhibe a la PP1 (via inhibidor)", c: true }
            ],
            exp: "Impide que la fosfatasa revierta la acción de la PKA."
        },
        {
            id: 187,
            q: "En hipoglucemia, el glucógeno muscular no restaura la glucemia porque:",
            opts: [
                { t: "Glucagón inhibe", c: false },
                { t: "Adrenalina no estimula", c: false },
                { t: "AMPc solo hepático", c: false },
                { t: "Sí pasa", c: false },
                { t: "Falta Glucosa-6-Fosfatasa", c: true }
            ],
            exp: "El músculo carece de la enzima para liberar glucosa a sangre."
        },
        {
            id: 188,
            q: "¿Qué enzima es clave en la gluconeogénesis (inicio)?",
            opts: [
                { t: "Hexocinasa", c: false },
                { t: "Glucógeno sintasa", c: false },
                { t: "PFK-1", c: false },
                { t: "G6Pasa", c: false },
                { t: "Piruvato carboxilasa", c: true }
            ],
            exp: "Convierte piruvato en oxalacetato."
        },
        {
            id: 189,
            q: "En la formación de glucosa a partir de piruvato se necesita:",
            opts: [
                { t: "8 ATP", c: false },
                { t: "4 ATP", c: false },
                { t: "2 ATP", c: false },
                { t: "10 ATP", c: false },
                { t: "6 ATP (4 ATP + 2 GTP)", c: true }
            ],
            exp: "Coste energético de la gluconeogénesis."
        },
        {
            id: 190,
            q: "¿Qué moléculas intervienen en el paso de piruvato a fosfoenolpiruvato?",
            opts: [
                { t: "Oxalacetato", c: false },
                { t: "Succinato", c: false },
                { t: "Biotina con ATP", c: false },
                { t: "Todas", c: false },
                { t: "Oxalacetato y Biotina", c: true }
            ],
            exp: "Requiere carboxilación a oxalacetato (biotina) y luego descarboxilación."
        },
        {
            id: 191,
            q: "La enzima piruvato carboxilasa es esencial para:",
            opts: [
                { t: "Oxidación", c: false },
                { t: "Lactato", c: false },
                { t: "Lactato a piruvato", c: false },
                { t: "PEP a piruvato", c: false },
                { t: "Iniciar la gluconeogénesis", c: true }
            ],
            exp: "Paso de rodeo de la piruvato quinasa."
        },
        {
            id: 192,
            q: "El oxalacetato para atravesar la membrana mitocondrial debe transformarse en:",
            opts: [
                { t: "Piruvato", c: false },
                { t: "Lactato", c: false },
                { t: "Malonato", c: false },
                { t: "Fumarato", c: false },
                { t: "Malato", c: true }
            ],
            exp: " Lanzadera de malato-aspartato."
        },
        {
            id: 193,
            q: "PEP carboxiquinasa (PEPCK) es inhibida por:",
            opts: [
                { t: "ATP", c: false },
                { t: "Citrato", c: false },
                { t: "Alanina", c: false },
                { t: "NADH", c: false },
                { t: "ADP", c: true }
            ],
            exp: "Señal de baja energía inhibe la vía anabólica costosa."
        },
        {
            id: 194,
            q: "Piruvato carboxilasa se activa por:",
            opts: [
                { t: "ADP", c: false },
                { t: "AMP", c: false },
                { t: "Citrato", c: false },
                { t: "F-2,6-BP", c: false },
                { t: "Acetil-CoA", c: true }
            ],
            exp: "El Acetil-CoA indica necesidad de oxalacetato (para Krebs o Gluconeogénesis)."
        },
        {
            id: 195,
            q: "¿Qué reacción es un paso de la gluconeogénesis?",
            opts: [
                { t: "Transaminación", c: false },
                { t: "Citrato sintasa", c: false },
                { t: "Degradación Leucina", c: false },
                { t: "Lisina", c: false },
                { t: "Piruvato + ATP + CO2 -> Oxalacetato", c: true }
            ],
            exp: "Reacción de la piruvato carboxilasa."
        },
        {
            id: 196,
            q: "El ciclo de Rapoport-Luebering (2,3-BPG):",
            opts: [
                { t: "En hepatocito", c: false },
                { t: "Genera 2,3-BPG", c: false },
                { t: "Solo en hígado", c: false },
                { t: "A y C", c: false },
                { t: "En eritrocito y genera 2,3-BPG", c: true }
            ],
            exp: "Vía exclusiva del eritrocito para regular afinidad Hb."
        },
        {
            id: 197,
            q: "El ciclo de Rapoport-Luebering es:",
            opts: [
                { t: "Lipolítica", c: false },
                { t: "Síntesis grasas", c: false },
                { t: "Producción Hb", c: false },
                { t: "Ninguna", c: false },
                { t: "Una desviación de la vía glucolítica", c: true }
            ],
            exp: "Bypasea la reacción de la PGK (sin ganar ATP)."
        },
        {
            id: 198,
            q: "¿Qué órgano NO necesita insulina para captar glucosa?",
            opts: [
                { t: "Adiposo", c: false },
                { t: "Corazón", c: false },
                { t: "Músculo", c: false },
                { t: "Hipófisis", c: false },
                { t: "Eritrocitos (y Cerebro)", c: true }
            ],
            exp: "Usan GLUT-1 o GLUT-2/3 (independientes de insulina)."
        },
        {
            id: 199,
            q: "La entrada de glucosa en las células del cerebro viene determinada por:",
            opts: [
                { t: "Insulina", c: false },
                { t: "Adenilato ciclasa", c: false },
                { t: "Glucagón", c: false },
                { t: "A y B", c: false },
                { t: "El gradiente de concentración", c: true }
            ],
            exp: "Difusión facilitada constitutiva."
        },
        {
            id: 200,
            q: "¿Qué transportador de glucosa es insulino-dependiente?",
            opts: [
                { t: "GLUT-1", c: false },
                { t: "GLUT-2", c: false },
                { t: "GLUT-3", c: false },
                { t: "GLUT-5", c: false },
                { t: "GLUT-4", c: true }
            ],
            exp: "Se trasloca a la membrana en músculo y adiposo."
        }
    ];

    const letters = ['A', 'B', 'C', 'D', 'E'];
    let score = 0;

    // Función de mezcla (Fisher-Yates)
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function initQuiz() {
        const container = document.getElementById('quiz-container');
        document.getElementById('total').innerText = questionsDB.length;

        questionsDB.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            
            // Título
            const title = document.createElement('div');
            title.className = 'question-text';
            title.innerText = `${item.id}. ${item.q}`;
            card.appendChild(title);

            // Contenedor de opciones
            const optsContainer = document.createElement('div');
            optsContainer.className = 'options-grid';

            // Mezclar opciones
            const mixedOpts = shuffle([...item.opts]);

            mixedOpts.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                
                // Guardamos la respuesta correcta en el dataset (NO visible, solo lógica)
                btn.dataset.isCorrect = opt.c;

                btn.innerHTML = `<span class="letter">${letters[idx]})</span> ${opt.t}`;
                
                btn.onclick = () => handleAnswer(btn, card, opt.c, item.exp);
                
                optsContainer.appendChild(btn);
            });

            card.appendChild(optsContainer);

            // Explicación
            const expDiv = document.createElement('div');
            expDiv.className = 'explanation';
            // Clean up explanation tags
            let cleanExp = item.exp;
            if (item.exp.includes("[Image")) {
                 cleanExp = item.exp.replace(/\[Image.*?\]/g, "");
            }
            expDiv.innerHTML = `<strong>Explicación:</strong> ${cleanExp}`;
            card.appendChild(expDiv);

            container.appendChild(card);
        });
    }

    function handleAnswer(clickedBtn, card, isCorrect, explanation) {
        // Bloquear todos los botones de esta tarjeta
        const allBtns = card.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.classList.add('disabled'));

        if (isCorrect) {
            clickedBtn.classList.add('correct');
            score++;
            document.getElementById('score').innerText = score;
        } else {
            clickedBtn.classList.add('incorrect');
            // Buscar la correcta y marcarla en verde (usando el dataset, infalible)
            const correctBtn = Array.from(allBtns).find(b => b.dataset.isCorrect === "true");
            if (correctBtn) correctBtn.classList.add('correct');
        }

        card.querySelector('.explanation').style.display = 'block';
    }

    // Iniciar
    initQuiz();

</script>
</body>
</html>
