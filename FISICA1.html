<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Física Médica 2018</title>
    <style>
        :root {
            --primary: #5e35b1; /* Deep Purple */
            --secondary: #ede7f6;
            --accent: #7e57c2;
            --success: #43a047;
            --error: #e53935;
            --text: #263238;
            --bg-color: #f5f5f5;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding-top: 110px; /* Espacio para el header */
            padding-bottom: 60px;
        }

        /* HEADER FIJO */
        #header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #4527a0, #5e35b1);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
        }

        .header-content {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 1.4rem; font-weight: 700; }
        .score-badge { 
            background: rgba(255,255,255,0.2); 
            padding: 6px 16px; 
            border-radius: 20px; 
            font-weight: bold; 
            font-size: 1.1rem;
        }

        /* BARRA PROGRESO */
        #progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            position: absolute;
            bottom: 0;
            left: 0;
        }
        #progress-fill {
            height: 100%;
            background: #b39ddb;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* CONTENEDOR */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* TARJETAS */
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.04);
            border-top: 5px solid transparent;
            transition: transform 0.2s ease;
        }

        .card:hover { transform: translateY(-2px); }
        .card.correct { border-top-color: var(--success); }
        .card.incorrect { border-top-color: var(--error); }

        .question-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: #757575;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        /* OPCIONES */
        .options-grid {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            padding: 16px 20px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--accent);
            background-color: var(--secondary);
        }

        .option-btn.correct {
            background-color: #e8f5e9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #ffebee;
            border-color: var(--error);
            color: #b71c1c;
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.6;
        }

        /* FEEDBACK */
        .feedback {
            margin-top: 20px;
            padding: 15px 20px;
            background-color: #ede7f6;
            border-left: 5px solid var(--primary);
            border-radius: 4px;
            font-size: 0.95rem;
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .feedback strong { color: var(--primary); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* BOTÓN REINICIAR */
        .btn-reset {
            display: block;
            width: 250px;
            margin: 50px auto;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(94, 53, 177, 0.3);
            transition: transform 0.2s;
        }
        .btn-reset:hover { transform: scale(1.05); }

    </style>
</head>
<body>

    <div id="header-bar">
        <div class="header-content">
            <h1>Examen Física 2018</h1>
            <div class="score-badge">
                <span id="score">0</span> / <span id="total">0</span> Aciertos
            </div>
        </div>
        <div id="progress-container">
            <div id="progress-fill"></div>
        </div>
    </div>

    <div class="container" id="quiz-container">
        </div>

    <div class="container">
        <button class="btn-reset" onclick="location.reload()">Reiniciar Examen</button>
    </div>

    <script>
        // BASE DE DATOS DE PREGUNTAS
        // Respuestas inferidas por el experto (Profesor)
        const questionsDB = [
            { id: 1, q: "La variable termodinámica que no depende del tamaño ni de la cantidad de materia se denomina:", opts: {a:"Fija", b:"Extensiva", c:"Intensiva", d:"Adiabática"}, ans: "c", note: "Las variables intensivas (presión, temperatura) no dependen de la masa." },
            { id: 2, q: "La velocidad del sonido:", opts: {a:"Depende del medio por el que se propaga", b:"Siempre es la misma", c:"Es mayor en los sólidos que en los gases", d:"La a) y c)"}, ans: "d", note: "El sonido requiere un medio y viaja más rápido en medios más densos/elásticos (sólidos)." },
            { id: 3, q: "¿Qué radiaciones no ionizantes producen inducción de corrientes débiles?", opts: {a:"Térmicas", b:"No térmicas", c:"Ópticas", d:"La a) y c)"}, ans: "b", note: "Los campos de baja frecuencia (ELF - No térmicos) inducen corrientes." },
            { id: 4, q: "El color rojo, verde y azul coinciden en que:", opts: {a:"Se propagan en el vacío con la misma velocidad", b:"Poseen la misma energía", c:"Poseen la misma frecuencia", d:"Poseen la misma longitud de onda"}, ans: "a", note: "Todas las ondas electromagnéticas viajan a 'c' en el vacío." },
            { id: 5, q: "El espectro de la radiación emitida por un tubo de rayos X es:", opts: {a:"Continuo por la radiación de frenado", b:"Continuo formado exclusivamente...", c:"Discreto formado por la radiación característica", d:"La a) y c)"}, ans: "d", note: "Es una superposición del espectro continuo (Frenado) y el discreto (Característico)." },
            { id: 6, q: "La sección eficaz para el efecto fotoeléctrico varía aproximadamente:", opts: {a:"Con la energía como Z4", b:"Con la longitud de onda como 1/λ³", c:"Con la energía como 1/E³", d:"La a) y c)"}, ans: "d", note: "El efecto fotoeléctrico es proporcional a Z^4 (o Z^5) e inversamente proporcional al cubo de la energía." },
            { id: 7, q: "La masa de cualquier núcleo atómico es:", opts: {a:"Siempre inferior a la suma de las masas de los protones que la componen", b:"Siempre superior...", c:"Igual...", d:"Ninguna de las tres"}, ans: "a", note: "Es el defecto de masa, que se convierte en energía de enlace." },
            { id: 8, q: "Al aumentar la viscosidad de un fluido:", opts: {a:"El número de Reynolds aumenta", b:"Disminuye su velocidad crítica", c:"Aumenta su velocidad crítica", d:"El régimen siempre será laminar"}, ans: "c", note: "La velocidad crítica es proporcional a la viscosidad. A más viscosidad, más difícil es la turbulencia." },
            { id: 9, q: "Con respecto a la miopía es correcto decir:", opts: {a:"La potencia del ojo es menor que la del emétrope", b:"La potencia del ojo es mayor que la del ojo emétrope", c:"Las imágenes se forman detrás de la retina", d:"La b) y la c)"}, ans: "b", note: "El ojo miope es demasiado convergente (potente) o largo, enfocando delante de la retina." },
            { id: 10, q: "El complejo QRS en un electrocardiograma, se asocia con:", opts: {a:"Repolarización auricular y despolarización ventricular", b:"Inicio contracción auricular", c:"Inicio contracción ventricular", d:"Final contracción auricular"}, ans: "a", note: "Refleja la despolarización de los ventrículos (que oculta la repolarización auricular)." },
            { id: 13, q: "El filamento de un tubo de rayos x emite:", opts: {a:"Rayos x", b:"Electrones", c:"Rayos x característicos", d:"Ninguna"}, ans: "b", note: "Emite electrones por efecto termoiónico que luego chocan con el ánodo." },
            { id: 14, q: "Con cuál de estos nucleidos no se podrán realizar estudios de RM:", opts: {a:"1H", b:"16O", c:"31P", d:"23Na"}, ans: "b", note: "El Oxígeno-16 tiene número másico y atómico par, por lo que su espín neto es 0 (no sirve para RM)." },
            { id: "Xa", q: "Con el sistema A-Mode de modulación en amplitud, las interfases registran:", opts: {a:"Deflexiones horizontales", b:"Puntos luminosos", c:"Deflexiones verticales", d:"Depende"}, ans: "c", note: "Modo A (Amplitud) muestra picos o deflexiones verticales en una gráfica." },
            { id: "Xb", q: "Con el sistema B-Mode de registro de los ecos, las interfases se registran como:", opts: {a:"Deflexiones horizontales", b:"Puntos luminosos", c:"Deflexiones verticales", d:"Depende"}, ans: "b", note: "Modo B (Brillo) forma la imagen mediante puntos de distinta intensidad luminosa." },
            { id: 22, q: "Una onda longitudinal es:", opts: {a:"Dirección de vibración y propagación paralelas", b:"Atraviesa el medio", c:"El sonido", d:"La a) y c)"}, ans: "d", note: "El sonido es el ejemplo clásico de onda longitudinal." },
            { id: 23, q: "Cuando una onda se propaga en un medio disipativo su intensidad:", opts: {a:"Se anula", b:"Permanece constante", c:"Inversamente prop cuadrado distancia", d:"Decrece exponencialmente con la distancia"}, ans: "d", note: "Ley de atenuación exponencial (Beer-Lambert)." },
            { id: 27, q: "La figura representa la cabeza (Palanca). Las fuerzas F1, F2 y F3 son:", opts: {a:"Fuerza muscular, de contacto y gravitatoria", b:"Contacto, gravitatoria, muscular", c:"Gravitatoria, contacto, muscular", d:"Gravitatoria, muscular, contacto"}, ans: "a", note: "En la palanca de 1º género (cabeza): F1 es la potencia (músculos nuca), F2 el fulcro (atlas/contacto), F3 la resistencia (peso cabeza)." },
            { id: 28, q: "Capas hemirreductoras necesarias para reducir intensidad a menos de 1/30:", opts: {a:"2", b:"5", c:"3", d:"4"}, ans: "b", note: "2^4 = 16 (insuficiente), 2^5 = 32 (1/32 es menor que 1/30). Se necesitan 5." },
            { id: 29, q: "Al aumentar la frecuencia de un sonido, éste se hace:", opts: {a:"Menos intenso", b:"Más agudo", c:"Más intenso", d:"Más grave"}, ans: "b", note: "La frecuencia determina el tono: alta frecuencia = agudo." },
            { id: 30, q: "Según la distribución de iones cloro, estos presentan:", opts: {a:"Tendencia a entrar (potencial equilibrio)", b:"Tendencia a salir (potencial membrana)", c:"Dependerá equilibrio", d:"La a) y b)"}, ans: "d", note: "El gradiente químico empuja a entrar, el eléctrico a salir. Están cerca del equilibrio (Pasivo)." },
            { id: 31, q: "¿Qué es el índice UV?", opts: {a:"Cantidad eritema", b:"Capacidad protectora", c:"La cantidad de radiación UV a la que están expuestas las personas", d:"Medida FPS"}, ans: "c", note: "Es una medida de la intensidad de radiación UV en la superficie." },
            { id: 32, q: "El tejido muscular es:", opts: {a:"Material muy deformable, permite movimiento y no cumple la ley de Hooke", b:"Muy resistente", c:"Duro", d:"Cumple Hooke"}, ans: "a", note: "Los tejidos biológicos son viscoelásticos y tienen comportamiento no lineal (no Hooke)." },
            { id: 33, q: "¿En qué núclido se desintegra el 13N (Z=7) por emisión beta positiva?", opts: {a:"13C (Z=6)", b:"16O", c:"11B", d:"14N"}, ans: "a", note: "Beta+: p -> n. El número másico (A) se mantiene (13), Z baja 1 (7->6). Carbono-13." },
            { id: 34, q: "Los núcleos estables:", opts: {a:"Fuerzas electrostáticas no superan nucleares", b:"Mismo número n y p", c:"Van teniendo mayor número de neutrones que de protones a medida que Z aumenta", d:"La a) y c)"}, ans: "d", note: "Para mantener estabilidad contra la repulsión de protones, se necesitan más neutrones (exceso de neutrones)." },
            { id: 35, q: "La frecuencia de repetición de los pulsos depende del valor del:", opts: {a:"Potencial de acción", b:"Potencial de equilibrio", c:"Potencial de membrana (generador)", d:"Ninguna"}, ans: "c", note: "La amplitud del potencial generador (despolarización) se codifica en frecuencia de disparo." },
            { id: 37, q: "¿Qué es la longitud de onda?", opts: {a:"Distancia tiempo > T", b:"Distancia tiempo < T", c:"Distancia unidad tiempo", d:"La distancia entre dos puntos consecutivos que están en la misma fase"}, ans: "d", note: "Definición básica de longitud de onda (lambda)." },
            { id: 38, q: "Cuando el valor de CHR (Capa Hemirreductora) es muy pequeña, la radiación es:", opts: {a:"Muy penetrante", b:"Monoenergética", c:"Poco penetrante", d:"Regular"}, ans: "c", note: "Si una capa muy fina ya reduce la mitad, es que la radiación se frena fácil (poco penetrante)." },
            { id: 39, q: "¿Qué representa la siguiente figura (Dibujo 2 - Test horario/radios)?", opts: {a:"Miopía", b:"Astigmatismo", c:"Presbicia", d:"Daltonismo"}, ans: "b", note: "El test de las líneas radiales (reloj astigmático) detecta el astigmatismo." },
            { id: 40, q: "Cuando el valor de CHR es muy grande la radiación es:", opts: {a:"Muy penetrante", b:"Monoenergética", c:"Poco penetrante", d:"Regular"}, ans: "a", note: "Necesitas mucho espesor para frenarla -> Muy penetrante." },
            { id: 44, q: "El pulso de RF en una instalación de RM:", opts: {a:"Disminuye magnetización longitudinal", b:"Establece magnetización transversal", c:"Provoca precesión", d:"a) y b)"}, ans: "d", note: "El pulso de 90º abate la magnetización longitudinal al plano transversal." },
            { id: 45, q: "La desintegración por conversión interna:", opts: {a:"Supone que A se mantiene constante y Z también", b:"Emisión positrones", c:"Captura electrón", d:"Z disminuye"}, ans: "a", note: "El núcleo excitado cede energía a un electrón orbital. No cambia la composición nuclear (A y Z ctes)." },
            { id: 46, q: "En la emisión beta positiva:", opts: {a:"n -> p + e", b:"p -> n + e+ + v", c:"...", d:"..."}, ans: "b", note: "Un protón se convierte en neutrón emitiendo un positrón." },
            { id: 48, q: "Distancia entre un nodo y un nodo (onda estacionaria):", opts: {a:"Lambda/4", b:"Lambda/2", c:"...", d:"..."}, ans: "b", note: "La distancia entre nodos consecutivos es media longitud de onda." },
            { id: 49, q: "En una embolia pulmonar se produce:", opts: {a:"Aumento ventilación", b:"Aumento difusión", c:"Engrosamiento", d:"Disminución de la perfusión"}, ans: "d", note: "El coágulo bloquea el flujo sanguíneo (perfusión) a una zona ventilada (espacio muerto)." },
            { id: 50, q: "La distribución de antenas de telefonía móvil debe ser:", opts: {a:"Homogénea y que emitan la menor potencia posible", b:"Perimetral max potencia", c:"Homogénea max potencia", d:"Perimetral min potencia"}, ans: "a", note: "Muchas antenas de baja potencia (celdas pequeñas) reducen la exposición total." },
            { id: 51, q: "¿Qué radiación se propaga a más velocidad en el vacío?", opts: {a:"Sonido", b:"Ultrasonido", c:"ELF (Electromagnética)", d:"Todas igual"}, ans: "c", note: "Sonido/US no viajan en vacío. ELF son ondas EM, viajan a 'c'." },
            { id: 52, q: "La pulsioximetría por infrarrojo mide:", opts: {a:"Frecuencia", b:"Curva pulso", c:"Saturación O2", d:"Las tres anteriores"}, ans: "d", note: "Mide saturación y, derivado de la señal pulsátil, frecuencia y curva." },
            { id: 53, q: "Los haces de protones son radiaciones:", opts: {a:"No ionizantes", b:"Indirectamente ionizantes", c:"Directamente ionizantes", d:"A y C"}, ans: "c", note: "Las partículas cargadas (protones, electrones) ionizan directamente." },
            { id: 54, q: "Con el sistema B-mode, las interfases se registran como:", opts: {a:"Deflexiones", b:"Puntos luminosos", c:"Morfología", d:"La b) y la c)"}, ans: "d", note: "Forma la imagen anatómica (morfología) mediante brillo." },
            { id: 55, q: "Fluido real por un tubo:", opts: {a:"V media mitad de max", b:"Minima centro", c:"Maxima centro", d:"La a) y la c)"}, ans: "d", note: "Perfil parabólico (Poiseuille): Vmax en centro, Vmedia = Vmax/2." },
            { id: 56, q: "Emisión antenas telefonía:", opts: {a:"Potencia disminuye con distancia", b:"Entorno influye", c:"Cerca recibimos más del móvil que de la antena", d:"La a) y la c)"}, ans: "d", note: "La ley del inverso del cuadrado atenúa la señal de la antena. El móvil pegado a la oreja emite más intensidad local." },
            { id: 57, q: "Los sonidos y ultrasonidos se diferencian en:", opts: {a:"Armónico", b:"Son movimientos ondulatorios de distinta frecuencia", c:"No vacío", d:"La b) y la c)"}, ans: "d", note: "Distinta frecuencia, misma naturaleza mecánica (no vacío)." },
            { id: 58, q: "Las radiaciones ultravioletas pueden dañar:", opts: {a:"Piel", b:"Inmune", c:"Ojos", d:"Las 3 anteriores"}, ans: "d", note: "Eritema, cataratas, inmunosupresión local." },
            { id: 59, q: "Luz visible (Rojo vs Violeta):", opts: {a:"...", b:"Violeta mayor lambda", c:"Roja menor lambda", d:"La luz violeta es la más energética"}, ans: "d", note: "E = h*f. Violeta tiene mayor frecuencia -> mayor energía." },
            { id: 60, q: "Las radiaciones no ionizantes:", opts: {a:"Ionizan", b:"Efectos térmicos", c:"No excitan", d:"La b) y la c)"}, ans: "d", note: "Producen efectos térmicos (microondas) o corrientes (ELF). No ionizan." },
            { id: 61, q: "En Radiodiagnóstico se usan RX de baja energía (relativa) porque:", opts: {a:"Poco penetrantes", b:"Homogéneos", c:"Su coeficiente de absorción depende del absorbente (Efecto Fotoeléctrico)", d:"Ninguna"}, ans: "c", note: "El efecto fotoeléctrico (dominante a baja E) depende de Z^3, dando contraste hueso/tejido." },
            { id: 62, q: "El esfigmomanómetro se basa en:", opts: {a:"Mercurio", b:"Eléctricas", c:"Tensiones", d:"Las propiedades del flujo sanguíneo"}, ans: "d", note: "Turbulencia (ruidos de Korotkoff) al comprimir la arteria." },
            { id: 63, q: "El potencial generador se diferencia del de acción en que:", opts: {a:"No se propaga (es local)", b:"Transmite info", c:"Amplitud fija", d:"Las tres"}, ans: "a", note: "Es graduado y local, no se propaga largas distancias sin decrecer." },
            { id: 64, q: "Estenosis vaso (radio mitad). Velocidad:", opts: {a:"Doble", b:"Aumentará en 4 veces", c:"Mitad", d:"Constante"}, ans: "b", note: "Ecuación continuidad: A1*v1 = A2*v2. Si r se reduce a la mitad, Área se reduce a 1/4. Velocidad x4." },
            { id: 65, q: "Razón entre longitud de onda y periodo:", opts: {a:"Frecuencia angular", b:"Número ondas", c:"Frecuencia", d:"La velocidad de propagación"}, ans: "d", note: "v = lambda / T." },
            { id: 66, q: "Presión parcial CO2 aire alveolar:", opts: {a:"100", b:"80", c:"40 mm Hg", d:"20"}, ans: "c", note: "Valor fisiológico estándar." },
            { id: 67, q: "Si incremento energía potencial al salir un ión positivo es negativo:", opts: {a:"Equilibrio", b:"El ión tendrá tendencia a salir"}, ans: "b", note: "Si el cambio de energía es negativo (cuesta abajo), el proceso es espontáneo -> Sale." },
            { id: 72, q: "Suministrar sangre a capilares:", opts: {a:"Perfusión", b:"Ventilación", c:"Difusión", d:"Estenosis"}, ans: "a", note: "Definición de perfusión." },
            { id: 73, q: "La hadronterapia (protones) se caracteriza por:", opts: {a:"Energía al principio", b:"La mayor parte de la energía se deposita en los últimos mm (Pico de Bragg)", c:"Intermedios", d:"Ninguna"}, ans: "b", note: "Es la gran ventaja de los protones: dosis concentrada al final (tumor)." },
            { id: 74, q: "Variación de tensión tras sobrepasar umbral:", opts: {a:"Equilibrio", b:"Impulso", c:"Potencial de acción", d:"Membrana"}, ans: "c", note: "Disparo del todo o nada." },
            { id: 76, q: "La constante giromagnética:", opts: {a:"Cociente carga/masa (aprox)", b:"Masa/carga", c:"Inversa frecuencia", d:"La a) y la c)"}, ans: "d", note: "Relaciona momento magnético y angular. Fundamental para Larmor." },
            { id: 77, q: "Centro gravedad al levantar brazos:", opts: {a:"Izq", b:"Hacia arriba", c:"Abajo", d:"Der"}, ans: "b", note: "Al elevar masa (brazos), el centro de gravedad del conjunto sube." },
            { id: 78, q: "Energía transferida por diferencia temp:", opts: {a:"Calor", b:"Interna", c:"Trabajo", d:"Calórico"}, ans: "a", note: "Definición termodinámica de calor." },
            { id: 79, q: "Superficie apariencia azul:", opts: {a:"Absorbe todo", b:"Absorbe todas excepto la más corta (azul)", c:"Absorbe cortas", d:"Refleja largas"}, ans: "b", note: "Vemos el color que refleja. Azul es onda corta." },
            { id: 80, q: "Disminuye superficie líquido surfactante, tensión:", opts: {a:"Disminuye", b:"Cte", c:"Aumenta", d:"Anula"}, ans: "a", note: "El surfactante pulmonar reduce la tensión superficial drásticamente al comprimirse (espiración)." },
            { id: 81, q: "Frecuencia de Larmor depende de:", opts: {a:"Campo externo", b:"Cte", c:"Cte giromagnética", d:"La a) y c) son correctas"}, ans: "d", note: "w = gamma * B." },
            { id: 82, q: "Fluido ideal:", opts: {a:"...", b:"Incompresible, densidad no cambia, no viscosidad", c:"...", d:"..."}, ans: "b", note: "Modelo simplificado de Bernoulli." },
            { id: 83, q: "Huesos material:", opts: {a:"Elástico poco deformable no Hooke", b:"Elástico poco deformable y cumplen ley Hooke (región lineal)", c:"Simple", d:"..."}, ans: "b", note: "En cargas fisiológicas se comportan elásticamente según Hooke." },
            { id: 84, q: "Expansión gas, energía interna cte (Isoterma ideal). Trabajo:", opts: {a:"Mayor", b:"Igual que el calor absorbido", c:"Menor", d:"Cero"}, ans: "b", note: "1er Principio: Q = DeltaU + W. Si DeltaU=0, Q=W." },
            { id: 85, q: "Fuentes encapsuladas dentro del tumor:", opts: {a:"Ciberknife", b:"Hadronterapia", c:"Braquiterapia", d:"Tomoterapia"}, ans: "c", note: "Radioterapia interna o de corta distancia." },
            { id: 86, q: "Visión baja iluminación:", opts: {a:"Escotópica", b:"Binocular", c:"Fotópica", d:"3D"}, ans: "a", note: "Mediada por bastones." },
            { id: 87, q: "Gafas de cerca y lejos:", opts: {a:"...", b:"Miopía y presbicia", c:"...", d:"..."}, ans: "b", note: "Miopía (lejos mal) + Presbicia (cerca mal por edad)." },
            { id: 88, q: "Sale ión negativo, incremento energía negativo:", opts: {a:"Entrar", b:"El ión tendrá tendencia a salir de la misma", c:"...", d:"..."}, ans: "b", note: "Si el proceso libera energía (negativo), es espontáneo -> Sale." },
            { id: 89, q: "Bastones responsables de:", opts: {a:"Color", b:"Visión nocturna", c:"Enfocar", d:"Invertir"}, ans: "b", note: "Alta sensibilidad, baja luz, sin color." },
            { id: 90, q: "Sale ión negativo, incremento energía positivo:", opts: {a:"El ión tendrá tendencia a entrar en la misma", b:"...", c:"...", d:"..."}, ans: "a", note: "El proceso de salir cuesta energía (positivo), no es espontáneo. Lo espontáneo es lo contrario (entrar)." },
            { id: 91, q: "Células percepción color:", opts: {a:"Leucocitos", b:"Eritrocitos", c:"Bastones", d:"Conos"}, ans: "d", note: "Visión fotópica y cromática." },
            { id: 92, q: "Hadronterapia radiaciones de:", opts: {a:"...", b:"...", c:"...", d:"Partículas pesadas cargadas (protones/iones)"}, ans: "d", note: "Hadrones (bariones) cargados." },
            { id: 93, q: "Test circulo radios (reloj):", opts: {a:"Miopía", b:"Hiper", c:"Astigmatismo", d:"Presbicia"}, ans: "c", note: "Detecta asimetría en la potencia de los meridianos del ojo." },
            { id: 94, q: "Onda T ECG:", opts: {a:"...", b:"...", c:"...", d:"Repolarización ventricular"}, ans: "d", note: "Recuperación eléctrica de los ventrículos." },
            { id: 95, q: "Carecen conos 'L' (Rojo):", opts: {a:"...", b:"...", c:"...", d:"Protanopía"}, ans: "d", note: "Protos (primero/rojo), Deuteros (segundo/verde), Tritos (tercero/azul)." },
            { id: 96, q: "Ondas sonoras:", opts: {a:"Ondas longitudinales de presión (necesitan medio)", b:"EM", c:"Estacionarias", d:"..."}, ans: "a", note: "Mecánicas longitudinales." },
            { id: 97, q: "Líquido moja sólido:", opts: {a:"Cohesión > Adherencia", b:"...", c:"...", d:"Las fuerzas de adherencia son mayores que las de cohesión"}, ans: "d", note: "El líquido prefiere pegarse al sólido que a sí mismo." },
            { id: 98, q: "Tendencia entrar/salir iones:", opts: {a:"Equilibrio", b:"Acción", c:"Membrana", d:"La a) y c)"}, ans: "d", note: "Depende del gradiente electroquímico (diferencia entre potencial membrana y equilibrio)." },
            { id: 99, q: "Microondas compuestas por:", opts: {a:"Neutrones", b:"Electrones", c:"Fotones", d:"Protones"}, ans: "c", note: "Son ondas electromagnéticas (fotones)." },
            { id: 100, q: "Sale ión positivo, energía positiva:", opts: {a:"Salir", b:"Equilibrio", c:"...", d:"El ion tendrá tendencia a entrar en la misma"}, ans: "d", note: "Salir cuesta energía -> tiende a quedarse/entrar." }
        ];

        // LÓGICA DEL SIMULADOR
        let score = 0;
        let answeredCount = 0;
        const totalQuestions = questionsDB.length;

        const quizContainer = document.getElementById('quiz-container');
        const scoreSpan = document.getElementById('score');
        const totalSpan = document.getElementById('total');
        const progressFill = document.getElementById('progress-fill');

        function initQuiz() {
            totalSpan.textContent = totalQuestions;
            
            questionsDB.forEach(item => {
                // Crear Tarjeta
                const card = document.createElement('div');
                card.className = 'card';
                card.id = `q-${item.id}`;

                // Header Pregunta
                const header = document.createElement('div');
                header.className = 'question-header';
                header.innerHTML = `<span>Pregunta ${item.id}</span>`;
                card.appendChild(header);

                // Texto Pregunta
                const text = document.createElement('div');
                text.className = 'question-text';
                text.textContent = item.q;
                card.appendChild(text);

                // Opciones
                const grid = document.createElement('div');
                grid.className = 'options-grid';

                for (const [key, value] of Object.entries(item.opts)) {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `<strong>${key})</strong> ${value}`;
                    btn.onclick = () => checkAnswer(item, key, btn, card, grid);
                    grid.appendChild(btn);
                }
                card.appendChild(grid);

                // Feedback (Oculto)
                const feedback = document.createElement('div');
                feedback.className = 'feedback';
                feedback.innerHTML = `<strong>Respuesta Correcta: ${item.ans.toUpperCase()}</strong><br>${item.note}`;
                card.appendChild(feedback);

                quizContainer.appendChild(card);
            });
        }

        function checkAnswer(question, selected, btn, card, grid) {
            if (card.dataset.answered) return; // Evitar doble respuesta
            card.dataset.answered = 'true';
            answeredCount++;

            const allBtns = grid.querySelectorAll('.option-btn');
            const feedback = card.querySelector('.feedback');

            // Deshabilitar botones
            allBtns.forEach(b => b.classList.add('disabled'));

            if (selected === question.ans) {
                // Correcto
                score++;
                btn.classList.add('correct');
                card.classList.add('correct');
            } else {
                // Incorrecto
                btn.classList.add('incorrect');
                card.classList.add('incorrect');
                
                // Marcar la correcta
                allBtns.forEach(b => {
                    if (b.innerText.startsWith(question.ans + ')')) {
                        b.classList.add('correct');
                    }
                });
            }

            // Mostrar feedback
            feedback.style.display = 'block';

            // Actualizar Marcador
            scoreSpan.textContent = score;
            const progress = (answeredCount / totalQuestions) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // Iniciar
        initQuiz();

    </script>
</body>
</html>