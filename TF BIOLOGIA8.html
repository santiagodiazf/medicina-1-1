<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Bloque 8 - Ciclo y Muerte Celular</title>
    <style>
        :root {
            --primary: #c0392b; /* Rojo vitalidad/alerta */
            --secondary: #e74c3c;
            --success: #27ae60;
            --danger: #922b21;
            --warning: #f39c12;
            --light: #f9ebea;
            --dark: #641e16;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
            border-top: 5px solid var(--primary);
            min-height: 600px;
        }
        header {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h1 { color: var(--primary); margin: 0; font-size: 2.2rem; }
        .prof-info { font-style: italic; color: #7f8c8d; margin-top: 10px; }
        
        .status-panel {
            background: #f2d7d5;
            padding: 15px 25px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            margin-bottom: 25px;
            color: var(--dark);
            border: 1px solid #e6b0aa;
        }

        .question-card {
            display: none;
            position: relative; /* Para posicionar el marcador */
            animation: fadeIn 0.4s ease-out;
        }
        .question-card.active { display: block; }

        /* ESTILOS DEL MARCADOR */
        .bookmark-panel {
            position: absolute;
            top: 0;
            right: 0;
            background: #fff3e0;
            border: 1px solid #ffcc80;
            color: #ef6c00;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s;
            z-index: 10;
        }
        .bookmark-panel:hover { transform: scale(1.05); background: #ffe0b2; }
        .bookmark-panel input { cursor: pointer; transform: scale(1.3); }

        .question-header {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: var(--secondary);
            margin-bottom: 10px;
            letter-spacing: 1px;
            font-weight: 700;
            margin-top: 15px;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            color: #2c3e50;
            padding-right: 120px; /* Espacio para el marcador */
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid #d5d8dc;
            padding: 18px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            font-size: 1.05rem;
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: #fdedec;
            padding-left: 25px;
        }

        .option-btn:disabled { cursor: default; opacity: 0.8; }

        .correct {
            background-color: #d5f5e3 !important;
            border-color: var(--success) !important;
            color: #145a32;
        }

        .incorrect {
            background-color: #fadbd8 !important;
            border-color: var(--danger) !important;
            color: #7b241c;
        }

        .feedback-area {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 5px solid var(--dark);
            display: none;
        }
        .feedback-area.show { display: block; }
        .rationale { margin-top: 10px; font-size: 0.95rem; }

        .nav-btn {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 30px;
            font-size: 1.1rem;
            margin-top: 25px;
            cursor: pointer;
            float: right;
            transition: background 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .nav-btn:hover { background: var(--secondary); transform: translateY(-2px); }

        /* PANTALLA DE RESULTADOS */
        .results-view {
            text-align: center;
            display: none;
        }
        .final-score {
            font-size: 5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 2px 2px 0px #eee;
        }

        .stats-summary {
            background: #fff;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 20px;
            color: #555;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* GRID DE BOTONES DE ACCI√ìN */
        .action-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .action-btn:hover { transform: translateY(-3px); filter: brightness(110%); }
        .action-btn:disabled { background-color: #bdc3c7 !important; cursor: not-allowed; transform: none; filter: none; }

        .btn-restart { background-color: var(--primary); grid-column: span 2; }
        .btn-failed { background-color: var(--danger); }
        .btn-marked { background-color: var(--warning); color: #5d4037; }
        .btn-mixed { background-color: var(--dark); grid-column: span 2; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Examen Bloque 8: Ciclo y Muerte Celular</h1>
        <div class="prof-info">Facultad de Medicina de C√°diz - Prof. Meritxell Llorca Torralba</div>
    </header>

    <div class="status-panel" id="statusBar">
        <span id="q-progress">Cargando...</span>
        <span id="score-display">Aciertos: 0</span>
    </div>

    <div id="quiz-container"></div>

    <div id="results-screen" class="results-view">
        <h2>Sesi√≥n Finalizada</h2>
        <div class="final-score" id="final-number">0/0</div>
        <p id="final-text" style="font-size: 1.2rem; margin-bottom: 20px;"></p>
        
        <div class="stats-summary" id="stats-box"></div>

        <div class="action-grid">
            <button class="action-btn btn-restart" onclick="startQuiz('all')">üîÑ Reiniciar Test Completo</button>
            <button class="action-btn btn-failed" id="btn-failed" onclick="startQuiz('failed')">‚ùå Repetir Falladas</button>
            <button class="action-btn btn-marked" id="btn-marked" onclick="startQuiz('marked')">‚ö†Ô∏è Repetir Marcadas</button>
            <button class="action-btn btn-mixed" id="btn-mixed" onclick="startQuiz('mixed')">‚ùå + ‚ö†Ô∏è Repetir Falladas y Marcadas</button>
        </div>
    </div>
</div>

<script>
const quizData = [
    // --- 1.0 INTRODUCCI√ìN AL CICLO CELULAR (1-10) ---
    { topic: "Fases del Ciclo", question: "¬øCu√°les son las dos fases principales observables al microscopio en la vida de una c√©lula?", options: ["Fase G1 y Fase G2.", "Interfase y Fase M.", "Mitosis y Citoquinesis.", "Fase S y Fase M."], correct: 1, explanation: "La Fase M (divisi√≥n) y la Interfase (crecimiento) son las dos grandes divisiones observables." },
    { topic: "Interfase", question: "¬øQu√© fases componen la Interfase?", options: ["Profase, Metafase, Anafase.", "G1, S y G2.", "G0, M y S.", "Solo G1 y G2."], correct: 1, explanation: "La interfase es el largo periodo de preparaci√≥n que incluye el crecimiento (G1, G2) y la replicaci√≥n (S)." },
    { topic: "Fase S", question: "¬øQu√© evento definitorio ocurre exclusivamente en la Fase S (S√≠ntesis)?", options: ["La divisi√≥n del n√∫cleo.", "La segregaci√≥n de org√°nulos.", "La replicaci√≥n del ADN.", "El crecimiento celular r√°pido."], correct: 2, explanation: "La 'S' proviene de S√≠ntesis de ADN; es el momento √∫nico donde se duplica el genoma." },
    { topic: "Fase G1", question: "¬øCu√°l es la funci√≥n principal de la Fase G1?", options: ["Dividir los cromosomas.", "Crecimiento, actividad metab√≥lica y monitorizaci√≥n del entorno.", "Sintetizar ADN.", "Reparar microt√∫bulos."], correct: 1, explanation: "Es el intervalo donde la c√©lula crece y 'decide' si las condiciones son aptas para dividirse." },
    { topic: "Fase G2", question: "¬øQu√© ocurre en la Fase G2?", options: ["La c√©lula entra en reposo.", "Se separan las crom√°tidas.", "La c√©lula contin√∫a creciendo y se prepara para la entrada en mitosis.", "Se duplica el ADN."], correct: 2, explanation: "Es el segundo intervalo de crecimiento y control de seguridad post-replicaci√≥n antes de la divisi√≥n." },
    { topic: "Fase M", question: "¬øQu√© dos procesos comprende la Fase M?", options: ["Interfase y Mitosis.", "Mitosis (divisi√≥n nuclear) y Citoquinesis (divisi√≥n citoplasm√°tica).", "G1 y S.", "Meiosis I y II."], correct: 1, explanation: "La Fase M es la divisi√≥n celular completa: primero el n√∫cleo (mitosis) y luego el cuerpo celular (citoquinesis)." },
    { topic: "Duraci√≥n", question: "¬øCu√°l es t√≠picamente la fase m√°s larga del ciclo celular?", options: ["La Fase M.", "La Citoquinesis.", "La Interfase.", "La Anafase."], correct: 2, explanation: "La c√©lula pasa la mayor parte de su vida en interfase creciendo y funcionando; la divisi√≥n es breve." },
    { topic: "General", question: "¬øPor qu√© es crucial el sistema de control del ciclo celular?", options: ["Para generar ATP.", "Para asegurar la secuencia correcta de eventos y que cada paso se complete antes del siguiente.", "Para mover la c√©lula.", "Para sintetizar prote√≠nas."], correct: 1, explanation: "Evita errores catastr√≥ficos, como intentar separar cromosomas que a√∫n no se han duplicado." },
    { topic: "Estado G0", question: "¬øQu√© es el estado G0?", options: ["Una fase de muerte celular.", "Un estado de reposo especializado no proliferativo.", "Una fase de replicaci√≥n r√°pida.", "El inicio de la mitosis."], correct: 1, explanation: "Es una 'salida' del ciclo donde la c√©lula funciona pero no se divide (ej. neuronas, m√∫sculo)." },
    { topic: "General", question: "¬øQu√© suceder√≠a si el ciclo celular no estuviera regulado?", options: ["La c√©lula morir√≠a siempre.", "Podr√≠a dar lugar a crecimiento descontrolado (c√°ncer).", "Se detendr√≠a el metabolismo.", "Nada grave."], correct: 1, explanation: "El c√°ncer es esencialmente una enfermedad del ciclo celular descontrolado." },

    // --- 2.0 SISTEMA DE CONTROL (11-25) ---
    { topic: "Componentes", question: "¬øCu√°les son las prote√≠nas centrales del sistema de control del ciclo celular?", options: ["Las histonas.", "Las quinasas dependientes de ciclinas (Cdk) y las ciclinas.", "Las polimerasas.", "Las integrinas."], correct: 1, explanation: "El complejo Ciclina-Cdk es el motor molecular que impulsa las transiciones del ciclo." },
    { topic: "Cdk", question: "¬øQu√© caracter√≠stica tienen las Cdk (Quinasas dependientes de ciclina) a lo largo del ciclo?", options: ["Su concentraci√≥n var√≠a mucho.", "Su concentraci√≥n es constante, pero su actividad var√≠a c√≠clicamente.", "Desaparecen en mitosis.", "Siempre est√°n activas."], correct: 1, explanation: "Las Cdk est√°n siempre presentes, pero solo funcionan cuando se unen a una ciclina." },
    { topic: "Ciclinas", question: "¬øPor qu√© se llaman 'ciclinas'?", options: ["Porque tienen forma circular.", "Porque su concentraci√≥n aumenta y disminuye de forma c√≠clica durante el ciclo celular.", "Porque hacen girar a la c√©lula.", "Porque reciclan prote√≠nas."], correct: 1, explanation: "Se sintetizan y degradan en cada ciclo, regulando as√≠ la actividad de las Cdk." },
    { topic: "Activaci√≥n", question: "¬øQu√© es necesario para activar una Cdk?", options: ["Solo ATP.", "La uni√≥n de una ciclina espec√≠fica y (a menudo) fosforilaci√≥n activadora.", "La uni√≥n a ADN.", "Estar en el n√∫cleo."], correct: 1, explanation: "La uni√≥n a la ciclina es el primer paso, pero a menudo requiere ajustes finos por fosforilaci√≥n (Cdc25)." },
    { topic: "Degradaci√≥n", question: "¬øC√≥mo se desactivan bruscamente los complejos Ciclina-Cdk al final de una fase?", options: ["Por fosforilaci√≥n.", "Por degradaci√≥n proteol√≠tica de la ciclina (v√≠a ubiquitina-proteasoma).", "Por expulsi√≥n de la c√©lula.", "Por evaporaci√≥n."], correct: 1, explanation: "La destrucci√≥n r√°pida de la ciclina inactiva a la Cdk irreversiblemente, forzando el avance del ciclo." },
    { topic: "APC/C", question: "¬øQu√© complejo enzim√°tico marca a las ciclinas M y S para su destrucci√≥n?", options: ["El ribosoma.", "El complejo promotor de la anafase o ciclosoma (APC/C).", "La ADN polimerasa.", "El lisosoma."], correct: 1, explanation: "El APC/C a√±ade ubiquitina a las ciclinas, conden√°ndolas al proteasoma y permitiendo la salida de mitosis." },
    { topic: "Inhibidores", question: "¬øQu√© funci√≥n tienen las prote√≠nas inhibidoras de Cdk (CKIs) como p27?", options: ["Acelerar el ciclo.", "Actuar como 'freno de mano' bloqueando el complejo Ciclina-Cdk.", "Degradar ciclinas.", "Sintetizar ADN."], correct: 1, explanation: "Se unen al complejo activo y lo bloquean, deteniendo el ciclo si hay condiciones desfavorables." },
    { topic: "Regulaci√≥n", question: "¬øQu√© enzima inhibe a M-Cdk a√±adiendo un fosfato inhibidor ('freno')?", options: ["Cdc25.", "Wee1.", "PKA.", "Actina."], correct: 1, explanation: "La quinasa Wee1 mantiene inactivo el complejo M-Cdk hasta que la c√©lula est√° lista." },
    { topic: "Regulaci√≥n", question: "¬øQu√© enzima elimina el fosfato inhibidor activando a M-Cdk ('acelerador')?", options: ["Wee1.", "Cdc25 (fosfatasa).", "p53.", "APC/C."], correct: 1, explanation: "Cdc25 elimina el 'freno' puesto por Wee1, disparando la entrada en mitosis." },
    { topic: "Complejos", question: "¬øQu√© funci√≥n principal tiene el complejo S-Cdk?", options: ["Iniciar la mitosis.", "Iniciar la replicaci√≥n del ADN y prevenir la re-replicaci√≥n.", "Degradar la envoltura nuclear.", "Formar el huso."], correct: 1, explanation: "Activa la maquinaria de replicaci√≥n en el origen y asegura que se dispare una sola vez." },
    { topic: "Complejos", question: "¬øQu√© funci√≥n principal tiene el complejo M-Cdk?", options: ["Duplicar el ADN.", "Impulsar la entrada en Fase M (condensaci√≥n cromos√≥mica, huso, etc.).", "Mantener la c√©lula en G1.", "Sintetizar ribosomas."], correct: 1, explanation: "Fosforila m√∫ltiples dianas para orquestar la reorganizaci√≥n dram√°tica de la mitosis." },
    { topic: "Puntos de Control", question: "¬øQu√© verifica el punto de control G1 (Punto de Restricci√≥n o Start)?", options: ["Si los cromosomas est√°n alineados.", "Si el entorno es favorable (nutrientes, se√±ales) y el ADN est√° intacto.", "Si la replicaci√≥n ha terminado.", "Si la c√©lula es grande."], correct: 1, explanation: "Es el punto de 'no retorno'; si se pasa, la c√©lula se compromete a dividirse." },
    { topic: "Puntos de Control", question: "¬øQu√© verifica el punto de control G2/M?", options: ["Si hay nutrientes.", "Si todo el ADN se ha replicado completamente y no est√° da√±ado.", "Si los cromosomas est√°n en los polos.", "Si hay org√°nulos."], correct: 1, explanation: "Impide entrar en mitosis si el genoma no est√° listo o tiene errores." },
    { topic: "Puntos de Control", question: "¬øQu√© verifica el punto de control del Huso (en Metafase)?", options: ["Si el ADN est√° replicado.", "Si todos los cromosomas est√°n correctamente unidos al huso mit√≥tico.", "Si la c√©lula ha crecido.", "Si hay p53."], correct: 1, explanation: "Evita la segregaci√≥n desigual (aneuploid√≠a) asegurando que todos los cromosomas est√©n bi-orientados." },
    { topic: "p53", question: "¬øQu√© prote√≠na clave se activa ante da√±o en el ADN en G1 y detiene el ciclo?", options: ["p53.", "Ras.", "Myc.", "Actina."], correct: 0, explanation: "p53 es el 'guardi√°n del genoma'; induce p21 (inhibidor Cdk) para parar el ciclo o apoptosis si el da√±o es irreparable." },

    // --- 3.0 FASE S Y REPLICACI√ìN (26-35) ---
    { topic: "Inicio", question: "¬øD√≥nde se inicia la replicaci√≥n del ADN?", options: ["En los tel√≥meros.", "En los or√≠genes de replicaci√≥n (OR).", "En el centrosoma.", "En cualquier punto al azar."], correct: 1, explanation: "Son secuencias espec√≠ficas donde se une el complejo ORC." },
    { topic: "Control S", question: "¬øC√≥mo evita S-Cdk la re-replicaci√≥n del ADN (que se copie m√°s de una vez)?", options: ["Destruyendo el ADN.", "Fosforilando y marcando para degradaci√≥n a Cdc6 y helicasas, 'quemando el puente' tras el inicio.", "Cerrando el n√∫cleo.", "Parando el ciclo."], correct: 1, explanation: "Al eliminar la maquinaria de inicio (Cdc6) una vez usada, impide que se vuelva a ensamblar hasta el siguiente G1." },
    { topic: "Cohesinas", question: "¬øQu√© funci√≥n tienen las cohesinas durante la Fase S?", options: ["Sintetizar ADN.", "Mantener unidas a las crom√°tidas hermanas reci√©n formadas.", "Condensar los cromosomas.", "Separar los polos."], correct: 1, explanation: "Forman anillos que abrazan las dos copias de ADN, manteni√©ndolas juntas hasta la anafase." },
    { topic: "Maquinaria", question: "¬øQu√© enzima desenrolla la doble h√©lice para la replicaci√≥n?", options: ["ADN Helicasa.", "ADN Polimerasa.", "Ligasa.", "Cohesina."], correct: 0, explanation: "Abre la h√©lice gastando ATP, permitiendo el acceso de la polimerasa." },
    { topic: "Maquinaria", question: "¬øQu√© hace la ADN Polimerasa?", options: ["Une cromosomas.", "Sintetiza la nueva hebra de ADN usando el molde.", "Crea ARN.", "Degrada prote√≠nas."], correct: 1, explanation: "Es la enzima constructora principal del ADN." },
    { topic: "Maquinaria", question: "¬øQu√© es el fragmento de Okazaki?", options: ["Un error de replicaci√≥n.", "Un segmento corto de ADN sintetizado en la hebra retrasada.", "Una prote√≠na.", "Un tipo de ARN."], correct: 1, explanation: "La s√≠ntesis discontinua en la hebra retrasada genera estos fragmentos." },
    { topic: "Fidelidad", question: "¬øQu√© actividad de la ADN Polimerasa corrige errores durante la s√≠ntesis?", options: ["Helicasa.", "Correcci√≥n de pruebas (proofreading).", "Ligasa.", "Fosforilaci√≥n."], correct: 1, explanation: "Revisa y elimina nucle√≥tidos mal emparejados al instante." },
    { topic: "Problema extremos", question: "¬øQu√© enzima soluciona el acortamiento de los tel√≥meros en eucariotas?", options: ["Telomerasa.", "Ligasa.", "Primasa.", "Nucleasa."], correct: 0, explanation: "A√±ade secuencias repetitivas a los extremos para compensar la p√©rdida por replicaci√≥n." },
    { topic: "Topolog√≠a", question: "¬øQu√© hace la Topoisomerasa?", options: ["Copia el ADN.", "Alivia la tensi√≥n de torsi√≥n/superenrollamiento del ADN.", "Une fragmentos.", "Inicia el ciclo."], correct: 1, explanation: "Corta y vuelve a unir el ADN para relajar la tensi√≥n generada por la helicasa." },
    { topic: "Ligasa", question: "¬øQu√© funci√≥n cumple la ADN Ligasa?", options: ["Sellar las mellas (unir fragmentos) en el esqueleto de az√∫car-fosfato.", "Separar hebras.", "A√±adir cebadores.", "Corregir errores."], correct: 0, explanation: "Es el 'pegamento' molecular que une los fragmentos de Okazaki." },

    // --- 4.0 FASE M: MITOSIS Y CITOQUINESIS (36-55) ---
    { topic: "Condensinas", question: "¬øQu√© funci√≥n tienen las condensinas al inicio de la Fase M?", options: ["Mantener unidas las crom√°tidas.", "Ayudar a compactar los cromosomas para facilitar su segregaci√≥n.", "Replicar el ADN.", "Destruir la envoltura nuclear."], correct: 1, explanation: "Convierten la cromatina laxa en cromosomas mit√≥ticos compactos y manejables." },
    { topic: "Diferencia", question: "¬øCu√°l es la diferencia entre cohesinas y condensinas?", options: ["Son lo mismo.", "Cohesinas mantienen unidas a las hermanas; Condensinas compactan cada crom√°tida.", "Cohesinas rompen ADN; Condensinas lo pegan.", "Cohesinas act√∫an en G1; Condensinas en S."], correct: 1, explanation: "Cohesinas = pegamento entre hermanas; Condensinas = compactadoras." },
    { topic: "Profase", question: "¬øQu√© evento caracteriza a la Profase?", options: ["Los cromosomas se alinean.", "Los cromosomas se condensan y el huso mit√≥tico comienza a formarse.", "Se rompe la envoltura nuclear.", "Se divide el citoplasma."], correct: 1, explanation: "Es la etapa de preparaci√≥n visible: cromosomas visibles y separaci√≥n de centrosomas." },
    { topic: "Huso Mit√≥tico", question: "¬øDe qu√© est√° hecho el huso mit√≥tico?", options: ["Actina.", "Microt√∫bulos y prote√≠nas motoras.", "Filamentos intermedios.", "L√≠pidos."], correct: 1, explanation: "Es una m√°quina basada en microt√∫bulos que organiza y tira de los cromosomas." },
    { topic: "Prometafase", question: "¬øQu√© evento marca el inicio de la Prometafase?", options: ["La duplicaci√≥n del ADN.", "El desensamblaje brusco de la envoltura nuclear.", "La citoquinesis.", "La llegada a los polos."], correct: 1, explanation: "La rotura de la envoltura permite que los microt√∫bulos accedan y capturen los cromosomas." },
    { topic: "Cinetocoro", question: "¬øQu√© es el cinetocoro?", options: ["El centro de la c√©lula.", "Una estructura proteica en el centr√≥mero donde se unen los microt√∫bulos del huso.", "Un tipo de org√°nulo.", "El extremo del cromosoma."], correct: 1, explanation: "Es el punto de anclaje f√≠sico entre el cromosoma y las fibras del huso." },
    { topic: "Metafase", question: "¬øQu√© ocurre en la Metafase?", options: ["Los cromosomas se alinean en el ecuador de la c√©lula (placa metaf√°sica).", "Los cromosomas se separan.", "Se reforma el n√∫cleo.", "El ADN se replica."], correct: 0, explanation: "Es el momento de alineaci√≥n y tensi√≥n m√°xima antes de la separaci√≥n." },
    { topic: "Anafase", question: "¬øQu√© evento desencadena la Anafase?", options: ["La fosforilaci√≥n de p53.", "La destrucci√≥n de las cohesinas (por la separasa), permitiendo la separaci√≥n de crom√°tidas.", "La s√≠ntesis de ciclina.", "La entrada de calcio."], correct: 1, explanation: "Al romperse el 'pegamento' (cohesina), la tensi√≥n del huso arrastra a las hermanas hacia polos opuestos." },
    { topic: "Mecanismo Anafase", question: "¬øQu√© es la Anafase A?", options: ["La separaci√≥n de los polos.", "El acortamiento de los microt√∫bulos del cinetocoro, tirando de los cromosomas hacia el polo.", "La divisi√≥n del citoplasma.", "La condensaci√≥n."], correct: 1, explanation: "Es el movimiento de los cromosomas 'comiendo' el microt√∫bulo hacia el polo." },
    { topic: "Mecanismo Anafase", question: "¬øQu√© es la Anafase B?", options: ["El acortamiento de cinetocoros.", "La separaci√≥n (alejamiento) de los propios polos del huso, alargando la c√©lula.", "La replicaci√≥n.", "La profase."], correct: 1, explanation: "Los polos se empujan y separan, contribuyendo a la segregaci√≥n f√≠sica." },
    { topic: "APC/C", question: "¬øQu√© papel juega APC/C en la transici√≥n Metafase-Anafase?", options: ["Sintetiza ADN.", "Marca a la securina para degradaci√≥n, liberando as√≠ a la separasa.", "Inhibe la mitosis.", "Crea microt√∫bulos."], correct: 1, explanation: "Al destruir la securina (inhibidor), activa la separasa (tijera) para cortar las cohesinas." },
    { topic: "Telofase", question: "¬øQu√© ocurre en la Telofase?", options: ["Los cromosomas llegan a los polos, se descondensan y se reforma la envoltura nuclear.", "Los cromosomas se alinean.", "Se rompe el n√∫cleo.", "Se duplican los centrosomas."], correct: 0, explanation: "Es la fase de 'retorno a la normalidad', reconstruyendo los n√∫cleos hijos." },
    { topic: "Salida Mitosis", question: "¬øQu√© debe ocurrir para que la c√©lula salga de mitosis y termine la telofase?", options: ["Sintetizar m√°s ciclina.", "La degradaci√≥n de la ciclina M (inactivando M-Cdk).", "Aumentar la temperatura.", "Replicar ADN."], correct: 1, explanation: "Sin Cdk activa, las fosforilaciones mit√≥ticas se revierten, permitiendo el desensamblaje del huso y la citocinesis." },
    { topic: "Citoquinesis", question: "¬øQu√© estructura lleva a cabo la citoquinesis en c√©lulas animales?", options: ["El fragmoplasto.", "El anillo contr√°ctil de actina y miosina.", "Los microt√∫bulos.", "La pared celular."], correct: 1, explanation: "Un anillo bajo la membrana se contrae como un cintur√≥n, estrangulando la c√©lula en dos." },
    { topic: "Citoquinesis", question: "¬øQu√© GTPasa regula la contracci√≥n del anillo contr√°ctil?", options: ["Ran.", "Ras.", "RhoA.", "Rab."], correct: 2, explanation: "RhoA activa el ensamblaje y contracci√≥n de los filamentos de actina/miosina en el surco." },
    { topic: "Citoquinesis", question: "¬øCu√°ndo suele comenzar la citoquinesis?", options: ["En G1.", "En Profase.", "Generalmente en Anafase, terminando en Telofase.", "En fase S."], correct: 2, explanation: "Se solapa con las etapas finales de la mitosis." },
    { topic: "Org√°nulos", question: "¬øC√≥mo se distribuyen las mitocondrias durante la divisi√≥n?", options: ["Se disuelven.", "Se distribuyen al azar en cantidades suficientes a las c√©lulas hijas.", "Se quedan en una sola c√©lula.", "Se sintetizan de nuevo."], correct: 1, explanation: "Al haber muchas, la distribuci√≥n estoc√°stica asegura que ambas hijas reciban suficientes." },
    { topic: "Error", question: "¬øQu√© es una c√©lula multinucleada?", options: ["Una c√©lula sin n√∫cleo.", "El resultado de una mitosis sin citoquinesis.", "Una c√©lula muerta.", "Una bacteria."], correct: 1, explanation: "Si el n√∫cleo se divide pero el citoplasma no, se genera un sincitio." },
    { topic: "Error", question: "¬øQu√© es la aneuploid√≠a?", options: ["Tener el n√∫mero correcto de cromosomas.", "Tener un n√∫mero anormal de cromosomas por errores en la segregaci√≥n.", "Tener mitocondrias.", "Tener dos n√∫cleos."], correct: 1, explanation: "Es consecuencia de fallos en el checkpoint del huso (ej. S√≠ndrome de Down o c√©lulas cancerosas)." },
    { topic: "Centrosoma", question: "¬øCu√°ndo se duplica el centrosoma?", options: ["En fase M.", "Comienza en G1/S y termina en G2.", "Nunca se duplica.", "En telofase."], correct: 1, explanation: "Debe duplicarse antes de la mitosis para formar los dos polos del huso." },

    // --- 5.0 CONTROL EXTERNO Y APOPTOSIS (56-75) ---
    { topic: "Se√±ales", question: "¬øQu√© hacen los Mit√≥genos?", options: ["Inducen la muerte celular.", "Estimulan la divisi√≥n celular (superar el punto de control G1).", "Aumentan el tama√±o celular.", "Detienen el ciclo."], correct: 1, explanation: "Liberan el freno de G1 permitiendo la entrada en fase S." },
    { topic: "Se√±ales", question: "¬øQu√© hacen los Factores de Crecimiento?", options: ["Estimulan el aumento de masa y tama√±o celular (s√≠ntesis prote√≠nas).", "Dividen la c√©lula.", "Matan la c√©lula.", "Reparan el ADN."], correct: 0, explanation: "Promueven el anabolismo; una c√©lula puede dividirse sin crecer (haci√©ndose peque√±a) si faltan estos." },
    { topic: "Se√±ales", question: "¬øQu√© hacen los Factores de Supervivencia?", options: ["Suprimen la apoptosis (inhiben el suicidio celular).", "Causan necrosis.", "Aceleran la mitosis.", "Generan ATP."], correct: 0, explanation: "Bloquean la ruta de muerte por defecto, permitiendo que la c√©lula siga viva." },
    { topic: "PDGF", question: "¬øQu√© es el PDGF (Factor de Crecimiento Derivado de Plaquetas)?", options: ["Un veneno.", "Una se√±al que act√∫a como mit√≥geno y factor de crecimiento (pleiotr√≥pico) en la cicatrizaci√≥n.", "Una prote√≠na del citoesqueleto.", "Un l√≠pido."], correct: 1, explanation: "Estimula a fibroblastos para que se dividan y crezcan para reparar heridas." },
    { topic: "Inhibici√≥n", question: "¬øQu√© es la Miostatina?", options: ["Un factor que estimula el m√∫sculo.", "Una se√±al inhibidora que limita el crecimiento y proliferaci√≥n muscular.", "Una prote√≠na mitocondrial.", "Un tipo de actina."], correct: 1, explanation: "Frena el desarrollo muscular; su ausencia provoca musculatura gigante." },
    { topic: "Definici√≥n", question: "¬øQu√© diferencia clave hay entre Apoptosis y Necrosis?", options: ["La apoptosis es 'sucia' y la necrosis 'limpia'.", "La apoptosis es programada y limpia (sin inflamaci√≥n); la necrosis es accidental y provoca inflamaci√≥n.", "Son iguales.", "La necrosis gasta ATP."], correct: 1, explanation: "La apoptosis empaqueta el contenido; la necrosis rompe la c√©lula vertiendo t√≥xicos." },
    { topic: "Ejecutores", question: "¬øQu√© proteasas ejecutan la apoptosis?", options: ["Caspasas.", "Quinasas.", "Ligasas.", "Polimerasas."], correct: 0, explanation: "Son las enzimas que cortan las prote√≠nas celulares para desmantelar la c√©lula ordenadamente." },
    { topic: "Activaci√≥n", question: "¬øC√≥mo se activan las caspasas?", options: ["Por fosforilaci√≥n.", "Por corte proteol√≠tico en cascada (procaspasas -> caspasas activas).", "Por uni√≥n a ADN.", "Por calor."], correct: 1, explanation: "Una caspasa iniciadora activa muchas ejecutoras, amplificando la se√±al de muerte." },
    { topic: "Bcl2", question: "¬øQu√© regula la familia de prote√≠nas Bcl2?", options: ["La mitosis.", "La v√≠a intr√≠nseca (mitocondrial) de la apoptosis.", "La s√≠ntesis de prote√≠nas.", "La citoquinesis."], correct: 1, explanation: "Controlan la permeabilidad de la membrana mitocondrial externa." },
    { topic: "Bcl2", question: "¬øQu√© efecto tienen Bax y Bak (familia Bcl2)?", options: ["Son anti-apopt√≥ticos.", "Son pro-apopt√≥ticos: liberan citocromo c de la mitocondria.", "Reparan el ADN.", "Estimulan el crecimiento."], correct: 1, explanation: "Forman canales en la mitocondria para dejar salir el citocromo c, activando la muerte." },
    { topic: "Bcl2", question: "¬øQu√© efecto tiene la prote√≠na Bcl2 propiamente dicha?", options: ["Es pro-apopt√≥tica.", "Es anti-apopt√≥tica: bloquea a Bax/Bak.", "Es una caspasa.", "Es un mit√≥geno."], correct: 1, explanation: "Inhibe la muerte celular preservando la integridad mitocondrial." },
    { topic: "Citocromo c", question: "¬øQu√© papel juega el Citocromo c en la apoptosis?", options: ["Transporta electrones.", "Al salir al citosol, activa el ensamblaje del apoptosoma y la cascada de caspasas.", "Repara la membrana.", "Sintetiza ATP."], correct: 1, explanation: "Es el gatillo citos√≥lico que activa las caspasas iniciadoras (v√≠a intr√≠nseca)." },
    { topic: "V√≠a Extr√≠nseca", question: "¬øQu√© activa la v√≠a extr√≠nseca de la apoptosis?", options: ["Da√±o interno.", "Receptores de muerte (ej. Fas) en la superficie celular activados por otras c√©lulas (ej. linfocitos).", "Falta de glucosa.", "Estr√©s del RE."], correct: 1, explanation: "Es la orden de muerte que viene 'de fuera', por ejemplo, del sistema inmune." },
    { topic: "Importancia", question: "¬øPor qu√© es necesaria la apoptosis en el desarrollo?", options: ["Para matar al embri√≥n.", "Para esculpir estructuras (ej. dedos) y eliminar c√©lulas sobrantes (ej. neuronas extra).", "Para generar energ√≠a.", "No es necesaria."], correct: 1, explanation: "Elimina el tejido interdigital y ajusta el n√∫mero de c√©lulas nerviosas a sus dianas." },
    { topic: "Fagocitosis", question: "¬øQu√© ocurre con los cuerpos apopt√≥ticos (restos de la c√©lula muerta)?", options: ["Se pudren.", "Son fagocitados r√°pidamente por macr√≥fagos o c√©lulas vecinas (limpieza).", "Infectan otras c√©lulas.", "Se convierten en virus."], correct: 1, explanation: "La eliminaci√≥n r√°pida evita la respuesta inflamatoria y autoinmune." },
    { topic: "C√°ncer", question: "¬øQu√© relaci√≥n tiene p53 con el c√°ncer?", options: ["p53 causa c√°ncer.", "La p√©rdida de funci√≥n de p53 permite que c√©lulas con ADN da√±ado se dividan, promoviendo el c√°ncer.", "p53 repara mitocondrias.", "No tiene relaci√≥n."], correct: 1, explanation: "p53 es el supresor tumoral m√°s importante; si falla, no hay freno ante el da√±o gen√©tico." },
    { topic: "Mit√≥genos", question: "¬øQu√© v√≠a de se√±alizaci√≥n suelen activar los mit√≥genos?", options: ["V√≠a de la muerte.", "V√≠a MAP-quinasa (Ras-MAPK) para activar ciclinas G1.", "V√≠a de degradaci√≥n.", "V√≠a de secreci√≥n."], correct: 1, explanation: "Esta cascada lleva a la s√≠ntesis de ciclinas G1, iniciando el ciclo." },
    { topic: "Rb", question: "¬øQu√© hace la prote√≠na Retinoblastoma (Rb)?", options: ["Estimula la divisi√≥n.", "Inhibe la transcripci√≥n de genes necesarios para la fase S (es un freno).", "Sintetiza ADN.", "Degrada ciclinas."], correct: 1, explanation: "Los mit√≥genos inactivan a Rb (liberando el freno) para permitir la proliferaci√≥n." },
    { topic: "Da√±o ADN", question: "¬øQu√© ocurre si el da√±o en el ADN es irreparable en G1?", options: ["La c√©lula entra en fase S igualmente.", "p53 induce la apoptosis.", "La c√©lula se hace m√°s grande.", "Se repara sola."], correct: 1, explanation: "Para proteger al organismo, p53 ordena el suicidio de la c√©lula si no puede arreglarla." },
    { topic: "Resumen", question: "¬øCu√°l es el objetivo final de todo este sistema de regulaci√≥n?", options: ["Gastar energ√≠a.", "Mantener la homeostasis tisular (equilibrio entre nacimiento y muerte celular).", "Hacer c√©lulas gigantes.", "Evitar la evoluci√≥n."], correct: 1, explanation: "Asegura que el organismo tenga el n√∫mero correcto de c√©lulas sanas en el lugar adecuado." }
];

// --- GESTI√ìN DE ESTADO ---
quizData.forEach(q => {
    q.isMarked = false;
    q.userCorrect = null;
});

let activeIndices = []; 
let currentPlaylistIndex = 0;
let sessionScore = 0;
let answered = false;

document.addEventListener('DOMContentLoaded', () => {
    startQuiz('all');
});

function startQuiz(mode) {
    activeIndices = [];

    if (mode === 'all') {
        quizData.forEach(q => q.userCorrect = null); // Resetear respuestas
        // Opcional: resetear marcas con quizData.forEach(q => q.isMarked = false);
        activeIndices = quizData.map((_, i) => i);
    } 
    else if (mode === 'failed') {
        activeIndices = quizData.map((q, i) => q.userCorrect === false ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'marked') {
        activeIndices = quizData.map((q, i) => q.isMarked ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'mixed') {
        activeIndices = quizData.map((q, i) => (q.userCorrect === false || q.isMarked) ? i : -1).filter(i => i !== -1);
    }

    if (activeIndices.length === 0) {
        alert("No hay preguntas en esta categor√≠a.");
        return;
    }

    currentPlaylistIndex = 0;
    sessionScore = 0;
    
    document.getElementById('results-screen').style.display = 'none';
    document.getElementById('quiz-container').style.display = 'block';
    document.getElementById('statusBar').style.display = 'flex';
    
    loadQuestion();
}

function loadQuestion() {
    answered = false;
    const realIndex = activeIndices[currentPlaylistIndex];
    const q = quizData[realIndex];
    
    document.getElementById('q-progress').innerText = `Pregunta ${currentPlaylistIndex + 1} de ${activeIndices.length}`;
    document.getElementById('score-display').innerText = `Aciertos: ${sessionScore}`;

    const container = document.getElementById('quiz-container');
    const checkedAttr = q.isMarked ? 'checked' : '';

    let html = `
        <div class="question-card active">
            <label class="bookmark-panel">
                <input type="checkbox" onchange="toggleMark(${realIndex}, this)" ${checkedAttr}>
                <span>Marcar</span>
            </label>

            <div class="question-header">${q.topic}</div>
            <div class="question-text">${q.question}</div>
            <div class="options-list">
                ${q.options.map((opt, i) => `
                    <button class="option-btn" onclick="checkAnswer(${i}, ${q.correct}, this, ${realIndex})">
                        ${String.fromCharCode(65+i)}. ${opt}
                    </button>
                `).join('')}
            </div>
            <div class="feedback-area" id="feedback"></div>
            <button class="nav-btn" id="next-btn" onclick="nextQuestion()">Siguiente</button>
        </div>
    `;
    
    container.innerHTML = html;
}

function toggleMark(realIndex, checkbox) {
    quizData[realIndex].isMarked = checkbox.checked;
}

function checkAnswer(selected, correct, btn, realIndex) {
    if(answered) return;
    answered = true;

    const allBtns = document.querySelectorAll('.option-btn');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');

    allBtns.forEach(b => b.disabled = true);

    if(selected === correct) {
        sessionScore++;
        quizData[realIndex].userCorrect = true;
        btn.classList.add('correct');
        feedback.innerHTML = `<strong style="color:var(--success)">¬°Correcto!</strong> <div class="rationale">${quizData[realIndex].explanation}</div>`;
    } else {
        quizData[realIndex].userCorrect = false;
        btn.classList.add('incorrect');
        allBtns[correct].classList.add('correct');
        feedback.innerHTML = `<strong style="color:var(--danger)">Incorrecto.</strong> <div class="rationale">${quizData[realIndex].explanation}</div>`;
    }

    feedback.classList.add('show');
    nextBtn.style.display = 'block';
    document.getElementById('score-display').innerText = `Aciertos: ${sessionScore}`;
}

function nextQuestion() {
    if(currentPlaylistIndex < activeIndices.length - 1) {
        currentPlaylistIndex++;
        loadQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    document.getElementById('statusBar').style.display = 'none';
    document.getElementById('quiz-container').style.display = 'none';
    document.getElementById('results-screen').style.display = 'block';
    
    document.getElementById('final-number').innerText = `${sessionScore} / ${activeIndices.length}`;
    
    const percent = Math.round((sessionScore / activeIndices.length) * 100);
    let msg = "";
    if(percent >= 90) msg = "¬°Excelente!";
    else if(percent >= 70) msg = "¬°Muy bien!";
    else if(percent >= 50) msg = "Aprobado.";
    else msg = "Necesitas repasar.";
    
    document.getElementById('final-text').innerText = `${percent}% - ${msg}`;

    // Stats
    const totalFailed = quizData.filter(q => q.userCorrect === false).length;
    const totalMarked = quizData.filter(q => q.isMarked === true).length;
    const totalMixed = quizData.filter(q => q.userCorrect === false || q.isMarked).length;

    document.getElementById('stats-box').innerHTML = `
        <strong>Resumen Global:</strong><br>
        Marcadas: ${totalMarked} | Falladas: ${totalFailed}
    `;

    document.getElementById('btn-failed').disabled = (totalFailed === 0);
    document.getElementById('btn-marked').disabled = (totalMarked === 0);
    document.getElementById('btn-mixed').disabled = (totalMixed === 0);
    
    document.getElementById('btn-failed').innerText = `‚ùå Repetir Falladas (${totalFailed})`;
    document.getElementById('btn-marked').innerText = `‚ö†Ô∏è Repetir Marcadas (${totalMarked})`;
}
</script>

</body>
</html>
