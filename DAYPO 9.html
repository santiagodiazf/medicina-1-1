<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bloque IX: Nucle√≥tidos y Pentosas</title>
    <style>
        :root {
            --primary: #db2777; /* Rosa Fucsia */
            --primary-dark: #be185d;
            --primary-light: #fce7f3;
            --bg: #fdf2f8;
            --text: #831843;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary-dark);
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            display: inline-block;
            width: 100%;
        }

        .question-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .question-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* --- Checkbox para Marcar --- */
        .mark-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid #fbcfe8;
            padding-bottom: 10px;
        }
        .mark-container input {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: var(--primary);
        }
        .mark-container label {
            cursor: pointer;
        }

        .question-header {
            font-size: 0.85em;
            color: #be185d;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #831843;
            line-height: 1.5;
        }

        /* Etiquetas para diagramas */
        .img-tag {
            display: block;
            margin-top: 15px;
            padding: 12px;
            background-color: #fce7f3;
            border-left: 5px solid #db2777;
            color: #9d174d;
            font-size: 0.95em;
            font-weight: 500;
            border-radius: 0 6px 6px 0;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1em;
            color: #374151;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary-dark);
            padding-left: 25px; /* Efecto desplazamiento */
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #064e3b !important;
            font-weight: 600;
        }

        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        /* Caja de Explicaci√≥n */
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #fdf2f8;
            border-left: 5px solid var(--primary);
            border-radius: 6px;
            display: none;
            font-size: 0.95em;
            color: #831843;
            animation: slideDown 0.3s ease-out;
        }
        .explanation.visible {
            display: block;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- √Årea de Controles --- */
        #controls-area {
            margin-top: 50px;
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary);
        }

        .action-btn {
            background: var(--primary); color: white; border: none;
            padding: 12px 25px; font-size: 1.05em; border-radius: 8px;
            cursor: pointer; margin: 8px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .action-btn:hover { 
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .restart-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-options button {
            width: 100%;
            background: #4b5563;
        }
        .restart-options button:hover { background: #1f2937; }
        .restart-options button:first-child { background: var(--primary); }

    </style>
</head>
<body>

    <h1>Bloque IX: Nucle√≥tidos y Pentosas</h1>
    <div style="text-align: center; color: #9d174d; margin-bottom: 30px;">
        √Ålvaro Cond√≥n | S√≠ntesis de Novo, Recuperaci√≥n y Ruta de las Pentosas
    </div>
    
    <div id="quiz-container"></div>

    <div id="controls-area">
        <button id="finish-btn" class="action-btn" onclick="showEndOptions()">üèÅ Finalizar revisi√≥n</button>
        
        <div id="restart-menu" class="restart-options">
            <h3>Resultados de la sesi√≥n</h3>
            <p id="stats-summary"></p>
            <button class="action-btn" onclick="restartQuiz('all')">üîÑ Rehacer todo el test</button>
            <button class="action-btn" onclick="restartQuiz('marked')">üîñ Repasar marcadas</button>
            <button class="action-btn" onclick="restartQuiz('failed')">‚ùå Repasar falladas</button>
            <button class="action-btn" onclick="restartQuiz('failed_marked')">‚ö†Ô∏è Falladas + Marcadas</button>
        </div>
    </div>

<script>
    const quizData = [
        { 
            q: "En la s√≠ntesis de nucle√≥tidos de purina, son precursores:", 
            opts: ["El √°cido asp√°rtico.", "La glutamina.", "La coenzima THB.", "√Åcido asp√°rtico y Glutamina.", "Todas son ciertas."], 
            a: "√Åcido asp√°rtico y Glutamina.", 
            exp: "La purina se construye √°tomo a √°tomo. El N1 viene del aspartato, N3 y N9 de la glutamina, y carbonos y nitr√≥genos adicionales de la glicina, CO2 y N10-formil-THF." 
        },
        { 
            q: "El producto final del catabolismo de los nucle√≥tidos de purina es:", 
            opts: ["Acetil-CoA.", "√Åcido √∫rico.", "√Åcido pir√∫vico.", "√Åcido ox√°lico.", "√Åcido p√∫rico."], 
            a: "√Åcido √∫rico.", 
            exp: "En humanos, las purinas se degradan a xantina y finalmente a √°cido √∫rico, que se excreta en la orina." 
        },
        { 
            q: "En la s√≠ntesis de nucle√≥tidos de pirimidina, son precursores:", 
            opts: ["Aspartato.", "Bicarbonato.", "Glutamina.", "Todas son ciertas.", "S√≥lo son ciertas Aspartato y Glutamina."], 
            a: "Todas son ciertas.", 
            exp: "El anillo se forma a partir de Carbamil-fosfato (hecho de Bicarbonato y Glutamina) y Aspartato." 
        },
        { 
            q: "El fosfato de carbamilo interviene en la s√≠ntesis de:", 
            opts: ["√Åcido √∫rico.", "Nucle√≥tidos de pirimidina.", "Nucle√≥tidos de purina.", "Creatina.", "Ninguna es cierta."], 
            a: "Nucle√≥tidos de pirimidina.", 
            exp: "Es la pieza inicial del anillo de pirimidina (formada por la CPS II citos√≥lica)." 
        },
        { 
            q: "El intermediario en la s√≠ntesis de los nucle√≥tidos p√∫ricos es:", 
            opts: ["AMP.", "IMP.", "OMP.", "CMP.", "GMP."], 
            a: "IMP.", 
            exp: "El Inosinato (IMP) es el primer nucle√≥tido con el anillo pur√≠nico completo, precursor com√∫n de AMP y GMP." 
        },
        { 
            q: "En el IMP, el carbono 6 de su base nitrogenada procede:", 
            opts: ["De la glicina.", "Del √°cido asp√°rtico.", "Del di√≥xido de carbono.", "Ninguna es cierta.", "De la glicina y el √°cido asp√°rtico."], 
            a: "Del di√≥xido de carbono.", 
            exp: "Proviene del CO2 (o bicarbonato) incorporado en la reacci√≥n de la AIR carboxilasa." 
        },
        { 
            q: "El intermediario en la s√≠ntesis de los nucle√≥tidos de pirimidina es:", 
            opts: ["AMP.", "IMP.", "OMP.", "CMP.", "GMP."], 
            a: "OMP.", 
            exp: "El Orotidin-monofosfato (OMP) es el primer nucle√≥tido formado tras unir el orotato al PRPP." 
        },
        { 
            q: "El producto final del catabolismo de los nucle√≥tidos pririmid√≠nicos es:", 
            opts: ["√Åcido √∫rico.", "Beta-alanina.", "Timina.", "Uracilo.", "Todas son ciertas."], 
            a: "Beta-alanina.", 
            exp: "La degradaci√≥n de Citosina y Uracilo da Beta-alanina; la de Timina da Beta-aminoisobutirato." 
        },
        { 
            q: "El adenilsuccinato se forma en la reacci√≥n entre el √°cido asp√°rtico y:", 
            opts: ["AMP.", "TMP.", "GMP.", "XMP.", "IMP."], 
            a: "IMP.", 
            exp: "Es el paso intermedio para convertir IMP en AMP, usando GTP como energ√≠a." 
        },
        { 
            q: "La decarboxilaci√≥n del orotidin-5¬¥-fosfato (OMP) da lugar a:", 
            opts: ["IMP.", "CMP.", "TMP.", "UMP.", "Ninguna es cierta."], 
            a: "UMP.", 
            exp: "La OMP descarboxilasa convierte OMP en Uridilato (UMP), el precursor de todos los nucle√≥tidos de pirimidina." 
        },
        { 
            q: "¬øCu√°l es el precursor inmediato del √°cido √∫rico?", 
            opts: ["Hipoxantina.", "Inosina.", "Xantina.", "Guanina.", "Todas son falsas."], 
            a: "Xantina.", 
            exp: "La Xantina Oxidasa convierte Hipoxantina en Xantina, y luego Xantina en √Åcido √örico." 
        },
        { 
            q: "¬øCu√°l de las siguientes sustancias es necesaria para que el dUMP se transforme en dTMP?", 
            opts: ["ATP.", "N5-N10 metilen THF.", "FMN.", "NADH.", "Fosfato de piridoxal."], 
            a: "N5-N10 metilen THF.", 
            exp: "La timidilato sintasa usa N5-N10 metilen-THF para donar un grupo metilo al dUMP." 
        },
        { 
            q: "La siguiente v√≠a metab√≥lica (imagen asumida: recuperaci√≥n) se refiere a:", 
            opts: ["S√≠ntesis de novo de nucle√≥tidos de purina.", "S√≠ntesis de novo de nucle√≥tidos de pirimidina.", "V√≠a de recuperaci√≥n para sintetizar nucle√≥tidos de purina.", "V√≠a de recuperaci√≥n para sintetizar nucle√≥tidos de pirimidina.", "Inicio de la degradaci√≥n de nucle√≥tidos de purina hasta √°cido √∫rico."], 
            a: "V√≠a de recuperaci√≥n para sintetizar nucle√≥tidos de purina.", 
            exp: "Las v√≠as de recuperaci√≥n (salvage) reciclan bases libres (Hipoxantina, Guanina) uni√©ndolas directamente al PRPP (enzima HGPRT)." 
        },
        { 
            q: "Respecto a los nucle√≥tidos de purina, ¬øcu√°l de las respuestas es INCORRECTA?:", 
            opts: ["Se requiere N-formil-THF para su s√≠ntesis.", "Se requiere Asp, Gln y Gli para su s√≠ntesis.", "El PRPP se incorpora una vez sintetizada la base nitrogenada.", "En la s√≠ntesis ex novo el primer nucle√≥tido sintetizado es el IMP.", "El √°cido √∫rico es el producto de la degradaci√≥n."], 
            a: "El PRPP se incorpora una vez sintetizada la base nitrogenada.", 
            exp: "Incorrecto. En la s√≠ntesis 'de novo' de purinas, el anillo se construye *sobre* el PRPP. (Construir la base y luego unirla al PRPP es caracter√≠stico de las pirimidinas o de la v√≠a de recuperaci√≥n)." 
        },
        { 
            q: "En la bios√≠ntesis de nucle√≥tidos p√∫ricos, en primer lugar se formar√°:", 
            opts: ["El anillo benc√©nico.", "El anillo de imidazol.", "El anillo indol.", "El 5 fosforribosil-1 pirofosfato (PRPP).", "La incorporaci√≥n del aspartato."], 
            a: "El 5 fosforribosil-1 pirofosfato (PRPP).", 
            exp: "Primero se activa la ribosa-5-P formando PRPP, que servir√° de andamiaje." 
        },
        { 
            q: "El nucle√≥tido intermedio en la s√≠ntesis de pirimidinas es el:", 
            opts: ["AMP.", "GMP.", "CTP.", "IMP.", "OMP."], 
            a: "OMP.", 
            exp: "El Orotidin-Monofosfato (OMP) es el primer nucle√≥tido real de la v√≠a." 
        },
        { 
            q: "En la s√≠ntesis de DNA:", 
            opts: ["Se necesitan deoxinucle√≥tidos monofosfato para elongar la cadena.", "No es necesario que haya un √°cido nucleico que act√∫e como cebador.", "El sentido de la elongaci√≥n de la cadena es 3‚Äô‚Üí 5‚Äô.", "En eucariotas intervienen 3 RNA polimerasas en el proceso de inicio.", "Las DNA polimerasas tienen actividad exonucleasa 3‚Äô‚Üí 5‚Äô."], 
            a: "Las DNA polimerasas tienen actividad exonucleasa 3‚Äô‚Üí 5‚Äô.", 
            exp: "Esta es la actividad de correcci√≥n de pruebas (proofreading)." 
        },
        { 
            q: "En la v√≠a de las pentosas fosfato, las deshidrogenasas requieren:", 
            opts: ["NAD+.", "NADP+.", "FAD.", "FMN.", "TPP."], 
            a: "NADP+.", 
            exp: "La Glucosa-6-P deshidrogenasa y la 6-fosfogluconato deshidrogenasa usan NADP+ para generar NADPH." 
        },
        { 
            q: "En la v√≠a de las pentosas fosfato:", 
            opts: ["Se forma Acetil-CoA para la lipog√©nesis.", "Se forma NADPH para la lipog√©nesis.", "Se forma NADH para la cadena respiratoria.", "Se oxida el NADH.", "Se forma ATP para la glucog√©nesis."], 
            a: "Se forma NADPH para la lipog√©nesis.", 
            exp: "El NADPH (poder reductor) es esencial para bios√≠ntesis reductivas (√°cidos grasos, colesterol)." 
        },
        { 
            q: "Identifica qu√© afirmaci√≥n es correcta. La ruta de las pentosas fosfato (HMP):", 
            opts: ["Tiene entre sus funciones la provisi√≥n de NADH.", "No afecta al balance de ATP.", "Tiene localizaci√≥n mitocondrial y citos√≥lica.", "Produce CO2 a partir de glucosa-6P."], 
            a: "Produce CO2 a partir de glucosa-6P.", 
            exp: "En la fase oxidativa, se pierde un carbono como CO2 al pasar de hexosa (C6) a pentosa (C5)." 
        },
        { 
            q: "Identifica qu√© afirmaci√≥n es correcta sobre el glutati√≥n:", 
            opts: ["El glutati√≥n en su forma disulfido (GSSG) es el principal p√©ptido antioxidante celular.", "La actividad glutati√≥n reductasa regenera los niveles de glutati√≥n como GSH.", "Un cociente GSH/GSSG bajo es indicativo de bajos niveles de estr√©s oxidativo.", "El GSH es relevante en el mantenimiento del grupo tiol de la ciste√≠na en su forma oxidada."], 
            a: "La actividad glutati√≥n reductasa regenera los niveles de glutati√≥n como GSH.", 
            exp: "La enzima utiliza NADPH (de la v√≠a de las pentosas) para reducir el GSSG oxidado de nuevo a GSH funcional." 
        }
    ];

    // --- ASIGNAR IDs √öNICOS ---
    quizData.forEach((item, index) => {
        item.id = index;
    });

    // --- GESTI√ìN DE ESTADO ---
    let markedQuestions = new Set();
    let failedQuestions = new Set();

    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    const container = document.getElementById('quiz-container');

    // Funci√≥n principal
    function renderQuiz(questionsToLoad = quizData) {
        container.innerHTML = "";
        document.getElementById("restart-menu").style.display = "none";
        document.getElementById("finish-btn").style.display = "inline-block";

        if(questionsToLoad.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px; color:#6b7280;'>No hay preguntas para mostrar en esta selecci√≥n.</p>";
            return;
        }

        questionsToLoad.forEach((item, displayIndex) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            // Checkbox Marcar
            const markContainer = document.createElement("div");
            markContainer.className = "mark-container";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `mark-${item.id}`;
            if(markedQuestions.has(item.id)) checkbox.checked = true;

            checkbox.onchange = (e) => {
                if(e.target.checked) markedQuestions.add(item.id);
                else markedQuestions.delete(item.id);
            };

            const label = document.createElement("label");
            label.htmlFor = `mark-${item.id}`;
            label.innerText = "Marcar para revisar";
            markContainer.appendChild(checkbox);
            markContainer.appendChild(label);
            card.appendChild(markContainer);

            // Pregunta
            const header = document.createElement('div');
            header.className = 'question-header';
            header.textContent = `Pregunta ${item.id + 1}`; 
            card.appendChild(header);

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = item.q;

            // --- INSERCI√ìN DE DIAGRAMAS (Estrat√©gica) ---
            if (item.id === 0 || item.id === 14) { 
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 6 || item.id === 15) { 
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 12) { 
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 11) { 
                 questionText.innerHTML += `<span class='img-tag'></span>`;
            } else if (item.id === 17 || item.id === 19) { 
                 questionText.innerHTML += `<span class='img-tag'>

[Image of pentose phosphate pathway oxidative phase]
</span>`;
            }

            card.appendChild(questionText);

            // Opciones
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            let optionsObj = item.opts.map(opt => ({
                text: opt,
                isCorrect: opt === item.a
            }));
            optionsObj = shuffleArray(optionsObj);

            // Explicaci√≥n
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation';
            explanationDiv.innerHTML = `<strong>Explicaci√≥n:</strong> ${item.exp}`;

            optionsObj.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;

                btn.onclick = () => {
                    const allBtns = optionsDiv.querySelectorAll('.option-btn');
                    allBtns.forEach(b => b.disabled = true);

                    if (opt.isCorrect) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                        failedQuestions.add(item.id);
                        
                        allBtns.forEach(b => {
                            if (b.textContent === item.a) b.classList.add('correct');
                        });
                    }
                    explanationDiv.classList.add('visible');
                };
                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            container.appendChild(card);
        });
    }

    // --- Control Final ---
    function showEndOptions() {
        document.getElementById("finish-btn").style.display = "none";
        document.getElementById("restart-menu").style.display = "flex";
        document.getElementById("controls-area").scrollIntoView({behavior: "smooth"});
        
        document.getElementById("stats-summary").innerHTML = `
            Preguntas marcadas: <strong>${markedQuestions.size}</strong><br>
            Preguntas falladas en esta sesi√≥n: <strong>${failedQuestions.size}</strong>
        `;
    }

    function restartQuiz(mode) {
        let subset = [];
        if (mode === 'all') subset = quizData;
        else if (mode === 'marked') subset = quizData.filter(q => markedQuestions.has(q.id));
        else if (mode === 'failed') subset = quizData.filter(q => failedQuestions.has(q.id));
        else if (mode === 'failed_marked') subset = quizData.filter(q => failedQuestions.has(q.id) || markedQuestions.has(q.id));

        if(mode !== 'all') failedQuestions.clear(); 
        else {
            failedQuestions.clear();
            markedQuestions.clear();
        }

        renderQuiz(subset);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>
