<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Bloque 4 - N√∫cleo Interf√°sico (Medicina C√°diz)</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #f0f8ff;
            --correct-color: #d4edda;
            --correct-text: #155724;
            --incorrect-color: #f8d7da;
            --incorrect-text: #721c24;
            --mark-bg: #fff3cd;
            --mark-text: #856404;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        header {
            text-align: center;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
        }
        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
        }
        .professors {
            font-style: italic;
            color: #666;
            margin-top: 5px;
        }
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: var(--secondary-color);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            border: 1px solid #cce5ff;
        }
        .question-card {
            display: none;
            animation: fadeIn 0.5s;
            position: relative; /* Para posicionar la marca */
        }
        .question-card.active {
            display: block;
        }
        
        /* Estilos para la pesta√±a de Marcar */
        .bookmark-panel {
            position: absolute;
            top: -10px;
            right: 0;
            background: var(--mark-bg);
            color: var(--mark-text);
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid #ffeeba;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: transform 0.2s;
        }
        .bookmark-panel:hover {
            transform: scale(1.05);
        }
        .bookmark-checkbox {
            margin-right: 8px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-top: 20px; /* Espacio para la marca */
            padding-right: 140px; /* Espacio lateral para la marca */
        }
        .options-grid {
            display: grid;
            gap: 10px;
        }
        .option-btn {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: all 0.2s;
            width: 100%;
        }
        .option-btn:hover:not(:disabled) {
            background-color: #f8f9fa;
            border-color: var(--primary-color);
        }
        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }
        .option-btn.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-text);
            color: var(--correct-text);
        }
        .option-btn.incorrect {
            background-color: var(--incorrect-color);
            border-color: var(--incorrect-text);
            color: var(--incorrect-text);
        }
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback-correct {
            background-color: var(--correct-color);
            color: var(--correct-text);
            border-left: 5px solid var(--correct-text);
        }
        .feedback-incorrect {
            background-color: var(--incorrect-color);
            color: var(--incorrect-text);
            border-left: 5px solid var(--incorrect-text);
        }
        .navigation {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
        }
        .nav-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            display: none;
        }
        .nav-btn:hover {
            background-color: #004494;
        }
        
        .results-summary {
            text-align: center;
            display: none;
            padding: 20px;
        }

        /* Estilos para los botones finales */
        .action-buttons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
        }
        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
            transition: transform 0.2s;
        }
        .action-btn:hover { transform: translateY(-3px); }
        .action-btn:disabled { background-color: #ccc; cursor: not-allowed; transform: none; }
        
        .btn-restart { background-color: var(--primary-color); grid-column: span 2; }
        .btn-failed { background-color: #dc3545; }
        .btn-marked { background-color: #ffc107; color: #333; }
        .btn-mixed { background-color: #6f42c1; grid-column: span 2; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .topic-tag {
            display: inline-block;
            background: #e9ecef;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #495057;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Examen Bloque 4: N√∫cleo Interf√°sico</h1>
        <div class="professors">Profesoras: Meritxell Llorca Torralba y Ana Mu√±oz-Manchado</div>
    </header>

    <div class="stats-bar" id="statsBar">
        <div id="progress">Cargando...</div>
        <div id="score">Aciertos sesi√≥n: 0</div>
    </div>

    <div id="quiz-area"></div>

    <div id="results" class="results-summary">
        <h2>Sesi√≥n Finalizada</h2>
        <div style="font-size: 3rem; font-weight: bold; color: var(--primary-color);" id="final-score"></div>
        <p id="final-percent"></p>
        
        <div id="stats-summary" style="margin: 20px 0; color: #555;"></div>

        <div class="action-buttons-grid">
            <button class="action-btn btn-restart" onclick="startQuiz('all')">üîÑ Reiniciar Test Completo (Borrar todo)</button>
            <button class="action-btn btn-failed" id="btn-failed" onclick="startQuiz('failed')">‚ùå Repetir Falladas</button>
            <button class="action-btn btn-marked" id="btn-marked" onclick="startQuiz('marked')">‚ö†Ô∏è Repetir Marcadas</button>
            <button class="action-btn btn-mixed" id="btn-mixed" onclick="startQuiz('mixed')">‚ùå + ‚ö†Ô∏è Repetir Falladas y Marcadas</button>
        </div>
    </div>
</div>

<script>
// Base de datos de preguntas
const questions = [
    // --- TEMA: Generalidades y Envoltura Nuclear ---
    {
        topic: "Introducci√≥n",
        question: "¬øCu√°l es la funci√≥n principal que define al n√∫cleo celular?",
        options: ["Ser el sitio de s√≠ntesis de l√≠pidos.", "Actuar como centro de control separando la replicaci√≥n/transcripci√≥n de la traducci√≥n.", "Generar energ√≠a en forma de ATP.", "Degradar prote√≠nas citoplasm√°ticas."],
        correct: 1,
        explanation: "El n√∫cleo compartimenta el material gen√©tico, permitiendo regular procesos incompatibles como la transcripci√≥n y traducci√≥n."
    },
    {
        topic: "Envoltura Nuclear",
        question: "¬øDe qu√© estructura membranosa es contigua la membrana nuclear externa?",
        options: ["Del Aparato de Golgi.", "De la membrana plasm√°tica.", "Del Ret√≠culo Endopl√°smico (RE).", "De la mitocondria."],
        correct: 2,
        explanation: "La membrana externa se contin√∫a directamente con el RE y a menudo tiene ribosomas adheridos."
    },
    {
        topic: "L√°mina Nuclear",
        question: "¬øQu√© estructura recubre la cara interna de la envoltura nuclear proporcionando soporte mec√°nico?",
        options: ["El c√≥rtex de actina.", "La L√°mina Nuclear.", "Los microt√∫bulos.", "La matriz extracelular."],
        correct: 1,
        explanation: "La l√°mina nuclear es una malla de filamentos intermedios que da soporte estructural a la envoltura."
    },
    {
        topic: "L√°mina Nuclear",
        question: "¬øDe qu√© tipo de prote√≠nas est√° formada la l√°mina nuclear?",
        options: ["Tubulinas.", "Actina G.", "Filamentos intermedios (laminas).", "Col√°geno."],
        correct: 2,
        explanation: "Las l√°minas nucleares pertenecen a la familia de los filamentos intermedios del citoesqueleto."
    },
    {
        topic: "L√°mina Nuclear",
        question: "¬øCu√°l es una funci√≥n clave de la l√°mina nuclear adem√°s del soporte mec√°nico?",
        options: ["Sintetizar ATP.", "Servir como punto de anclaje para la cromatina.", "Transportar l√≠pidos.", "Degradar ARN."],
        correct: 1,
        explanation: "La l√°mina organiza el genoma proporcionando sitios de anclaje para los cromosomas en la periferia."
    },
    {
        topic: "Complejo del Poro",
        question: "¬øQu√© estructura media el transporte entre el n√∫cleo y el citoplasma?",
        options: ["Los canales i√≥nicos.", "El Complejo del Poro Nuclear (NPC).", "Las bombas de sodio-potasio.", "Los transportadores GLUT."],
        correct: 1,
        explanation: "Los NPCs son las √∫nicas puertas para el tr√°fico de mol√©culas entre ambos compartimentos."
    },
    {
        topic: "Complejo del Poro",
        question: "Aproximadamente, ¬øcu√°ntas prote√≠nas distintas (nucleoporinas) forman un NPC?",
        options: ["Unas 5.", "Unas 30.", "M√°s de 100.", "Solo 1."],
        correct: 1,
        explanation: "Es una megaestructura compleja formada por unas 30 prote√≠nas diferentes llamadas nucleoporinas."
    },
    {
        topic: "Transporte Nuclear",
        question: "¬øQu√© mol√©culas pueden pasar libremente por difusi√≥n pasiva a trav√©s del poro?",
        options: ["Prote√≠nas grandes (>60kDa).", "Ribosomas completos.", "Mol√©culas hidrosolubles peque√±as.", "Cromosomas."],
        correct: 2,
        explanation: "El poro permite la difusi√≥n libre de iones y mol√©culas peque√±as; las grandes requieren transporte activo."
    },
    {
        topic: "Transporte Nuclear",
        question: "¬øC√≥mo se importan las prote√≠nas destinadas a la membrana nuclear interna?",
        options: ["A trav√©s del poro nuclear directamente.", "Viajan por el sistema de secreci√≥n (RE) y luego se integran por difusi√≥n lateral desde la membrana externa.", "Son sintetizadas dentro del n√∫cleo.", "Atraviesan la bicapa lip√≠dica directamente."],
        correct: 1,
        explanation: "Primero se insertan en la membrana del RE y luego difunden lateralmente hacia la membrana interna."
    },
    {
        topic: "Transporte Nuclear",
        question: "¬øQu√© prote√≠nas receptoras reconocen las se√±ales de localizaci√≥n nuclear (NLS) para la entrada?",
        options: ["Exportinas.", "Importinas.", "Histonas.", "Lamininas."],
        correct: 1,
        explanation: "Las importinas son los receptores que cargan la prote√≠na en el citosol y la introducen al n√∫cleo."
    },
    // --- TEMA: Mecanismo Ran-GTPasa ---
    {
        topic: "Ciclo Ran",
        question: "¬øQu√© GTPasa monom√©rica proporciona la energ√≠a y direccionalidad al transporte nuclear?",
        options: ["Ras.", "Rho.", "Ran.", "Rab."],
        correct: 2,
        explanation: "El ciclo de Ran-GTP/GDP es el motor energ√©tico del transporte nucleocitoplasm√°tico."
    },
    {
        topic: "Ciclo Ran",
        question: "¬øD√≥nde se encuentra la mayor concentraci√≥n de Ran-GTP?",
        options: ["En el citosol.", "En el n√∫cleo.", "En el espacio perinuclear.", "En la mitocondria."],
        correct: 1,
        explanation: "Ran-GTP es abundante en el n√∫cleo debido a la presencia del factor GEF (intercambiador) en la cromatina."
    },
    {
        topic: "Ciclo Ran",
        question: "¬øQu√© ocurre cuando una Importina cargada llega al n√∫cleo y se encuentra con Ran-GTP?",
        options: ["Se une a Ran-GTP y libera su carga (la prote√≠na importada).", "Degrada a Ran-GTP.", "Se une m√°s fuertemente a su carga.", "Sale inmediatamente del n√∫cleo sin soltar la carga."],
        correct: 0,
        explanation: "La uni√≥n de Ran-GTP a la importina provoca un cambio conformacional que fuerza la liberaci√≥n de la carga."
    },
    {
        topic: "Ciclo Ran",
        question: "¬øD√≥nde se localiza la prote√≠na GAP (activadora de la GTPasa) que induce la hidr√≥lisis de GTP a GDP?",
        options: ["Exclusivamente en el n√∫cleo.", "Exclusivamente en el citosol.", "En el nucl√©olo.", "En la membrana interna."],
        correct: 1,
        explanation: "Ran-GAP est√° en el citosol, asegurando que fuera del n√∫cleo Ran est√© en forma GDP."
    },
    {
        topic: "Ciclo Ran",
        question: "¬øQu√© le sucede a la Importina unida a Ran-GTP tras liberar la carga?",
        options: ["Se degrada.", "Vuelve al citosol a trav√©s del poro.", "Se queda en el n√∫cleo permanentemente.", "Se une al ADN."],
        correct: 1,
        explanation: "El complejo Importina-Ran-GTP se exporta al citosol para reciclar la importina."
    },
    {
        topic: "Ciclo Ran",
        question: "¬øQu√© ocurre en el citosol con el complejo Importina-Ran-GTP exportado?",
        options: ["Ran hidroliza el GTP a GDP (ayudado por GAP) y libera a la importina.", "La importina se fosforila.", "Ran se convierte en ATP.", "Se une una nueva carga inmediatamente sin soltar Ran."],
        correct: 0,
        explanation: "La hidr√≥lisis de GTP en el citosol disocia el complejo, dejando a la importina libre para otro ciclo."
    },
    // --- TEMA: Cuerpos Nucleares ---
    {
        topic: "Cuerpos Nucleares",
        question: "¬øQu√© caracter√≠stica f√≠sica distingue a los cuerpos nucleares?",
        options: ["Est√°n rodeados por una doble membrana lip√≠dica.", "Son condensados funcionales sin membrana (separaci√≥n de fases).", "Est√°n hechos de ADN puro.", "Son est√°ticos y nunca cambian."],
        correct: 1,
        explanation: "Se forman por separaci√≥n de fases l√≠quido-l√≠quido, concentrando prote√≠nas y ARN sin barrera f√≠sica."
    },
    {
        topic: "Nucl√©olo",
        question: "¬øCu√°l es la funci√≥n principal del nucl√©olo?",
        options: ["Almacenamiento de l√≠pidos.", "F√°brica de ribosomas (biog√©nesis ribosomal).", "Degradaci√≥n de prote√≠nas.", "Replicaci√≥n del ADN viral."],
        correct: 1,
        explanation: "Es el sitio donde se transcriben los ARNr y se ensamblan las subunidades ribos√≥micas."
    },
    {
        topic: "Nucl√©olo",
        question: "¬øQu√© componentes se ensamblan en el nucl√©olo?",
        options: ["Prote√≠nas de la l√°mina.", "ARNr y prote√≠nas ribos√≥micas importadas del citoplasma.", "Histonas y ADN.", "Factores de splicing."],
        correct: 1,
        explanation: "Las prote√≠nas ribos√≥micas entran al n√∫cleo, van al nucl√©olo, se unen al ARNr y forman las subunidades."
    },
    {
        topic: "Cuerpos de Cajal",
        question: "¬øCu√°l es la prote√≠na de andamiaje caracter√≠stica de los Cuerpos de Cajal?",
        options: ["Laminina.", "Coilina (p80-coilina).", "Actina.", "Tubulina."],
        correct: 1,
        explanation: "La p80-coilina es el marcador y componente estructural esencial de los Cuerpos de Cajal."
    },
    {
        topic: "Cuerpos de Cajal",
        question: "¬øCu√°l es la funci√≥n principal de los Cuerpos de Cajal?",
        options: ["S√≠ntesis de ATP.", "Biog√©nesis y maduraci√≥n de snRNPs (maquinaria de splicing).", "Almacenamiento de factores de splicing maduros.", "Degradaci√≥n de ribosomas."],
        correct: 1,
        explanation: "Son centros de ensamblaje donde las snRNP maduran antes de usarse en el splicing."
    },
    {
        topic: "Patolog√≠a",
        question: "¬øQu√© enfermedad neurodegenerativa est√° ligada a la disfunci√≥n de los Cuerpos de Cajal?",
        options: ["Alzheimer.", "Atrofia Muscular Espinal (AME).", "Parkinson.", "Esclerosis M√∫ltiple."],
        correct: 1,
        explanation: "La prote√≠na SMN, defectuosa en AME, interact√∫a con la coilina y es vital para la integridad de estos cuerpos."
    },
    {
        topic: "Cuerpos de Cajal",
        question: "¬øC√≥mo manipulan algunos virus (como el Adenovirus) a los Cuerpos de Cajal?",
        options: ["Los destruyen para obtener energ√≠a.", "Secuestran la coilina para facilitar la exportaci√≥n de sus propios ARNm virales.", "Los usan para esconderse del sistema inmune.", "Los usan para replicar su ADN."],
        correct: 1,
        explanation: "Usan la coilina como 'salvoconducto' para sacar su material gen√©tico fuera del n√∫cleo."
    },
    {
        topic: "Nuclear Speckles",
        question: "¬øQu√© son las Manchas Nucleares o Nuclear Speckles?",
        options: ["Sitios de s√≠ntesis de ribosomas.", "Dep√≥sitos o almacenes de factores de splicing maduros listos para usarse.", "Centros de biog√©nesis de snRNP.", "Zonas de ADN basura."],
        correct: 1,
        explanation: "A diferencia de los Cuerpos de Cajal (biog√©nesis), los Speckles almacenan los factores ya formados."
    },
    {
        topic: "Nuclear Speckles",
        question: "¬øD√≥nde se suelen localizar las Manchas Nucleares?",
        options: ["En el nucl√©olo.", "En los espacios intercromat√≠nicos, cerca de regiones de transcripci√≥n activa.", "Pegados a la l√°mina nuclear.", "Fuera del n√∫cleo."],
        correct: 1,
        explanation: "Est√°n estrat√©gicamente ubicados para suministrar factores de splicing a los genes activos cercanos."
    },
    {
        topic: "Clastosoma",
        question: "¬øCu√°l es la funci√≥n del Clastosoma?",
        options: ["S√≠ntesis de ADN.", "Sitio de degradaci√≥n proteica nuclear (contiene proteasomas).", "Procesamiento del extremo 3' del ARNm.", "Almacenamiento de histonas."],
        correct: 1,
        explanation: "Son cuerpos ricos en proteasomas que se forman bajo estr√©s proteol√≠tico para degradar prote√≠nas."
    },
    {
        topic: "Cuerpos de Escisi√≥n",
        question: "¬øQu√© funci√≥n tiene el Cuerpo de Escisi√≥n (Cleavage Body)?",
        options: ["Procesamiento del extremo 3' de los pre-ARNm (poliadenilaci√≥n).", "Inicio de la replicaci√≥n.", "Uni√≥n de intrones.", "Transporte de iones."],
        correct: 0,
        explanation: "Concentran factores necesarios para cortar y poliadenilar el extremo final de los transcritos."
    },
    // --- TEMA: Cromatina y Organizaci√≥n ---
    {
        topic: "Organizaci√≥n Cromatina",
        question: "¬øC√≥mo se organiza el ADN en el n√∫cleo interf√°sico?",
        options: ["Mezclado aleatoriamente como un plato de espaguetis.", "Organizado en territorios cromos√≥micos definidos.", "Todo concentrado en el nucl√©olo.", "Pegado exclusivamente a la envoltura nuclear."],
        correct: 1,
        explanation: "Cada cromosoma ocupa un espacio f√≠sico concreto y no se mezcla al azar con los dem√°s."
    },
    {
        topic: "Eucromatina",
        question: "¬øQu√© caracteriza a la eucromatina?",
        options: ["Es muy compacta y electrodensa.", "Es menos condensada y transcripcionalmente activa.", "Se localiza solo en la periferia nuclear.", "No contiene genes."],
        correct: 1,
        explanation: "Es la forma abierta del ADN que permite el acceso de la maquinaria de transcripci√≥n."
    },
    {
        topic: "Heterocromatina",
        question: "¬øQu√© caracteriza a la heterocromatina?",
        options: ["Es transcripcionalmente muy activa.", "Es altamente condensada y generalmente silenciada.", "Es rica en genes housekeeping.", "Se encuentra en el centro del n√∫cleo mayoritariamente."],
        correct: 1,
        explanation: "Su alta compactaci√≥n impide el acceso a los factores de transcripci√≥n, silenciando los genes."
    },
    {
        topic: "Regulaci√≥n Cromatina",
        question: "¬øQu√© efecto tiene la acetilaci√≥n de histonas en la cromatina?",
        options: ["La compacta m√°s.", "Relaja la estructura (abre la cromatina) favoreciendo la expresi√≥n.", "No tiene efecto.", "Provoca la degradaci√≥n del ADN."],
        correct: 1,
        explanation: "La acetilaci√≥n neutraliza cargas positivas, debilitando la uni√≥n histona-ADN y abriendo la estructura."
    },
    {
        topic: "Regulaci√≥n Cromatina",
        question: "¬øQu√© realizan los complejos remodeladores de cromatina?",
        options: ["Cortan el ADN.", "Usan ATP para deslizar o desplazar nucleosomas.", "Sintetizan histonas.", "Unen el ADN a la l√°mina."],
        correct: 1,
        explanation: "Son motores moleculares que cambian la posici√≥n de los nucleosomas para exponer u ocultar secuencias."
    },
    {
        topic: "Organizaci√≥n",
        question: "¬øQu√© son los dominios o bucles de cromatina?",
        options: ["Errores de plegamiento.", "Estructuras que acercan regiones reguladoras (enhancers) a sus genes diana.", "Zonas de ADN roto.", "Prote√≠nas de andamiaje."],
        correct: 1,
        explanation: "El ADN se pliega en bucles para facilitar la interacci√≥n entre regiones distantes del genoma."
    },
    {
        topic: "Nucleosoma",
        question: "¬øQu√© es un nucleosoma?",
        options: ["Un tipo de ARN.", "La unidad b√°sica de cromatina: ADN enrollado en un oct√°mero de histonas.", "Un cuerpo nuclear.", "Un poro nuclear."],
        correct: 1,
        explanation: "Es el primer nivel de empaquetamiento, con ~147 pares de bases alrededor de las histonas."
    },
    // --- PREGUNTAS MIXTAS/REPASO ---
    {
        topic: "Envoltura",
        question: "¬øQu√© estructura separa f√≠sicamente el nucleoplasma del citoplasma?",
        options: ["La membrana plasm√°tica.", "La doble membrana de la envoltura nuclear.", "La l√°mina nuclear sola.", "El citoesqueleto."],
        correct: 1,
        explanation: "La envoltura nuclear, compuesta por dos membranas, es la barrera f√≠sica."
    },
    {
        topic: "Transporte",
        question: "¬øQu√© mol√©cula marca la direcci√≥n del transporte nuclear?",
        options: ["ATP.", "El gradiente de concentraci√≥n de Ran-GTP/Ran-GDP.", "La concentraci√≥n de calcio.", "El pH."],
        correct: 1,
        explanation: "La asimetr√≠a de Ran (GTP dentro, GDP fuera) dicta si se carga o descarga la mercanc√≠a."
    },
    {
        topic: "Transporte",
        question: "¬øQu√© nucle√≥tido est√° unido a Ran en el n√∫cleo?",
        options: ["ATP", "GTP", "GDP", "ADP"],
        correct: 1,
        explanation: "En el n√∫cleo reside el factor GEF que carga a Ran con GTP."
    },
    {
        topic: "Transporte",
        question: "¬øQu√© nucle√≥tido est√° unido a Ran en el citosol?",
        options: ["ATP", "GTP", "GDP", "ADP"],
        correct: 2,
        explanation: "En el citosol reside la prote√≠na GAP que estimula la hidr√≥lisis a GDP."
    },
    {
        topic: "Nucl√©olo",
        question: "¬øTiene membrana el nucl√©olo?",
        options: ["S√≠, doble.", "S√≠, simple.", "No, es un condensado sin membrana.", "A veces."],
        correct: 2,
        explanation: "Como todos los cuerpos nucleares, carece de membrana lip√≠dica."
    },
    {
        topic: "Cuerpos Nucleares",
        question: "¬øQu√© proceso f√≠sico forma los cuerpos nucleares?",
        options: ["Cristalizaci√≥n.", "Separaci√≥n de fases l√≠quido-l√≠quido.", "Polimerizaci√≥n covalente.", "Fusi√≥n de membranas."],
        correct: 1,
        explanation: "Se comportan como gotas de aceite en agua, concentrando componentes din√°micamente."
    },
    {
        topic: "Cuerpos de Cajal",
        question: "¬øQui√©n describi√≥ por primera vez los 'cuerpos accesorios' (hoy Cajal bodies)?",
        options: ["Ram√≥n y Cajal (1903).", "Watson y Crick.", "Robert Hooke.", "Virchow."],
        correct: 0,
        explanation: "El neurocient√≠fico espa√±ol Santiago Ram√≥n y Cajal los observ√≥ en neuronas."
    },
    {
        topic: "L√°mina",
        question: "¬øQu√© familia de prote√≠nas del citoesqueleto forman la l√°mina?",
        options: ["Microt√∫bulos.", "Microfilamentos de actina.", "Filamentos intermedios.", "Miosinas."],
        correct: 2,
        explanation: "Las l√°minas nucleares son filamentos intermedios tipo V."
    },
    {
        topic: "Transporte",
        question: "¬øQu√© secuencia debe tener una prote√≠na para entrar al n√∫cleo?",
        options: ["Se√±al de retenci√≥n en RE.", "Se√±al de Localizaci√≥n Nuclear (NLS).", "Se√±al de exportaci√≥n.", "P√©ptido se√±al hidrof√≥bico."],
        correct: 1,
        explanation: "La NLS (Nuclear Localization Signal) es el 'ticket' de entrada reconocido por las importinas."
    },
    {
        topic: "Transporte",
        question: "La hidr√≥lisis de GTP en el transporte nuclear la realiza:",
        options: ["La importina.", "El poro nuclear.", "La prote√≠na Ran.", "El ADN."],
        correct: 2,
        explanation: "Ran es una GTPasa; ella misma hidroliza el GTP cuando es activada por GAP."
    },
    {
        topic: "Estructura Poro",
        question: "¬øQu√© simetr√≠a tiene el complejo del poro nuclear?",
        options: ["Esf√©rica.", "Octogonal (simetr√≠a de 8).", "Cuadrada.", "Irregular."],
        correct: 1,
        explanation: "Tiene una estructura de anillo con simetr√≠a rotacional √≥ctuple."
    },
    {
        topic: "Cromatina",
        question: "¬øQu√© regi√≥n del n√∫cleo suele ser rica en heterocromatina?",
        options: ["El centro exacto.", "La periferia, asociada a la l√°mina nuclear (LADs).", "Alrededor de los poros.", "Dentro del nucl√©olo."],
        correct: 1,
        explanation: "La heterocromatina suele anclarse a la l√°mina nuclear en la periferia (L√°mina-Associated Domains)."
    },
    {
        topic: "Gen√©tica",
        question: "¬øQu√© contiene el n√∫cleo adem√°s de ADN?",
        options: ["Solo agua.", "Gran cantidad de prote√≠nas y distintos tipos de ARN.", "Mitocondrias.", "Lisosomas."],
        correct: 1,
        explanation: "Es un entorno bioqu√≠mico complejo con maquinaria de replicaci√≥n, transcripci√≥n y procesamiento."
    },
    {
        topic: "Nucl√©olo",
        question: "¬øQu√© tipo de ARN polimerasa es muy activa en el nucl√©olo?",
        options: ["ARN Polimerasa II (ARNm).", "ARN Polimerasa I (ARNr).", "ADN Polimerasa.", "Transcriptasa inversa."],
        correct: 1,
        explanation: "La Pol I sintetiza los precursores de ARN ribos√≥mico en el nucl√©olo."
    },
    {
        topic: "Cuerpos de Cajal",
        question: "La prote√≠na SMN, relacionada con la AME, es vital para:",
        options: ["La replicaci√≥n del ADN.", "El ensamblaje de snRNPs en los Cuerpos de Cajal.", "La s√≠ntesis de l√≠pidos.", "La estructura del poro."],
        correct: 1,
        explanation: "Sin SMN, la biog√©nesis de la maquinaria de splicing falla."
    },
    {
        topic: "Speckles",
        question: "¬øQu√© diferencia funcional principal hay entre Cajal bodies y Speckles?",
        options: ["Cajal = Biog√©nesis/Maduraci√≥n; Speckles = Almacenamiento.", "Cajal = Almacenamiento; Speckles = Degradaci√≥n.", "Cajal = ADN; Speckles = ARN.", "No hay diferencia."],
        correct: 0,
        explanation: "Cajal es la f√°brica de montaje; Speckles es el almac√©n de piezas terminadas."
    },
    {
        topic: "Regulaci√≥n",
        question: "¬øQu√© es el 'C√≥digo de Histonas'?",
        options: ["La secuencia de ADN de los genes de histonas.", "La combinaci√≥n espec√≠fica de modificaciones qu√≠micas en las colas de histonas que dicta el estado de la cromatina.", "Un c√≥digo secreto para entrar al n√∫cleo.", "El n√∫mero de nucleosomas."],
        correct: 1,
        explanation: "Las marcas (acetilo, metilo, fosfato) crean un lenguaje que recluta prote√≠nas reguladoras."
    },
    {
        topic: "Clastosoma",
        question: "¬øCu√°ndo suelen aparecer o aumentar los clastosomas?",
        options: ["Durante la mitosis.", "Bajo condiciones de alto estr√©s proteol√≠tico.", "Cuando la c√©lula duerme.", "En la diferenciaci√≥n."],
        correct: 1,
        explanation: "Se forman para degradar componentes r√°pidamente cuando es necesario."
    },
    {
        topic: "Exportaci√≥n",
        question: "¬øQu√© necesitan las prote√≠nas para salir del n√∫cleo?",
        options: ["Una se√±al de retenci√≥n.", "Una Se√±al de Exportaci√≥n Nuclear (NES).", "Ser muy peque√±as.", "Perder su estructura."],
        correct: 1,
        explanation: "La NES es reconocida por las exportinas para sacar la carga al citosol."
    },
    {
        topic: "Importina",
        question: "¬øQu√© hace la importina en el citosol?",
        options: ["Suelta la carga.", "Se une a la carga (prote√≠na con NLS).", "Se une a Ran-GTP.", "Se degrada."],
        correct: 1,
        explanation: "En el citosol (donde Ran-GTP es bajo), la importina tiene alta afinidad por su carga y la atrapa."
    },
    {
        topic: "Envoltura",
        question: "¬øQu√© ocurre con la envoltura nuclear durante la mitosis?",
        options: ["Se hace m√°s gruesa.", "Se desensambla (se rompe) para liberar los cromosomas.", "Permanece intacta.", "Se fusiona con la mitocondria."],
        correct: 1,
        explanation: "La fosforilaci√≥n de la l√°mina provoca el desensamblaje de la envoltura para permitir la segregaci√≥n cromos√≥mica."
    },
    {
        topic: "Poro Nuclear",
        question: "Las prote√≠nas que forman el poro tienen regiones desordenadas que forman:",
        options: ["Una pared r√≠gida.", "Un gel selectivo o malla dentro del canal.", "Unas compuertas met√°licas.", "Unas h√©lices alfa."],
        correct: 1,
        explanation: "Los dominios FG (fenilalanina-glicina) forman una red tipo gel que bloquea el paso no espec√≠fico."
    },
    {
        topic: "Nucleosoma",
        question: "¬øCu√°ntos pares de bases de ADN rodean un nucleosoma t√≠pico?",
        options: ["Aproximadamente 147 pb.", "1000 pb.", "50 pb.", "1 mill√≥n de pb."],
        correct: 0,
        explanation: "El ADN da casi 1.7 vueltas alrededor del oct√°mero, abarcando 147 pares de bases."
    },
    {
        topic: "Cromatina",
        question: "¬øQu√© enzima a√±ade grupos acetilo a las histonas?",
        options: ["Histona Desacetilasa (HDAC).", "Histona Acetiltransferasa (HAT).", "ADN Polimerasa.", "Ligasa."],
        correct: 1,
        explanation: "Las HAT a√±aden acetilo, promoviendo la relajaci√≥n de la cromatina (eucromatina)."
    },
    {
        topic: "Cromatina",
        question: "¬øQu√© enzima elimina grupos acetilo de las histonas?",
        options: ["Histona Acetiltransferasa (HAT).", "Histona Desacetilasa (HDAC).", "Ran-GAP.", "Nucleasa."],
        correct: 1,
        explanation: "Las HDAC quitan el acetilo, promoviendo la condensaci√≥n (heterocromatina) y el silenciamiento."
    },
    {
        topic: "Nucleoplasma",
        question: "¬øQu√© es el nucleoplasma?",
        options: ["El citoplasma de la c√©lula.", "El medio interno del n√∫cleo donde flota la cromatina.", "La membrana nuclear.", "El espacio perinuclear."],
        correct: 1,
        explanation: "Es el equivalente nuclear del citosol, conteniendo agua, iones y factores solubles."
    },
    {
        topic: "L√°mina",
        question: "¬øQu√© enfermedad se asocia a mutaciones en la l√°mina nuclear (Laminopat√≠as)?",
        options: ["Gripe.", "Progeria (envejecimiento acelerado).", "Diabetes.", "Miop√≠a."],
        correct: 1,
        explanation: "La Progeria de Hutchinson-Gilford es causada por defectos en la L√°mina A, afectando la estabilidad nuclear."
    },
    {
        topic: "Poro",
        question: "¬øPuede el ARN salir del n√∫cleo?",
        options: ["No, nunca.", "S√≠, como complejos ribonucleoproteicos (RNP) a trav√©s del poro.", "Solo si se rompe la membrana.", "Solo el ADN sale."],
        correct: 1,
        explanation: "El ARNm maduro se exporta activamente a trav√©s de los poros para ser traducido."
    },
    {
        topic: "Cuerpos Nucleares",
        question: "¬øPor qu√© los cuerpos nucleares aumentan la eficiencia de procesos?",
        options: ["Porque calientan el n√∫cleo.", "Porque concentran reactivos (prote√≠nas y ARN) en un espacio reducido.", "Porque tienen membranas impermeables.", "Porque eliminan el ADN."],
        correct: 1,
        explanation: "Al concentrar los componentes necesarios, aumentan la velocidad de reacci√≥n (ley de acci√≥n de masas)."
    },
    {
        topic: "Nucl√©olo",
        question: "¬øCu√°ntos nucl√©olos puede tener una c√©lula?",
        options: ["Siempre uno.", "Uno o varios, dependiendo de la actividad celular.", "Ninguno.", "Cientos."],
        correct: 1,
        explanation: "El n√∫mero y tama√±o var√≠an seg√∫n la demanda de s√≠ntesis de prote√≠nas (m√°s demanda = nucl√©olos m√°s grandes/numerosos)."
    },
    {
        topic: "General",
        question: "¬øEs el n√∫cleo un compartimento est√°tico?",
        options: ["S√≠, es un almac√©n r√≠gido.", "No, es altamente din√°mico y organizado.", "Solo se mueve en mitosis.", "Es s√≥lido."],
        correct: 1,
        explanation: "La cromatina se mueve, los cuerpos nucleares se forman y disuelven, y el transporte es constante."
    },
    {
        topic: "Importina",
        question: "¬øLa importina necesita energ√≠a ATP directa para unirse a la carga?",
        options: ["S√≠.", "No, la uni√≥n es por afinidad; la energ√≠a se gasta en el ciclo de Ran.", "Usa luz.", "Usa calor."],
        correct: 1,
        explanation: "El transporte es activo globalmente, pero la uni√≥n inicial es bioqu√≠mica; el gasto energ√©tico es del sistema Ran."
    },
    {
        topic: "Cuerpos de Escisi√≥n",
        question: "¬øCon qu√© otro cuerpo nuclear suelen asociarse f√≠sicamente los cuerpos de Cajal?",
        options: ["Con el nucl√©olo.", "Con los clastosomas.", "Con las mitocondrias.", "Con el Golgi."],
        correct: 0,
        explanation: "A menudo se encuentran cerca o en contacto con el nucl√©olo, coordinando biog√©nesis."
    },
    {
        topic: "Transporte",
        question: "¬øQu√© ion gradiente impulsa el transporte nuclear?",
        options: ["Sodio.", "Potasio.", "Ninguno, lo impulsa el gradiente de Ran-GTP.", "Calcio."],
        correct: 2,
        explanation: "No es un gradiente i√≥nico de membrana, sino un gradiente molecular de la forma de Ran."
    },
    {
        topic: "Poro",
        question: "El lado del poro que mira al n√∫cleo tiene una estructura llamada:",
        options: ["Cesta o canasta nuclear.", "Antena.", "Filamentos citoplasm√°ticos.", "Anillo externo."],
        correct: 0,
        explanation: "La 'nuclear basket' es la estructura asim√©trica en la cara nuclear del poro."
    },
    {
        topic: "Cromatina",
        question: "¬øQu√© es un 'Territorio Cromos√≥mico'?",
        options: ["Una zona donde no hay ADN.", "El espacio espec√≠fico y no solapante que ocupa cada cromosoma en el n√∫cleo.", "Una zona de guerra celular.", "El sitio del nucl√©olo."],
        correct: 1,
        explanation: "Los cromosomas no est√°n enredados al azar, sino que cada uno reside en su propia 'parcela'."
    },
    {
        topic: "Resumen",
        question: "¬øQu√© elemento act√∫a como 'esqueleto' interno del n√∫cleo?",
        options: ["Microt√∫bulos.", "L√°mina Nuclear.", "ADN.", "Ribosomas."],
        correct: 1,
        explanation: "La l√°mina aporta la rigidez y forma al n√∫cleo."
    },
    {
        topic: "Resumen",
        question: "¬øQu√© define el l√≠mite entre n√∫cleo y citoplasma?",
        options: ["La l√°mina.", "La cromatina.", "La envoltura nuclear.", "El nucl√©olo."],
        correct: 2,
        explanation: "La doble membrana es la frontera definitiva."
    },
    {
        topic: "Resumen",
        question: "¬øQu√© ocurre en los espacios intercromat√≠nicos?",
        options: ["Nada.", "Se acumulan factores de procesamiento (Speckles) y ocurre transporte.", "Se almacena grasa.", "Hay vac√≠o."],
        correct: 1,
        explanation: "Son canales entre territorios cromos√≥micos donde se facilita el tr√°fico y procesamiento de ARN."
    },
    {
        topic: "Repaso",
        question: "¬øQu√© significa que el transporte sea 'selectivo'?",
        options: ["Que entra todo.", "Que solo entra lo que tiene la 'llave' (se√±al) correcta.", "Que solo sale agua.", "Que es aleatorio."],
        correct: 1,
        explanation: "Solo las macromol√©culas con NLS o NES v√°lidas pueden cruzar el poro de forma facilitada."
    }
];

// --- GESTI√ìN DE ESTADO ---
// Inicializamos propiedades extra
questions.forEach(q => {
    q.isMarked = false;       
    q.userCorrect = null;     // null: no respondida, true: correcta, false: incorrecta
});

let activeIndices = []; 
let currentPlaylistIndex = 0; 
let sessionScore = 0;
let answered = false;

// Al cargar
document.addEventListener('DOMContentLoaded', () => {
    startQuiz('all');
});

// Funci√≥n Principal: Iniciar/Reiniciar con modos
function startQuiz(mode) {
    activeIndices = [];
    
    if (mode === 'all') {
        // Reinicio total
        questions.forEach(q => q.userCorrect = null);
        questions.forEach(q => q.isMarked = false); // Opcional: limpiar marcas
        activeIndices = questions.map((_, i) => i);
    } 
    else if (mode === 'failed') {
        activeIndices = questions.map((q, i) => q.userCorrect === false ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'marked') {
        activeIndices = questions.map((q, i) => q.isMarked ? i : -1).filter(i => i !== -1);
    } 
    else if (mode === 'mixed') {
        activeIndices = questions.map((q, i) => (q.userCorrect === false || q.isMarked) ? i : -1).filter(i => i !== -1);
    }

    if (activeIndices.length === 0) {
        alert("No hay preguntas para este modo.");
        return;
    }

    currentPlaylistIndex = 0;
    sessionScore = 0;
    
    document.getElementById('results').style.display = 'none';
    document.getElementById('quiz-area').style.display = 'block';
    document.getElementById('statsBar').style.display = 'flex';
    
    loadQuestion();
}

function loadQuestion() {
    answered = false;
    const realIndex = activeIndices[currentPlaylistIndex];
    const q = questions[realIndex];
    
    document.getElementById('progress').textContent = `Pregunta ${currentPlaylistIndex + 1} de ${activeIndices.length}`;
    document.getElementById('score').textContent = `Aciertos sesi√≥n: ${sessionScore}`;

    const quizArea = document.getElementById('quiz-area');
    const markedChecked = q.isMarked ? 'checked' : '';

    let html = `
        <div class="question-card active">
            <label class="bookmark-panel">
                <input type="checkbox" class="bookmark-checkbox" onchange="toggleMark(${realIndex}, this)" ${markedChecked}>
                <span>Marcar</span>
            </label>

            <div class="topic-tag">${q.topic}</div>
            <div class="question-text">${q.question}</div>
            <div class="options-grid">
                ${q.options.map((opt, i) => `
                    <button class="option-btn" onclick="checkAnswer(${i}, ${q.correct}, this, ${realIndex})">
                        ${String.fromCharCode(65+i)}. ${opt}
                    </button>
                `).join('')}
            </div>
            <div id="feedback" class="feedback"></div>
            <div class="navigation">
                <button id="next-btn" class="nav-btn" onclick="nextQuestion()">Siguiente ‚Üí</button>
            </div>
        </div>
    `;
    quizArea.innerHTML = html;
}

function toggleMark(realIndex, checkbox) {
    questions[realIndex].isMarked = checkbox.checked;
}

function checkAnswer(selected, correct, btn, realIndex) {
    if (answered) return;
    answered = true;

    const btns = document.querySelectorAll('.option-btn');
    const feedbackEl = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');

    btns.forEach(b => b.disabled = true);

    if (selected === correct) {
        sessionScore++;
        questions[realIndex].userCorrect = true;
        btn.classList.add('correct');
        feedbackEl.className = 'feedback feedback-correct show';
        feedbackEl.innerHTML = `<strong>¬°Correcto!</strong> ${questions[realIndex].explanation}`;
    } else {
        questions[realIndex].userCorrect = false;
        btn.classList.add('incorrect');
        btns[correct].classList.add('correct');
        feedbackEl.className = 'feedback feedback-incorrect show';
        feedbackEl.innerHTML = `<strong>Incorrecto.</strong> ${questions[realIndex].explanation}`;
    }

    document.getElementById('score').textContent = `Aciertos sesi√≥n: ${sessionScore}`;
    nextBtn.style.display = 'inline-block';
}

function nextQuestion() {
    if (currentPlaylistIndex < activeIndices.length - 1) {
        currentPlaylistIndex++;
        loadQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    document.getElementById('quiz-area').style.display = 'none';
    document.getElementById('statsBar').style.display = 'none';
    document.getElementById('results').style.display = 'block';

    const percent = Math.round((sessionScore / activeIndices.length) * 100);
    document.getElementById('final-score').textContent = `${sessionScore} / ${activeIndices.length}`;
    
    let msg = "";
    if(percent >= 90) msg = "¬°Excelente!";
    else if(percent >= 70) msg = "Muy bien.";
    else if(percent >= 50) msg = "Aprobado.";
    else msg = "Sigue repasando.";
    document.getElementById('final-percent').textContent = `${percent}% - ${msg}`;

    // Calcular estad√≠sticas globales
    const totalFailed = questions.filter(q => q.userCorrect === false).length;
    const totalMarked = questions.filter(q => q.isMarked === true).length;
    const totalMixed = questions.filter(q => q.userCorrect === false || q.isMarked).length;

    document.getElementById('stats-summary').innerHTML = `
        <strong>Resumen Global:</strong><br>
        Preguntas marcadas para revisi√≥n: ${totalMarked}<br>
        Preguntas falladas (hist√≥rico): ${totalFailed}
    `;

    document.getElementById('btn-failed').disabled = (totalFailed === 0);
    document.getElementById('btn-marked').disabled = (totalMarked === 0);
    document.getElementById('btn-mixed').disabled = (totalMixed === 0);
    
    document.getElementById('btn-failed').innerHTML = `‚ùå Repetir Falladas (${totalFailed})`;
    document.getElementById('btn-marked').innerHTML = `‚ö†Ô∏è Repetir Marcadas (${totalMarked})`;
}
</script>

</body>
</html>
