<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Fisiología: Transporte y Señalización</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #8e44ad;
            --success: #27ae60;
            --error: #c0392b;
            --warning: #f39c12;
            --light: #ecf0f1;
            --text: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f6f7;
            color: var(--text);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- PANTALLAS --- */
        #start-screen, #results-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            text-align: center;
        }

        .hidden { display: none !important; }

        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-primary { background-color: var(--primary); color: white; }
        .btn-secondary { background-color: var(--accent); color: white; }
        .btn-danger { background-color: var(--error); color: white; }
        .btn-info { background-color: #3498db; color: white; }

        /* --- LAYOUT --- */
        #app-container {
            display: flex;
            flex: 1;
            height: 100vh;
        }

        #sidebar {
            width: 80px;
            background: var(--primary);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            gap: 10px;
        }

        .nav-dot {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 0.8em;
        }

        .nav-dot.correct { background: var(--success); }
        .nav-dot.wrong { background: var(--error); }
        .nav-dot.marked { border: 2px solid var(--warning); color: var(--warning); }

        #main-area {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            scroll-behavior: smooth;
        }

        .question-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px;
            margin: 8px 0;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
        }

        .option-btn:hover:not(:disabled) { background: #f0f0f0; }
        .option-btn.correct { background-color: #d4edda !important; border-color: var(--success); }
        .option-btn.wrong { background-color: #f8d7da !important; border-color: var(--error); }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e8f6f3;
            border-left: 4px solid var(--success);
            display: none;
        }

        #finish-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1>Fisiología: Transporte y Señalización</h1>
        <p>50 Preguntas Literales</p>
        <div class="btn-container">
            <button class="btn-primary" onclick="initQuiz('ordered')">Orden Numérico</button>
            <button class="btn-secondary" onclick="initQuiz('random')">Orden Aleatorio</button>
        </div>
    </div>

    <div id="app-container" class="hidden">
        <nav id="sidebar"></nav>
        <main id="main-area"></main>
        <button id="finish-btn" class="btn-danger" onclick="showResults()">Finalizar</button>
    </div>

    <div id="results-modal" class="hidden">
        <h2>Resultados</h2>
        <p id="res-msg"></p>
        <div class="btn-container">
            <button class="btn-primary" onclick="location.reload()">Reiniciar Todo</button>
            <button class="btn-info" onclick="closeModal()">Revisar</button>
        </div>
    </div>

    <script>
        const dbQuestions = [
            { id: 1, q: "El profesor utiliza la analogía del \"Canal de Panamá\" para explicar el funcionamiento de:", options: ["Los canales iónicos de fuga.", "Las permeasas o proteínas transportadoras.", "La difusión simple de gases.", "Los poros nucleares."], ans: 1, exp: "Respuesta: B (Pista: nunca están abiertos a ambos lados a la vez)." },
            { id: 2, q: "A diferencia de la difusión simple o a través de canales, el transporte mediado por permeasas se caracteriza por:", options: ["No saturarse nunca.", "Ser un proceso mucho más rápido que los canales.", "Sufrir cambios conformacionales y saturación (Vmax).", "No requerir especificidad por el sustrato."], ans: 2, exp: "Respuesta: C." },
            { id: 3, q: "En la cinética de transporte, si observamos que la curva se hace más \"horizontal\" y aumenta la Km, esto indica:", options: ["Un aumento de la afinidad del transportador.", "Una disminución de la afinidad del transportador por el sustrato.", "Que se ha alcanzado la velocidad máxima.", "Que el transporte ha pasado a ser activo."], ans: 1, exp: "Respuesta: B." },
            { id: 4, q: "¿Qué representa el parámetro \"Turnover\" en un transportador?", options: ["La cantidad total de transportadores en la membrana.", "La afinidad del sustrato (Km).", "La eficacia del transportador (ciclos de transporte por unidad de tiempo).", "La energía consumida por mol de sustrato."], ans: 2, exp: "Respuesta: C" },
            { id: 5, q: "Si en un experimento añadimos Galactosa a un medio que contiene Glucosa y células con transportadores GLUT, ¿qué efecto cinético observaremos?", options: ["Aumenta la Vmax de la glucosa.", "Disminuye la velocidad de transporte de la glucosa por inhibición competitiva.", "Cambia la afinidad estructural (Km) de la glucosa por el receptor.", "El transporte se detiene completamente."], ans: 1, exp: "Respuesta: B." },
            { id: 6, q: "¿Cuál de las siguientes afirmaciones sobre la Vmax es la que el profesor destaca como un concepto dinámico?", options: ["La Vmax nunca puede cambiar en una célula viva.", "La Vmax puede aumentar si la célula recluta más transportadores a la membrana (ej. insulina).", "La Vmax depende exclusivamente de la temperatura.", "La Vmax es idéntica para todos los solutos."], ans: 1, exp: "Respuesta: B." },
            { id: 7, q: "La maltosa inhibe el transporte de glucosa en GLUT, pero no es transportada. Esto se debe a:", options: ["Inhibición alostérica.", "Inhibición competitiva por el sitio de unión, pero es demasiado grande para ser transportada.", "Destrucción del transportador.", "Modificación covalente del transportador."], ans: 1, exp: "Respuesta: B" },
            { id: 8, q: "Los transportadores GLUT son un ejemplo clásico de:", options: ["Transporte activo primario.", "Difusión facilitada (Uniporte).", "Transporte activo secundario (Simporte).", "Canal iónico dependiente de voltaje."], ans: 1, exp: "Respuesta: B" },
            { id: 9, q: "¿Cuál es la diferencia fundamental entre un canal iónico y una permeasa en términos de estructura?", options: ["Los canales son proteínas periféricas.", "Las permeasas forman un poro acuoso continuo; los canales no.", "Los canales pueden formar un poro abierto; las permeasas nunca conectan ambos lados a la vez.", "Las permeasas son más rápidas."], ans: 2, exp: "Respuesta: C" },
            { id: 10, q: "La constante de Michaelis-Menten (Km) se define como:", options: ["La velocidad máxima.", "La concentración de sustrato para alcanzar el 50% de la Vmax.", "La saturación total.", "El número de transportadores."], ans: 1, exp: "Respuesta: B" },
            { id: 11, q: "¿Qué característica define al transporte activo primario?", options: ["Gradiente de otro ión.", "Hidroliza ATP directamente.", "A favor de gradiente.", "Sin proteínas."], ans: 1, exp: "Respuesta: B" },
            { id: 12, q: "La bomba Na+/K+ ATPasa es \"electrogénica\" porque:", options: ["Mueve 3 Na+ fuera y 3 K+ dentro.", "Mueve 2 Na+ fuera y 3 K+ dentro.", "Mueve 3 Na+ fuera y 2 K+ dentro, generando carga neta negativa interna.", "Genera ATP."], ans: 2, exp: "Respuesta: C" },
            { id: 13, q: "En el ciclo de la Na+/K+ ATPasa, ¿qué provoca la liberación del Na+ al exterior?", options: ["Unión del K+.", "Fosforilación de la bomba tras hidrólisis de ATP.", "Desfosforilación.", "Unión de glucosa."], ans: 1, exp: "Respuesta: B" },
            { id: 14, q: "¿Qué fármaco inhibe la bomba Na+/K+ ATPasa?", options: ["Tetrodotoxina.", "Ouabaina (o digitálicos).", "Curare.", "Aspirina."], ans: 1, exp: "Respuesta: B" },
            { id: 15, q: "¿Cuándo están disponibles los sitios para el Potasio (K+) en la bomba Na+/K+?", options: ["Hacia el interior.", "Antes del sodio.", "Tras liberar Na+ al exterior y estar fosforilada.", "Nunca."], ans: 2, exp: "Respuesta: C" },
            { id: 16, q: "La Ca2+-ATPasa mantiene un gradiente de:", options: ["2 veces.", "10 veces.", "10.000 veces (4 órdenes).", "No mantiene."], ans: 2, exp: "Respuesta: C" },
            { id: 17, q: "¿Dónde hay bombas de calcio importantes además de la membrana?", options: ["Núcleo.", "Retículo Sarcoplásmico/Endoplásmico.", "Lisosomas.", "Golgi."], ans: 1, exp: "Respuesta: B" },
            { id: 18, q: "La desfosforilación de la bomba Na+/K+ ocurre:", options: ["Tras unirse Na+.", "Tras unión de K+ externo, provocando cambio hacia dentro.", "Sin iones.", "Antes de ATP."], ans: 1, exp: "Respuesta: B" },
            { id: 19, q: "Función principal de las ATPasas:", options: ["Equilibrar lados.", "Mantener gradientes electroquímicos.", "Transportar agua.", "Crear ATP."], ans: 1, exp: "Respuesta: B" },
            { id: 20, q: "Si inhibimos la Na+/K+ ATPasa, el volumen celular:", options: ["No cambia.", "Aumenta (hinchazón) por pérdida osmótica.", "Disminuye.", "Se divide."], ans: 1, exp: "Respuesta: B" },
            { id: 21, q: "El transporte activo secundario se distingue en que:", options: ["No gasta energía.", "Usa energía de un gradiente previo (ej. Na+).", "Es más rápido.", "Solo iones."], ans: 1, exp: "Respuesta: B" },
            { id: 22, q: "El transportador SGLT es un ejemplo de:", options: ["Antiporte.", "Uniporte.", "Simporte.", "Difusión."], ans: 2, exp: "Respuesta: C" },
            { id: 23, q: "En SGLT, ¿qué se une primero?", options: ["Glucosa.", "ATP.", "Sodio (Na+).", "Potasio."], ans: 2, exp: "Respuesta: C" },
            { id: 24, q: "Localización del SGLT:", options: ["Basolateral.", "Apical de epitelio intestinal y renal.", "Cerebro.", "Músculo."], ans: 1, exp: "Respuesta: B" },
            { id: 25, q: "En la nefrona, el SGLT provoca que:", options: ["Se excrete glucosa.", "Se reabsorba casi totalmente.", "Se secrete.", "Se pierda."], ans: 1, exp: "Respuesta: B" },
            { id: 26, q: "Energía del SGLT:", options: ["ATP directo.", "Gradiente de Na+ de la bomba Na/K.", "Glucosa.", "Calor."], ans: 1, exp: "Respuesta: B" },
            { id: 27, q: "Un sistema Antiporte:", options: ["Misma dirección.", "Con agua.", "Direcciones opuestas.", "Sin proteína."], ans: 2, exp: "Respuesta: C" },
            { id: 28, q: "El intercambiador Na+/Ca2+ (NCX) es:", options: ["Activo primario.", "Activo secundario antiporte.", "Simporte.", "Canal."], ans: 1, exp: "Respuesta: B" },
            { id: 29, q: "Ruta de glucosa en intestino:", options: ["GLUT apical.", "SGLT apical y Na/K apical.", "SGLT apical, GLUT basolateral, Bomba Na/K basolateral.", "Simple."], ans: 2, exp: "Respuesta: C" },
            { id: 30, q: "Células intercaladas A funcionan en:", options: ["Alcalosis.", "Acidosis.", "Hidratación.", "Ayuno."], ans: 1, exp: "Respuesta: B" },
            { id: 31, q: "Transportador apical de célula A para ácido:", options: ["SGLT.", "H+-ATPasa y H+/K+-ATPasa.", "Cl/HCO3.", "Na."], ans: 1, exp: "Respuesta: B" },
            { id: 32, q: "En alcalosis, las células B:", options: ["Iguales que A.", "Invierten transportadores (HCO3 a orina).", "Mueren.", "Paran."], ans: 1, exp: "Respuesta: B" },
            { id: 33, q: "En célula A, el bicarbonato:", options: ["A la orina.", "A la sangre por antiporte con Cl.", "Se destruye.", "Glucosa."], ans: 1, exp: "Respuesta: B" },
            { id: 34, q: "Célula polarizada implica:", options: ["Carga eléctrica.", "Diferentes transportadores en apical y basolateral.", "Polo Norte.", "Solo basal."], ans: 1, exp: "Respuesta: B" },
            { id: 35, q: "Endocitosis por receptor es:", options: ["Inespecífica.", "Selectiva (concentra LDL, etc).", "Sin energía.", "Sin vesículas."], ans: 1, exp: "Respuesta: B" },
            { id: 36, q: "Proteína que recubre vesícula de LDL:", options: ["Caveolina.", "Clatrina.", "Actina.", "Tubulina."], ans: 1, exp: "Respuesta: B" },
            { id: 37, q: "El receptor de LDL tras acidificarse:", options: ["Se degrada.", "Se recicla a la membrana.", "Va al núcleo.", "Lisosoma."], ans: 1, exp: "Respuesta: B" },
            { id: 38, q: "Hipercolesterolemia familiar se debe a fallo en:", options: ["Síntesis.", "Receptor de LDL.", "Bomba Na.", "Canal Ca."], ans: 1, exp: "Respuesta: B" },
            { id: 39, q: "En Transferrina:", options: ["Se degrada.", "Receptor y ligando se reciclan.", "Hierro sale.", "Sin clatrina."], ans: 1, exp: "Respuesta: B" },
            { id: 40, q: "Transcitosis es:", options: ["Sin vesículas.", "Paso de un lado a otro mediante vesículas.", "Rotura.", "División."], ans: 1, exp: "Respuesta: B" },
            { id: 41, q: "Exocitosis regulada requiere:", options: ["Sin parada.", "Señal (ej. aumento de Ca2+).", "Sin ATP.", "Muerte."], ans: 1, exp: "Respuesta: B" },
            { id: 42, q: "En célula beta, tras comer, se cierra:", options: ["Canal Na.", "Canal K-ATP.", "Canal Ca.", "Canal Cl."], ans: 1, exp: "Respuesta: B" },
            { id: 43, q: "Cierre de K-ATP provoca:", options: ["Hiperpolarización.", "Despolarización.", "Repolarización.", "Salida K."], ans: 1, exp: "Respuesta: B" },
            { id: 44, q: "La despolarización abre canales de:", options: ["Sodio.", "Potasio.", "Calcio (Ca2+) voltaje-dep.", "Cloro."], ans: 2, exp: "Respuesta: C" },
            { id: 45, q: "Efecto de insulina en músculo:", options: ["Nada.", "Translocación de GLUT4 a membrana.", "Cierra GLUT.", "Inhibe."], ans: 1, exp: "Respuesta: B" },
            { id: 46, q: "Fagocitosis es:", options: ["Todas las células.", "Sistema inmune (pseudópodos).", "Pinocitosis.", "Pasivo."], ans: 1, exp: "Respuesta: B" },
            { id: 47, q: "Diabetes Tipo 1:", options: ["K no cierra.", "Destrucción autoinmune de células beta.", "Resistencia.", "Exceso."], ans: 1, exp: "Respuesta: B" },
            { id: 48, q: "Diabetes Tipo 2:", options: ["Sin insulina.", "Resistencia al receptor.", "Sin glucosa.", "Exceso."], ans: 1, exp: "Respuesta: B" },
            { id: 49, q: "Gráfica cinética:", options: ["Pasiva lineal, Facilitada hiperbólica (satura).", "Pasiva satura.", "Iguales.", "Facilitada lineal."], ans: 0, exp: "Respuesta: A" },
            { id: 50, q: "Simporte implica:", options: ["Una molécula.", "Direcciones opuestas.", "Misma dirección.", "Sin energía."], ans: 2, exp: "Respuesta: C" }
        ];

        let currentList = [];
        let failedIds = new Set();
        let markedIds = new Set();

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function initQuiz(mode) {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('app-container').classList.remove('hidden');
            
            const sidebar = document.getElementById('sidebar');
            const main = document.getElementById('main-area');
            sidebar.innerHTML = "";
            main.innerHTML = "";

            currentList = JSON.parse(JSON.stringify(dbQuestions));
            if (mode === 'random') shuffle(currentList);

            currentList.forEach((q, index) => {
                // Dot
                const dot = document.createElement('div');
                dot.className = 'nav-dot';
                dot.id = `dot-${q.id}`;
                dot.innerText = q.id;
                dot.onclick = () => document.getElementById(`card-${q.id}`).scrollIntoView();
                sidebar.appendChild(dot);

                // Card
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${q.id}`;
                
                const qText = document.createElement('h3');
                qText.innerText = `${q.id}. ${q.q}`;

                const optsDiv = document.createElement('div');
                q.options.forEach((opt, i) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => checkAnswer(q, i, btn, card);
                    optsDiv.appendChild(btn);
                });

                const exp = document.createElement('div');
                exp.className = 'explanation';
                exp.id = `exp-${q.id}`;
                exp.innerText = q.exp;

                card.append(qText, optsDiv, exp);
                main.appendChild(card);
            });
        }

        function checkAnswer(q, index, btn, card) {
            if (card.classList.contains('answered')) return;
            card.classList.add('answered');

            const dots = document.getElementById(`dot-${q.id}`);
            const exp = document.getElementById(`exp-${q.id}`);
            exp.style.display = 'block';

            if (index === q.ans) {
                btn.classList.add('correct');
                dots.classList.add('correct');
            } else {
                btn.classList.add('wrong');
                dots.classList.add('wrong');
                failedIds.add(q.id);
                // Highlight correct
                const buttons = card.querySelectorAll('.option-btn');
                buttons[q.ans].classList.add('correct');
            }
            
            const btns = card.querySelectorAll('.option-btn');
            btns.forEach(b => b.disabled = true);
        }

        function showResults() {
            document.getElementById('results-modal').classList.remove('hidden');
            const corrects = document.querySelectorAll('.nav-dot.correct').length;
            document.getElementById('res-msg').innerText = `Has acertado ${corrects} de ${dbQuestions.length}`;
        }

        function closeModal() {
            document.getElementById('results-modal').classList.add('hidden');
        }
    </script>
</body>
</html>
