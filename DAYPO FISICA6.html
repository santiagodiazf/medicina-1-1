<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bioelectricidad y RM - Modo Estudio</title>
    <style>
        :root {
            --primary: #8e44ad;
            --light-bg: #f4ecf7;
            --correct: #d4edda;
            --correct-text: #155724;
            --incorrect: #f8d7da;
            --incorrect-text: #721c24;
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #fdfdfd;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 { margin: 0; font-size: 2em; }
        .subtitle { font-size: 1em; opacity: 0.9; margin-top: 10px; }

        .question-card {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary);
        }
        .q-text {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .options-list {
            list-style: none;
            padding: 0;
        }
        .option {
            padding: 15px;
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .option:hover:not(.disabled) {
            background-color: var(--light-bg);
            border-color: #d2b4de;
            transform: translateX(5px);
        }

        /* Estados de validación */
        .option.correct {
            background-color: var(--correct);
            border-color: #c3e6cb;
            color: var(--correct-text);
            font-weight: 600;
        }
        .option.correct::after {
            content: "✓";
            position: absolute;
            right: 15px;
            font-weight: bold;
        }
        .option.incorrect {
            background-color: var(--incorrect);
            border-color: #f5c6cb;
            color: var(--incorrect-text);
            opacity: 0.8;
        }
        .option.incorrect::after {
            content: "✕";
            position: absolute;
            right: 15px;
            font-weight: bold;
        }
        .disabled {
            pointer-events: none;
            cursor: default;
        }

        /* Caja de Explicación */
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #eafaf1;
            border-top: 3px solid #2ecc71;
            border-radius: 0 0 8px 8px;
            font-size: 0.95em;
            color: #27ae60;
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-reset {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 40px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }
        .btn-reset:hover { background-color: #71368a; }

    </style>
</head>
<body>

<header>
    <h1>Test Bioelectricidad y RM</h1>
    <div class="subtitle">FM Shark Crew | Modo Estudio Interactivo</div>
</header>

<div id="quiz-container"></div>

<button class="btn-reset" onclick="window.scrollTo(0,0); location.reload()">⟳ Reiniciar Test</button>

<script>
    /* Base de datos procesada:
       - 'correctIndex' indica la posición correcta (0, 1, 2, 3) en el array 'options'.
       - He limpiado las opciones tipo "a y b" para que tengan sentido al barajarse.
    */
    const quizData = [
        {
            q: "Según la distribución de los iones de Na+ a ambos lados de la membrana celular:",
            options: ["Tienen tendencia a entrar debido a ambos potenciales (membrana y equilibrio)", "Tienen tendencia a salir debido al potencial de membrana", "Tienen tendencia a salir debido al potencial de equilibrio", "Tienen tendencia a salir debido a la concentración"],
            correctIndex: 0,
            expl: "Tanto el gradiente de concentración como el gradiente eléctrico favorecen la entrada masiva de sodio al interior celular."
        },
        {
            q: "Según la distribución de los iones de K+ a ambos lados de la membrana celular:",
            options: ["Tienen tendencia a entrar debido al potencial de equilibrio y salir por el de membrana", "Tienen tendencia a salir debido al potencial de equilibrio y entrar por el de membrana", "Tienen tendencia a entrar debido a ambos", "Tienen tendencia a salir debido a ambos"],
            correctIndex: 0,
            expl: "El potasio está muy concentrado dentro (tiende a salir por difusión/equilibrio), pero el interior negativo lo atrae (tiende a entrar por potencial eléctrico/membrana)."
        },
        {
            q: "La mayor velocidad de conducción que presentan las fibras mielínicas es debida a:",
            options: ["La conducción saltatoria y menor capacitancia", "A la mayor longitud de estas fibras", "A la existencia de un mayor número de cargas transportadas", "A una disminución de la resistencia intracelular"],
            correctIndex: 0,
            expl: "La mielina aísla el axón, obligando a la corriente a 'saltar' de un nodo de Ranvier a otro, aumentando drásticamente la velocidad."
        },
        {
            q: "En la cúspide del potencial de acción (+30mV), el potencial de equilibrio del sodio es +60mV y el del potasio -90mV, por lo que:",
            options: ["El sodio sigue tendiendo a entrar y el potasio a salir fuertemente", "El sodio se encuentra en equilibrio", "El potasio tiende a entrar", "Ambos están en equilibrio"],
            correctIndex: 0,
            expl: "A +30mV, el sodio aún no ha alcanzado su potencial de equilibrio (+60mV), por lo que sigue entrando algo, y el potasio tiene una fuerza electromotriz enorme para salir."
        },
        {
            q: "En los nervios mielínicos:",
            options: ["Se consigue un avance más rápido del impulso nervioso", "La carga transportada es mayor que en el nervio desnudo", "Hay una transmisión continua a lo largo de toda la fibra", "La velocidad es menor"],
            correctIndex: 0,
            expl: "La conducción es saltatoria (no continua) y mucho más rápida que en fibras amielínicas."
        },
        {
            q: "La transmisión de la información de unos órganos a otros es un fenómeno de tipo:",
            options: ["Eléctrico", "Termodinámico", "Ondulatorio puro", "Mecánico"],
            correctIndex: 0,
            expl: "La base de la comunicación nerviosa son los potenciales eléctricos."
        },
        {
            q: "La transmisión del impulso nervioso tiene su base en la existencia de:",
            options: ["Diferencia de concentraciones de iones a ambos lados de la membrana", "Diferentes temperaturas a ambos lados", "Electrodos colocados sobre el organismo", "Radionúclidos"],
            correctIndex: 0,
            expl: "El gradiente electroquímico (Na+, K+, Cl-) es la 'batería' que permite generar impulsos."
        },
        {
            q: "Si la variación de energía potencial que experimenta un ion al salir de la célula es positiva:",
            options: ["El ion tiene tendencia a entrar en la misma", "El ion tiene tendencia a salir", "El sistema está en equilibrio", "No hay flujo neto"],
            correctIndex: 0,
            expl: "En termodinámica, los sistemas tienden a minimizar su energía potencial. Si salir aumenta la energía (variación positiva), el ion prefiere quedarse dentro o entrar."
        },
        {
            q: "En el estado de reposo existe una diferencia de potencial de unos -90mV, estando:",
            options: ["El interior cargado negativamente respecto al exterior", "El exterior cargado negativamente respecto al interior", "El interior cargado positivamente", "Ambos neutros"],
            correctIndex: 0,
            expl: "El potencial de reposo es negativo (-70 a -90mV), indicando que el interior es más negativo que el exterior."
        },
        {
            q: "Mediante el transporte activo (Bomba Na/K):",
            options: ["Se extrae Na+ y se introduce K+ contra gradiente", "Se extrae K+ del interior y se introduce Na+", "Se extrae Cl- y se introduce K+", "Se igualan las concentraciones"],
            correctIndex: 0,
            expl: "La bomba gasta ATP para sacar 3 Na+ y meter 2 K+, manteniendo los gradientes vitales."
        },
        {
            q: "El potencial de acción consiste en:",
            options: ["Los cambios rápidos y transitorios del potencial de membrana tras un estímulo", "La diferencia de potencial estable en reposo", "El registro de la actividad del corazón", "La tensión del tubo de rayos X"],
            correctIndex: 0,
            expl: "Es una despolarización rápida seguida de repolarización que viaja por la membrana."
        },
        {
            q: "En las células excitables, cuando llega un estímulo umbral:",
            options: ["Se producen variaciones en la permeabilidad de la membrana (se abren canales)", "Aumenta la impermeabilidad", "El potencial permanece inalterable", "Se cierran todos los canales"],
            correctIndex: 0,
            expl: "El estímulo abre canales de Sodio voltaje-dependientes, cambiando la permeabilidad y despolarizando la célula."
        },
        {
            q: "La tendencia de los iones a entrar o salir de la célula viene dada por:",
            options: ["La diferencia entre el potencial de membrana y el potencial de equilibrio del ion", "Solo el potencial de membrana", "Solo el potencial de equilibrio", "El momento magnético"],
            correctIndex: 0,
            expl: "Es la fuerza electromotriz neta (Vm - Eion)."
        },
        {
            q: "La variación de la tensión que tiene lugar cuando se sobrepasan el potencial umbral se denomina:",
            options: ["Potencial de acción", "Potencial de equilibrio", "Potencial de membrana", "Potencial generador"],
            correctIndex: 0,
            expl: "Si se supera el umbral, se dispara la ley del 'todo o nada', generando un Potencial de Acción."
        },
        {
            q: "En el periodo refractario absoluto, se produce el impulso de acción con valor umbral:",
            options: ["No se puede iniciar ningún impulso de acción", "Superior al normal", "Igual al normal", "Inferior al normal"],
            correctIndex: 0,
            expl: "Los canales de Na+ están inactivados, es imposible generar otro disparo sin importar la fuerza del estímulo."
        },
        {
            q: "En el periodo refractario relativo:",
            options: ["Se puede producir un impulso pero con un estímulo superior al normal", "No se puede iniciar impulso", "El umbral es inferior al normal", "El umbral es igual"],
            correctIndex: 0,
            expl: "La célula está hiperpolarizada; es posible disparar, pero cuesta más (se necesita un estímulo más fuerte)."
        },
        {
            q: "El potencial generador desencadena impulsos potenciales de acción que transmiten información modulada en:",
            options: ["Frecuencia", "Amplitud", "Fase", "Intensidad de corriente"],
            correctIndex: 0,
            expl: "El sistema nervioso codifica la intensidad del estímulo mediante la frecuencia de disparo (más estímulo = más disparos por segundo), no por la altura del pico."
        },
        {
            q: "Si un receptor tónico detecta un estímulo y este adquiere un valor estacionario:",
            options: ["El potencial generador se mantiene (adaptación lenta)", "El potencial desaparece", "No existe potencial", "Se hace oscilante"],
            correctIndex: 0,
            expl: "Los receptores tónicos siguen disparando mientras dure el estímulo (ej. dolor), a diferencia de los fásicos."
        },
        {
            q: "Si un receptor fásico detecta un estímulo estacionario:",
            options: ["El potencial generador desaparece o disminuye rápidamente (adaptación rápida)", "El potencial se mantiene constante", "Aumenta progresivamente", "Se invierte"],
            correctIndex: 0,
            expl: "Los receptores fásicos (ej. tacto, olor) solo avisan al inicio y final del estímulo; se adaptan rápido."
        },
        {
            q: "A partir de un valor umbral del potencial de membrana, la permeabilidad de la membrana para el sodio:",
            options: ["Aumenta drásticamente (retroalimentación positiva)", "Disminuye", "Se hace constante", "Es independiente"],
            correctIndex: 0,
            expl: "Ciclo de Hodgkin: la despolarización abre canales de Na+, entra Na+, despolariza más, abre más canales..."
        },
        {
            q: "Un aumento del diámetro del axón se traduce en:",
            options: ["Aumento de la velocidad de conducción", "Disminución de la velocidad", "Independencia de la velocidad", "Mayor resistencia interna"],
            correctIndex: 0,
            expl: "Mayor diámetro reduce la resistencia interna al flujo de iones, acelerando la conducción (como en el axón gigante del calamar)."
        },
        {
            q: "¿Cuándo se inicia la sístole ventricular en el ECG?",
            options: ["Al final del complejo QRS (inicio segmento ST)", "Al final de la onda P", "Al final de la onda T", "En la onda U"],
            correctIndex: 0,
            expl: "El QRS representa la despolarización eléctrica; la contracción mecánica (sístole) comienza justo después de completarse la despolarización."
        },
        {
            q: "La electromiografía es el proceso de registrar la actividad eléctrica del:",
            options: ["Músculo esquelético", "Corazón", "Cerebro", "Estómago"],
            correctIndex: 0,
            expl: "EMG = Músculo. ECG = Corazón. EEG = Cerebro."
        },
        {
            q: "El complejo QRS en un electrocardiograma se asocia con:",
            options: ["Despolarización ventricular", "Repolarización auricular", "Despolarización auricular", "Repolarización ventricular"],
            correctIndex: 0,
            expl: "Es el evento eléctrico principal que dispara la contracción de los ventrículos."
        },
        {
            q: "La onda P se asocia con:",
            options: ["Despolarización auricular", "Despolarización ventricular", "Repolarización ventricular", "Sístole ventricular"],
            correctIndex: 0,
            expl: "Marca el inicio del ciclo cardíaco con la activación de las aurículas."
        },
        {
            q: "La onda T se asocia con:",
            options: ["Repolarización ventricular", "Despolarización auricular", "Despolarización ventricular", "Repolarización auricular"],
            correctIndex: 0,
            expl: "Es la recuperación eléctrica de los ventrículos antes del siguiente latido."
        },
        {
            q: "El ritmo cerebral de atención o alerta (ojos abiertos) se caracteriza por ondas:",
            options: ["Beta", "Alfa", "Theta", "Delta"],
            correctIndex: 0,
            expl: "Beta (>13Hz) indica actividad mental activa. Alfa es relajación (ojos cerrados)."
        },
        {
            q: "En la derivación III del electrocardiograma se mide la diferencia de potencial entre:",
            options: ["Brazo izquierdo y pierna izquierda", "Brazo derecho y brazo izquierdo", "Brazo derecho y pierna izquierda", "Brazo derecho y pierna derecha"],
            correctIndex: 0,
            expl: "Triángulo de Einthoven: DI (BD-BI), DII (BD-PI), DIII (BI-PI)."
        },
        {
            q: "La velocidad estándar de inscripción del papel milimetrado en el ECG es:",
            options: ["25 mm/s", "50 mm/s", "10 mm/s", "5 mm/s"],
            correctIndex: 0,
            expl: "Es el estándar mundial. A esta velocidad, 1 cuadradito pequeño = 0.04 segundos."
        },
        {
            q: "El objetivo principal del campo magnético estático B0 en RM es:",
            options: ["Que los spines de los núcleos de hidrógeno se orienten y precesen", "Generar un pulso de excitación", "Producir gradientes", "Detectar la señal"],
            correctIndex: 0,
            expl: "B0 alinea los momentos magnéticos nucleares creando una magnetización neta longitudinal."
        },
        {
            q: "El pulso de Radiofrecuencia (RF) en RM:",
            options: ["Hace que disminuya la magnetización longitudinal y aparezca transversal", "Aumenta la magnetización longitudinal", "Detiene la precesión", "Enfría los imanes"],
            correctIndex: 0,
            expl: "La RF aporta energía (excitación), volcando los spines al plano transversal (resonancia)."
        },
        {
            q: "La constante giromagnética:",
            options: ["Es específica para cada núcleo y relaciona frecuencia y campo", "Depende de la temperatura", "Es igual para todos los isótopos", "Depende del voltaje"],
            correctIndex: 0,
            expl: "Ecuación de Larmor: Frecuencia = Constante Giromagnética × Campo Magnético (B0)."
        },
        {
            q: "Para realizar estudios de RM, los núcleos deben tener:",
            options: ["Espín neto distinto de cero (número impar de protones o neutrones)", "Número par de nucleones", "Carga neutra", "Alta radiactividad"],
            correctIndex: 0,
            expl: "Solo los núcleos con espín (como el Hidrógeno-1) pueden interactuar con campos magnéticos."
        },
        {
            q: "¿Con cuál de estos nucleidos NO se podrán realizar estudios de RM?",
            options: ["16 O (8 protones, 8 neutrones)", "1 H", "31 P", "23 Na"],
            correctIndex: 0,
            expl: "El Oxígeno-16 tiene número par de protones y neutrones, su espín neto es cero (no resuena)."
        },
        {
            q: "Entre los tiempos de relajación T1 (longitudinal) y T2 (transversal) se verifica que:",
            options: ["T1 es mayor que T2", "T1 es menor que T2", "T1 es igual a T2", "No tienen relación"],
            correctIndex: 0,
            expl: "La relajación T2 (spin-spin) es siempre mucho más rápida que la recuperación T1 (spin-red)."
        },
        {
            q: "Llamamos Tiempo de Eco (TE) a:",
            options: ["El tiempo desde el pulso de excitación hasta que se recoge la señal (eco)", "El tiempo entre dos pulsos de RF", "La duración del pulso", "El tiempo de relajación"],
            correctIndex: 0,
            expl: "Es el momento exacto en que escuchamos la señal que nos devuelve el tejido."
        },
        {
            q: "El tiempo de relajación T1 es el tiempo para recuperar:",
            options: ["El 63% de la magnetización longitudinal inicial", "El 37% de la transversal", "El 100% de la señal", "El 50% de la energía"],
            correctIndex: 0,
            expl: "Definición matemática de la constante de tiempo exponencial T1."
        },
        {
            q: "El tiempo de relajación T2 es el tiempo para que la magnetización transversal decaiga al:",
            options: ["37% de su valor inicial", "63% de su valor", "50% de su valor", "0%"],
            correctIndex: 0,
            expl: "En T2, la señal se pierde (decae). Al tiempo T2 queda 1/e (aprox 37%) de la señal."
        },
        {
            q: "Es contraindicación absoluta para realizar una RM:",
            options: ["Portar marcapasos antiguo o clips ferromagnéticos cerebrales", "Tener alergia al yodo", "Ser menor de 18 años", "Estar en ayunas"],
            correctIndex: 0,
            expl: "El fuerte campo magnético puede mover metales o averiar electrónica vital. La alergia al yodo afecta al TAC, no a la RM (gadolinio)."
        },
        {
            q: "En una imagen ponderada en T1, el agua y líquidos (LCR) aparecen:",
            options: ["Negros (hipointensos)", "Blancos (hiperintensos)", "Grises", "Brillantes"],
            correctIndex: 0,
            expl: "El agua tiene un T1 muy largo (tarda en recuperar), por lo que da poca señal en T1 y se ve negra."
        },
        {
            q: "En una imagen ponderada en T2, el agua y líquidos (LCR) aparecen:",
            options: ["Blancos (hiperintensos)", "Negros (hipointensos)", "Grises oscuros", "Invisibles"],
            correctIndex: 0,
            expl: "El agua tiene un T2 largo (mantiene señal mucho tiempo), por lo que brilla en imágenes T2 (el 'líquido brilla')."
        },
        {
            q: "La grasa en T1 suele aparecer:",
            options: ["Blanca (hiperintensa)", "Negra", "Gris oscura", "Transparente"],
            correctIndex: 0,
            expl: "La grasa tiene un T1 corto (recupera rápido), por lo que da mucha señal y se ve blanca en T1."
        },
        {
            q: "¿Quién tiene los bíceps más grandes de la clase? (Pregunta broma del original)",
            options: ["Bartel", "Nadie", "El profesor", "Yo"],
            correctIndex: 0,
            expl: "Esta es una pregunta interna del grupo Shark Crew."
        }
    ];

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        container.innerHTML = '';

        // Mezclar preguntas
        let shuffledData = [...quizData];
        shuffleArray(shuffledData);

        shuffledData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';

            const title = document.createElement('div');
            title.className = 'q-text';
            title.innerText = `${index + 1}. ${item.q}`;
            card.appendChild(title);

            // Preparar opciones
            let opts = item.options.map((optText, i) => ({
                text: optText,
                isCorrect: i === item.correctIndex
            }));
            
            // Mezclar opciones
            shuffleArray(opts);

            const ul = document.createElement('ul');
            ul.className = 'options-list';

            opts.forEach(opt => {
                const li = document.createElement('li');
                li.className = 'option';
                li.innerText = opt.text;
                
                li.onclick = () => {
                    if (card.classList.contains('answered')) return;
                    card.classList.add('answered');

                    // Bloquear opciones
                    const allOptions = ul.querySelectorAll('.option');
                    allOptions.forEach(o => o.classList.add('disabled'));

                    if (opt.isCorrect) {
                        li.classList.add('correct');
                    } else {
                        li.classList.add('incorrect');
                        // Buscar correcta
                        opts.forEach((o, idx) => {
                            if (o.isCorrect) allOptions[idx].classList.add('correct');
                        });
                    }

                    // Mostrar explicación
                    const exp = document.createElement('div');
                    exp.className = 'explanation';
                    exp.innerHTML = `<strong>Explicación:</strong> ${item.expl}`;
                    exp.style.display = 'block';
                    card.appendChild(exp);
                };

                ul.appendChild(li);
            });

            card.appendChild(ul);
            container.appendChild(card);
        });
    }

    // Iniciar
    window.onload = renderQuiz;
</script>

</body>
</html>
