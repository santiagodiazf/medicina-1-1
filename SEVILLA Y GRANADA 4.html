<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Biolog√≠a Parte 4 (Final)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3e5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .quiz-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            text-align: left;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #e1bee7;
            padding-bottom: 15px;
        }

        .progress {
            font-weight: 600;
            color: #7b1fa2;
        }

        .score {
            color: #4a148c;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question {
            font-size: 1.25em;
            margin-bottom: 20px;
            color: #212121;
            line-height: 1.5;
            font-weight: 500;
        }

        .options {
            list-style-type: none;
            padding: 0;
        }

        .option-btn {
            background-color: #fff;
            border: 2px solid #f3e5f5;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
            color: #424242;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not([disabled]) {
            background-color: #fce4ec;
            border-color: #f48fb1;
        }

        /* Estados de respuesta */
        .correct {
            background-color: #c8e6c9 !important;
            border-color: #43a047 !important;
            color: #1b5e20 !important;
        }

        .incorrect {
            background-color: #ffcdd2 !important;
            border-color: #e53935 !important;
            color: #b71c1c !important;
        }

        .next-btn {
            background-color: #8e24aa;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 6px;
            cursor: pointer;
            display: none;
            margin-top: 25px;
            float: right;
            transition: background 0.2s;
        }

        .next-btn:hover {
            background-color: #7b1fa2;
        }

        .result-container {
            text-align: center;
            display: none;
        }
        
        .restart-btn {
            background-color: #90a4ae;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 1rem;
        }
        
        .restart-btn:hover {
            background-color: #607d8b;
        }
    </style>
</head>
<body>

<div class="quiz-container" id="quiz-box">
    <div class="header">
        <span class="progress" id="progress">Pregunta 1 de --</span>
        <span class="score" id="score">Aciertos: 0</span>
    </div>
    
    <div class="question" id="question-text">Cargando...</div>
    
    <div class="options" id="options-container"></div>

    <button class="next-btn" id="next-btn" onclick="nextQuestion()">Siguiente Pregunta</button>
</div>

<div class="quiz-container result-container" id="result-box">
    <h2>¬°Temario Completado!</h2>
    <p style="font-size: 1.3em; margin: 20px 0;">Tu puntuaci√≥n final: <span id="final-score" style="font-weight:bold; color:#6a1b9a;"></span></p>
    <button class="restart-btn" onclick="restartQuiz()">Volver a empezar este bloque</button>
</div>

<script>
    /* BLOQUE 4 (FINAL) - PREGUNTAS 211 a 296
       Contiene: Test Biolog√≠a 2 completo y Bloques A, B, C, D, E, F (Nuevas)
       Se han limpiado comillas conflictivas.
    */
    const questions = [
        // --- TEST BIOLOG√çA 2 (Embriolog√≠a y Ciclo) ---
        { q: "En ausencia de factores de crecimiento, la mayor√≠a de las c√©lulas animales detendr√°n el ciclo celular en un punto de restricci√≥n, ¬øen qu√© fase?", options: ["Fase S", "Fase M", "Fase G2", "Fase G1"], correct: 3 },
        { q: "Los gemelos que comparten cavidad amni√≥tica son:", options: ["Dicig√≥ticos", "Monocig√≥ticos, monocoriales y monoamni√≥ticos", "Monocig√≥ticos, bicoriales y monoamni√≥ticos", "Monocig√≥ticos y bicoriales"], correct: 1 },
        { q: "¬øCu√°l es el proceso final de la maduraci√≥n de los espermatozoides que tiene lugar en el aparato genital femenino?", options: ["Reacci√≥n acros√≥mica", "Capacitaci√≥n", "Reacci√≥n cortical", "Espermatog√©nesis"], correct: 1 },
        { q: "La reacci√≥n acros√≥mica consiste en:", options: ["Exocitosis de enzimas hidrol√≠ticas", "Exocitosis de tubulina flagelar", "Endocitosis del ovocito", "Liberaci√≥n de los gr√°nulos corticales del ovocito"], correct: 0 },
        { q: "¬øCu√°l de los siguientes acontecimientos no forma parte de la apoptosis?", options: ["Fragmentaci√≥n del ADN cromos√≥mico", "Fragmentaci√≥n del n√∫cleo", "Fragmentaci√≥n de la c√©lula", "Lisis de los fragmentos celulares y liberaci√≥n de su contenido"], correct: 3 },
        { q: "En los organismos adultos, la muerte celular debe equilibrarse con la:", options: ["Elongaci√≥n", "Diferenciaci√≥n", "Renovaci√≥n", "Migraci√≥n"], correct: 2 },
        { q: "¬øEn qu√© etapa se lleva a cabo el entrecruzamiento o crossing over de los cromosomas hom√≥logos?", options: ["Profase I", "Profase II", "Prometafase I", "Prometafase II"], correct: 0 },
        { q: "Las caspasas efectoras escinden:", options: ["L√°minas nucleares", "Prote√≠nas del citoesqueleto", "Inhibidor DNasa", "Todas las anteriores"], correct: 3 },
        { q: "Los oocitos primarios detienen su meiosis en:", options: ["Intecinesis", "Diploteno", "Metafase II", "Paquiteno"], correct: 1 },
        { q: "La rotura de la envuelta nuclear ocurre en:", options: ["Al principio de la profase", "En prometafase", "Al principio de la anafase", "Al final de G2"], correct: 1 },
        { q: "¬øD√≥nde se desarrollan inicialmente las c√©lulas germinales primordiales?", options: ["En las g√≥nadas durante la cuarta semana", "En el saco vitelino, durante la cuarta semana", "En las g√≥nadas, al quinto mes", "En las g√≥nadas, durante la pubertad"], correct: 1 },
        { q: "¬øCu√°l de las siguientes afirmaciones es falsa respecto a gemelos?", options: ["Los siameses se producen por separaci√≥n incompleta", "Los gemelos dicig√≥ticos se producen por fecundaci√≥n de dos √≥vulos", "Los gemelos monocig√≥ticos pueden ser de diferentes sexos", "Los gemelos dicig√≥ticos pueden ser del mismo sexo"], correct: 2 },
        { q: "La zona pel√∫cida:", options: ["Ayuda a la penetraci√≥n del tejido endometrial", "Sirve como fuente de nutrientes", "Impide la implantaci√≥n prematura del embri√≥n", "Todas las anteriores"], correct: 2 },
        { q: "Las espermatogonias y las oogonias proceden de:", options: ["Espermatocitos y oocitos primarios", "Espermatocitos y oocitos secundarios", "C√©lulas germinativas primordiales", "Ninguna de las anteriores"], correct: 2 },
        { q: "El punto de control G2/M detecta:", options: ["Suficientes nutrientes", "Anclaje de los cromosomas al huso", "ADN no replicado o da√±ado", "Presencia de factores de crecimiento"], correct: 2 },
        { q: "El mesodermo intermedio es el precursor de:", options: ["El sistema urogenital", "El coraz√≥n", "Los somitas", "Los cuerpos vertebrales"], correct: 0 },
        { q: "Las consecuencias de la fecundaci√≥n:", options: ["Restablecimiento n√∫mero diploide", "Determinaci√≥n del sexo", "Activaci√≥n metab√≥lica", "Todas son correctas"], correct: 3 },
        { q: "Una c√©lula madre de la masa celular interna del blastocisto se puede diferenciar en:", options: ["Un embri√≥n completo y los anexos", "Cualquier tejido del embri√≥n", "S√≥lo tejidos derivados del hipoblasto", "S√≥lo tejidos derivados del mesodermo"], correct: 1 },
        { q: "El esclerotomo se origina a partir de las c√©lulas localizadas en:", options: ["La notocorda", "El mesodermo paraaxial", "El mesodermo intermedio", "El mesodermo lateral"], correct: 1 },
        { q: "¬øCu√°l de las siguientes afirmaciones referentes a la segmentaci√≥n es falsa?", options: ["Se produce durante el viaje tub√°rico", "El tama√±o del embri√≥n aumenta progresivamente", "Consiste en una serie de mitosis sucesivas", "Ocurre la compactaci√≥n"], correct: 1 },
        { q: "¬øCu√°l de las siguientes estructuras se forma a partir de las c√©lulas que se introducen por el n√≥dulo de Hensen?", options: ["Tubo neural", "Membrana cloacal", "Notocorda / Placa precordal", "Mesodermo paraaxial"], correct: 2 },
        { q: "La carga gen√©tica del primer corp√∫sculo polar es:", options: ["La misma que la del oocito secundario", "46 cromosomas, 4 crom√°tidas, 2n", "46 cromosomas, 2 crom√°tidas, 2n", "La misma que la del √≥vulo"], correct: 0 },
        { q: "Sobre la l√≠nea primitiva es cierto que:", options: ["Su aparici√≥n marca el principio del blastocito", "En su zona caudal se forma el nodo de Hensen", "Se forma en la l√≠nea medio-caudal del epiblasto", "Se origina por introducci√≥n de la notocorda"], correct: 2 },
        { q: "¬øEn cu√°l de estas fases ocurre una divisi√≥n reduccional?", options: ["Interfase", "Mitosis", "Meiosis I", "Meiosis II"], correct: 2 },
        { q: "C√©lulas del estroma endometrial que adquieren un alto contenido en l√≠pidos y gluc√≥geno despu√©s de la implantaci√≥n:", options: ["Trofobl√°sticas", "Deciduales", "Mesenquimatosas", "Citotrofobl√°sticas"], correct: 1 },
        { q: "¬øCu√°ndo empieza la formaci√≥n de los espermatocitos primarios?", options: ["Durante la cuarta semana embrionaria", "Durante el quinto mes fetal", "En la pubertad", "En el nacimiento"], correct: 2 },
        { q: "En la producci√≥n de gametos femeninos, ¬øcu√°l de las siguientes c√©lulas pueden permanecer latentes durante 12 a 40 a√±os?", options: ["C√©lula germinal primordial", "Ovocito primario", "Ovocito secundario", "Primer corp√∫sculo polar"], correct: 1 },
        { q: "El inductor principal en la inducci√≥n neural primaria es:", options: ["Hipoblasto", "L√≠nea primitiva", "Mesodermo extraembrionario", "La notocorda"], correct: 3 },
        { q: "Los gametos de una especie tienen 30 cromosomas, ¬øCu√°ntos cromosomas tendr√°n sus c√©lulas som√°ticas?", options: ["30", "15", "60", "Ninguna es cierta"], correct: 2 },
        { q: "¬øCu√°l de las siguientes estructuras desempe√±a un papel m√°s activo en la invasi√≥n del endometrio durante la implantaci√≥n?", options: ["Epiblasto", "Sincitiotrofoblasto", "Hipoblasto", "Mesodermo som√°tico"], correct: 1 },
        { q: "El celoma extraembrionario se forma por la aparici√≥n de lagunas o espacios en:", options: ["El mesodermo extraembrionario", "El epiblasto", "La membrana de Heuser", "La cavidad amni√≥tica"], correct: 0 },
        { q: "Un proceso que acontece en la anafase:", options: ["Rotura de la envuelta nuclear", "Alineaci√≥n de cromosomas", "Condensaci√≥n de la cromatina", "Separaci√≥n de las crom√°tidas hermanas"], correct: 3 },
        { q: "¬øCu√°l de las siguientes c√©lulas experimenta normalmente las divisiones mit√≥ticas?", options: ["Ovocito primario", "Ovogonia", "Espermatocito primario", "Esperm√°tida"], correct: 1 },

        // --- BLOQUE A: T√©cnicas, Membrana y Transporte ---
        { q: "¬øCu√°l tipo de microscopio nos permite ver con mejor resoluci√≥n las estructuras transparentes?", options: ["Microscopio de campo claro", "Microscopio de campo oscuro", "Microscopio de contraste de fases", "Microscopio de interferencia de Nomarski"], correct: 3 },
        { q: "En la Potocitosis las ves√≠culas:", options: ["Est√°n revestidas de clatrina", "Est√°n revestidas de potocinina", "Son inducidas", "Est√°n revestidas de caveolina"], correct: 3 },
        { q: "¬øCu√°l de las siguientes afirmaciones sobre las prote√≠nas de la membrana plasm√°tica es falsa?", options: ["Establecen fuertes enlaces covalentes con los l√≠pidos", "Son responsables de la mayor√≠a de las funciones de la membrana", "Pueden mediar como enzimas", "Pueden actuar como transportadores espec√≠ficos"], correct: 0 },
        { q: "¬øQu√© tipos de movimientos pueden realizar las mol√©culas de membrana?", options: ["Rotaci√≥n, difusi√≥n simple, flip-flop y flexi√≥n", "Rotaci√≥n, difusi√≥n lateral, flip-flop y flexi√≥n", "Rotaci√≥n, difusi√≥n lateral flip-flop y giro", "Rotaci√≥n, intercalaci√≥n, flip-flop y flexi√≥n"], correct: 1 },
        { q: "La velocidad con que las mol√©culas difunden por la bicapa lip√≠dica libre es mayor si son:", options: ["Peque√±as hidrof√≠licas", "Peque√±as con carga", "Hidrof√≥bicas", "Peque√±as no polares"], correct: 3 },
        { q: "¬øCu√°l de los siguientes procesos no est√° relacionado con la endocitosis?", options: ["Ves√≠culas revestidas de clatrina", "Fagocitosis", "Secreci√≥n de sustancias", "Macropinocitosis"], correct: 2 },
        { q: "¬øCu√°l de las siguientes mol√©culas no est√° presente en la membrana plasm√°tica?", options: ["Fosfatidilinositol", "Fosfatidilcolina", "Acetilcolina", "Glucosinfol√≠pidos"], correct: 2 },
        { q: "La bicapa lip√≠dica de una c√©lula es asim√©trica ya que:", options: ["La capa externa es rica en fosfatidilcolina y esfingomielina...", "En la capa interna abunda la fosfatidilcolina...", "En la capa interna es imposible encontrar prote√≠nas", "En la capa interna hay gl√∫cidos asociados..."], correct: 0 },
        { q: "Prote√≠nas responsables de la especificidad de la uni√≥n de una ves√≠cula con su membrana diana:", options: ["Rab", "t-SNARE", "COP II", "v-SNARE"], correct: 3 },

        // --- BLOQUE B: Citoesqueleto y Matriz ---
        { q: "¬øPor qu√© los filamentos intermedios no tienen la propiedad de polimerizar y despolimerizarse (inestabilidad din√°mica r√°pida)?", options: ["Porque est√°n formados por alfa-tubulina y beta-tubulina.", "Porque est√°n formados por actina G.", "Porque est√°n formados por prote√≠nas fibrosas.", "Porque est√°n formados por prote√≠nas tubulares..."], correct: 2 },
        { q: "¬øEn qu√© consiste la nucleaci√≥n de la actina?", options: ["Es la condensaci√≥n de microfilamentos para dar lugar a filamentos intermedios.", "Es la uni√≥n de dos d√≠meros de actina...", "Es la uni√≥n de tres mon√≥meros de actina...", "Es el ensamblaje inicial de tres mol√©culas de actina G que permitir√°n continuar la polimerizaci√≥n."], correct: 3 },
        { q: "¬øQu√© prote√≠na interviene en la formaci√≥n de haces contractiles de actina?", options: ["La fimbrina", "La quinesina", "La filamina", "La alfa-actinina"], correct: 3 },
        { q: "¬øCu√°l de los siguientes factores depende la polimerizaci√≥n microtubular?", options: ["Del nivel de tubulina libre, [Ca2+], MAP y GTP.", "De [Ca2+], [Mg2+], tubulina libre, MAP y ATP.", "De la tubulina libre... y ATP.", "De la presi√≥n osm√≥tica"], correct: 0 },
        { q: "¬øCu√°l es la estructura del extremo distal del centriolo maduro?", options: ["9x3+2", "9x3+0", "9x2+2", "Rueda de carro"], correct: 1 },
        { q: "¬øCu√°l es la mol√©cula integrante del material pericentriolar que permite la nucleaci√≥n de los microt√∫bulos?", options: ["la y-inmunoglobulina", "Las microtubulinas", "Las nexinas", "La gamma-tubulina"], correct: 3 },
        { q: "¬øEn qu√© momento del ciclo celular se produce la maduraci√≥n del microt√∫bulo inmaduro (centrosoma)?", options: ["En la fase S", "En la fase G1", "En la fase G2", "En la profase"], correct: 2 },

        // --- BLOQUE C: N√∫cleo y Biolog√≠a Molecular ---
        { q: "¬øCu√°l es la composici√≥n de la l√°mina nuclear?", options: ["Tres tipos de filamentos intermedios: la l√°mina A, B y la C", "Microfilamentos de actina", "Filamentos intermedios, que dan lugar a la l√°mina A y C...", "Microt√∫bulos"], correct: 0 },
        { q: "¬øC√≥mo est√° compuesta la envoltura nuclear?", options: ["Dos membranas internas unidas...", "Tres capas: una interna, un estroma y un espacio intermembrana + l√°mina nuclear", "Bicapa de l√≠pidos...", "Dos bicapas lip√≠dicas con una membrana plasm√°tica"], correct: 1 },
        { q: "¬øC√≥mo atraviesan la envoltura nuclear las mol√©culas de ARNr?", options: ["Gracias a su cola de poli A...", "Son reconocidos por prote√≠nas espec√≠ficas que lo transportan al citosol", "Atraviesan el poro libremente...", "El complejo del poro reconoce su extremo 5'..."], correct: 1 },
        { q: "¬øC√≥mo se llama el complejo formado por la helicasa, la primasa y la polimerasa?", options: ["Replisoma", "Primosoma", "Replicon", "Telomerasa"], correct: 0 },
        { q: "El primosoma es:", options: ["El enzima encargado de sintetizar el cebador", "La unidad de replicaci√≥n", "El grupo constituido por la primasa y la helicasa que act√∫an durante la replicaci√≥n", "El grupo constituido por la primasa y la topoisomerasa"], correct: 2 },
        { q: "¬øQu√© actividad enzim√°tica establece el enlace pept√≠dico entre el aminoacilo del ARNt del sitio A y la cadena pept√≠dica del ARNt del sitio P?", options: ["La aminoacil-ARNt transferasa", "La peptidil transferasa", "La peptidil sintasa", "La aminoacil-ARNt sintetasa"], correct: 1 },
        { q: "La fase de terminaci√≥n de la s√≠ntesis proteica no implica:", options: ["Liberaci√≥n de la cadena polipept√≠dica", "Separaci√≥n de las dos subunidades del ribosoma", "Entrada en el ribosoma del aminoacil-ARN de terminaci√≥n", "Fin de la traducci√≥n del gen"], correct: 2 },
        { q: "¬øQu√© tipos de ARN conforman la subunidad grande ribos√≥mica en eucariotas?", options: ["ARNr 18S, ARNr 28S y ARNr 5.8S", "ARNr 18S y ARNr 5S", "ARNr 28S, ARNr 5.8S y ARNr 5S", "ARNr 5.8S, ARNr 28S y ARNr 5S"], correct: 2 },
        { q: "¬øCu√°l de las siguientes afirmaciones sobre la maduraci√≥n de los transcritos de la ARN polimerasa II es falsa?", options: ["La realizan los espliceosomas", "Se eliminan los intrones", "Se eliminan la caperuza y la cola de poli A", "B√°sicamente consiste en cortes y empalmes"], correct: 2 },
        { q: "¬øCu√°l es la secuencia consenso de inicio de la transcripci√≥n en eucariotas?", options: ["El triplete AUG", "La secuencia TATAA o caja TATA", "La secuencia ATT", "La secuencia GACA..."], correct: 1 },
        { q: "¬øQu√© bases nitrogenadas son p√∫ricas?", options: ["Adenina y timina", "Adenina y uracilo", "Guanina y citosina", "Guanina y adenina"], correct: 3 },
        { q: "Las histonas no nucleos√≥micas son:", options: ["H2A", "H3", "H2B", "H1"], correct: 3 },

        // --- BLOQUE D: Ciclo Celular y Apoptosis ---
        { q: "En la anafase A:", options: ["Se acortan los microt√∫bulos polares", "Se alargan los microt√∫bulos polares", "Se acortan los microt√∫bulos cinetoc√≥ricos", "Se alargan los microt√∫bulos cinetoc√≥ricos"], correct: 2 },
        { q: "¬øEn qu√© fase de la mitosis se alargan los microt√∫bulos polares (separando los polos)?", options: ["Prometafase", "Anafase B", "Anafase A", "Telofase"], correct: 1 },
        { q: "¬øQu√© prote√≠na act√∫a activando el complejo Cdk-Ciclina (finalmente)?", options: ["Una fosfatasa inhibidora", "Una fosfatasa activadora (Cdc25)", "Una prote√≠na reguladora", "La adenilato ciclasa"], correct: 1 },
        { q: "¬øQu√© prote√≠na se expresa para inhibir el complejo CDK-Ciclina en caso de que el material gen√©tico est√© da√±ado?", options: ["P50", "P23", "P21", "P51"], correct: 2 },
        { q: "¬øQu√© mol√©culas se degradan en la anafase para permitir la separaci√≥n de las crom√°tidas?", options: ["La prote√≠na degradada es la cohesina, gracias a su ubiquitinizaci√≥n...", "La prote√≠na que se degrada es la condensina...", "Las prote√≠nas que se degradan son las del centr√≥mero...", "La prote√≠na degradada es la cohesina, por acci√≥n de la separasa."], correct: 3 },
        { q: "¬øQu√© prote√≠na de la membrana externa mitocondrial une la prote√≠na BAD y desencadena el proceso de la apoptosis?", options: ["La Bcl2", "La procaspasa 3", "La caspasa 9", "La procaspasa 9"], correct: 0 },
        { q: "Las caspasas...", options: ["Son enzimas ciste√≠n-proteasas", "Son sintetizadas en forma de procaspasas activas", "Se localizan en el citoplasma y en el espacio intermembrana", "Degradan e inactivan las enzimas..."], correct: 2 },

        // --- BLOQUE E: Gen√©tica Humana ---
        { q: "¬øCu√°l es el fen√≥meno por el cual un solo gen es responsable de efectos fenot√≠picos m√∫ltiples y no relacionados?", options: ["Pleiotrop√≠a", "Fenocopias", "Penetrancia", "Genes letales"], correct: 0 },
        { q: "En la herencia autos√≥mica recesiva:", options: ["La transmisi√≥n es independiente del sexo y los individuos sanos pueden tener hijos enfermos", "La transmisi√≥n del rasgo es independiente del sexo y no hay salto generacional", "La transmisi√≥n del rasgo depende del sexo...", "Los varones est√°n m√°s afectados"], correct: 0 },
        { q: "De la uni√≥n de dos heterocig√≥ticos (Aa x Aa), ¬øqu√© posible porcentaje de la descendencia puede nacer con el mismo genotipo que los parentales?", options: ["25%", "50%", "100%", "75%"], correct: 1 },
        { q: "¬øEn qu√© consiste la cordocentesis?", options: ["Extraer l√≠quido amni√≥tico.", "Obtener vellosidades coriales.", "Estudiar la sangre fetal (del cord√≥n umbilical).", "Analizar la orina del feto."], correct: 2 },
        { q: "En el S√≠ndrome de Wolf-Hirschhorn, ¬øQu√© tipo de anomal√≠a autos√≥mica estructural ocurre y en qu√© cromosoma?", options: ["Una translocaci√≥n simple en el cromosoma 5", "Una deleci√≥n en el cromosoma 8", "Una inversi√≥n en el cromosoma 5", "Una deleci√≥n de los brazos cortos del cromosoma 4 (4p-)."], correct: 3 },
        { q: "Seg√∫n la hip√≥tesis de Lyon, la inactivaci√≥n del cromosoma X:", options: ["No es al azar, siempre se inactiva el paterno", "No es al azar, siempre se inactiva el materno", "Se produce al azar, el inactivado puede ser el materno o el paterno", "Ocurre solo en c√©lulas germinales"], correct: 2 },
        { q: "¬øQu√© significa que una c√©lula sea euploide?", options: ["La c√©lula es triploide.", "El n√∫mero de cromosomas no es m√∫ltiplo de n", "La c√©lula presenta una trisom√≠a.", "El n√∫mero de cromosomas es m√∫ltiplo exacto de n"], correct: 3 },
        { q: "Significado gen√≥mico de las inversiones:", options: ["Monosom√≠a parcial...", "No se produce p√©rdida de material gen√©tico (es equilibrada).", "Monosom√≠a de brazos cortos.", "Trisom√≠a parcial..."], correct: 1 },
        { q: "Marcar la respuesta err√≥nea. ¬øEl s√≠ndrome de X-fr√°gil?", options: ["Es un trastorno gen√©tico", "Est√° ligado al Cromosoma X", "Su causa es la ausencia de una Enzima", "Afecta principalmente a los varones."], correct: 2 },

        // --- BLOQUE F: Embriolog√≠a Detallada ---
        { q: "¬øCu√°ndo, d√≥nde y a partir de qu√© estructura comienza la circulaci√≥n √∫tero-placentaria?", options: ["D√≠a 9-12 a partir de la aparici√≥n de la red lagunar en el sincitiotrofoblasto.", "D√≠a 6 a partir del endometrio.", "D√≠a 14 a partir de las lagunas...", "D√≠a 20 a partir del corion"], correct: 0 },
        { q: "En el decimosexto d√≠a (Gastrulaci√≥n):", options: ["Las c√©lulas empiezan a entrar por el Nudo de Hensen...", "El Nudo de Hensen retrocede.", "Se inicia la formaci√≥n de la l√≠nea primitiva.", "Se inicia la formaci√≥n de la l√≠nea primitiva con la formaci√≥n del mesoblasto (Invaginaci√≥n)."], correct: 3 },
        { q: "¬øQu√© estructura se√±ala la imagen (cavidad grande rodeada de hipoblasto/endodermo)?", options: ["Celoma extraembrionario", "Sincitiotrofoblasto", "Cavidad amni√≥tica", "Saco vitelino"], correct: 3 },
        { q: "El epitelio del tubo gastrointestinal deriva de:", options: ["ectodermo", "endodermo", "mesodermo", "notocorda"], correct: 1 },
        { q: "Los islotes sangu√≠neos de Wolff y de Pander comienzan a formarse en el embri√≥n el d√≠a:", options: ["12", "14", "17-18, coincidiendo con engrosamiento del mesodermo saco vitelino", "20"], correct: 2 },
        { q: "¬øEn qu√© porciones divide el plano frontal al embri√≥n?", options: ["Caudal y dorsal", "Izquierda y derecha", "Cef√°lico y caudal", "Ventral y dorsal"], correct: 3 },
        { q: "Las vellosidades coriales secundarias contienen:", options: ["citotrofoblasto y sincitiotrofoblasto", "mesodermo extraembrionario, citotrofoblasto y sincitiotrofoblasto", "vasos sangu√≠neos, mesodermo...", "vellosidades en grapa..."], correct: 1 },
        { q: "Los neuroporos comunican temporalmente:", options: ["cavidad amni√≥tica y saco vitelino", "celoma intra y extraembrionario", "saco vitelino y tubo neural", "cavidad amni√≥tica y luz del tubo neural"], correct: 3 }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let answered = false;

    const questionElement = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options-container");
    const nextBtn = document.getElementById("next-btn");
    const progressText = document.getElementById("progress");
    const scoreText = document.getElementById("score");
    const quizBox = document.getElementById("quiz-box");
    const resultBox = document.getElementById("result-box");
    const finalScore = document.getElementById("final-score");

    function loadQuestion() {
        answered = false;
        nextBtn.style.display = "none";
        
        const currentQuestion = questions[currentQuestionIndex];
        
        // El n√∫mero mostrado empieza en 211
        questionElement.innerText = `${currentQuestionIndex + 211}. ${currentQuestion.q}`;
        progressText.innerText = `Pregunta ${currentQuestionIndex + 1} de ${questions.length}`;
        
        optionsContainer.innerHTML = "";

        currentQuestion.options.forEach((option, index) => {
            const button = document.createElement("button");
            button.innerText = option;
            button.classList.add("option-btn");
            button.onclick = () => checkAnswer(index, button);
            optionsContainer.appendChild(button);
        });
    }

    function checkAnswer(selectedIndex, selectedButton) {
        if (answered) return;
        answered = true;

        const currentQuestion = questions[currentQuestionIndex];
        const allButtons = optionsContainer.children;

        if (selectedIndex === currentQuestion.correct) {
            selectedButton.classList.add("correct");
            score++;
            scoreText.innerText = `Aciertos: ${score}`;
        } else {
            selectedButton.classList.add("incorrect");
            allButtons[currentQuestion.correct].classList.add("correct");
        }

        for (let btn of allButtons) {
            btn.disabled = true;
            btn.style.cursor = "default";
        }

        nextBtn.style.display = "block";
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        quizBox.style.display = "none";
        resultBox.style.display = "block";
        finalScore.innerText = `${score} / ${questions.length}`;
    }

    function restartQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        scoreText.innerText = "Aciertos: 0";
        quizBox.style.display = "block";
        resultBox.style.display = "none";
        loadQuestion();
    }

    // Iniciar el quiz
    loadQuestion();
</script>
<script>
(function() {
    // 1. Obtener ID del examen
    const params = new URLSearchParams(window.location.search);
    const testId = params.get('id');

    if (testId) {
        // 2. Vigilar cuando aparece la caja de resultados
        const resultBox = document.getElementById('result-box');
        
        // Creamos un observador que detecta cambios en el estilo (display: none -> block)
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // Si la caja de resultados se hace visible
                if (resultBox.style.display === 'block') {
                    
                    // A. Leer la puntuaci√≥n que calcul√≥ el test
                    // El test pone el n√∫mero de aciertos en el span id="final-score"
                    const scoreText = document.getElementById('final-score').innerText;
                    // Limpiamos el texto por si dice "50 / 80" o solo "50"
                    const aciertos = parseInt(scoreText.split('/')[0]);
                    
                    // B. Calcular porcentaje (usamos la variable 'questions' que ya existe en tu test)
                    const total = questions.length;
                    const porcentaje = Math.round((aciertos / total) * 100);

                    // C. Guardar datos
                    let intentos = parseInt(localStorage.getItem('intentos_' + testId) || 0);
                    localStorage.setItem('intentos_' + testId, intentos + 1);

                    let notaMax = localStorage.getItem('nota_' + testId);
                    if (!notaMax || porcentaje > parseInt(notaMax)) {
                        localStorage.setItem('nota_' + testId, porcentaje);
                    }

                    // D. A√±adir bot√≥n de "Volver" si no existe
                    if (!document.getElementById('btn-volver-menu')) {
                        const btn = document.createElement('button');
                        btn.id = 'btn-volver-menu';
                        btn.innerText = "üè† Volver al √çndice";
                        btn.style.cssText = "display:block; margin: 20px auto; padding: 15px 30px; background: #2c3e50; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold;";
                        btn.onclick = function() { window.location.href = 'index.html'; };
                        resultBox.appendChild(btn);
                    }
                }
            });
        });

        // Iniciar la vigilancia
        observer.observe(resultBox, { attributes: true, attributeFilter: ['style'] });
    }
})();
</script>

</body>
</html>