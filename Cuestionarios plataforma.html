<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Mixto Anatomía - Dr. Vivero</title>
    <style>
        :root {
            --primary: #3949ab; /* Índigo */
            --secondary: #e8eaf6;
            --accent: #5c6bc0;
            --success: #43a047;
            --error: #e53935;
            --text: #263238;
            --bg-color: #f5f5f5;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding-top: 100px;
            padding-bottom: 40px;
        }

        /* HEADER FIJO */
        #header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #283593, #3949ab);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
        }

        .header-content {
            width: 90%;
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 1.3rem; font-weight: 700; letter-spacing: 0.5px; }
        .score-badge { 
            background: rgba(255,255,255,0.2); 
            padding: 5px 15px; 
            border-radius: 20px; 
            font-weight: bold; 
            font-size: 1.1rem;
        }

        /* BARRA PROGRESO */
        #progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            position: absolute;
            bottom: 0;
            left: 0;
        }
        #progress-fill {
            height: 100%;
            background: #9fa8da; /* Índigo claro */
            width: 0%;
            transition: width 0.3s ease;
        }

        /* CONTENEDOR PREGUNTAS */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* TARJETA DE PREGUNTA */
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.04);
            border-top: 5px solid transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover { transform: translateY(-2px); box-shadow: 0 8px 15px rgba(0,0,0,0.08); }
        .card.correct { border-top-color: var(--success); }
        .card.incorrect { border-top-color: var(--error); }

        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* OPCIONES */
        .options-grid {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e8eaf6;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--accent);
            background-color: #e8eaf6;
        }

        .option-btn.correct {
            background-color: #e8f5e9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #ffebee;
            border-color: var(--error);
            color: #b71c1c;
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* FEEDBACK / RAZONAMIENTO */
        .feedback {
            margin-top: 20px;
            padding: 15px 20px;
            background-color: #e8eaf6;
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            font-size: 0.95rem;
            display: none;
            animation: slideDown 0.3s ease-out;
        }

        .feedback strong { color: var(--primary); }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* BOTÓN REINICIAR */
        .btn-reset {
            display: block;
            width: 200px;
            margin: 40px auto;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            box-shadow: 0 4px 10px rgba(57, 73, 171, 0.3);
        }
        .btn-reset:hover { background: #283593; }

    </style>
</head>
<body>

    <div id="header-bar">
        <div class="header-content">
            <h1>Examen Mixto Anatomía</h1>
            <div class="score-badge">
                Aciertos: <span id="score">0</span> / <span id="total">0</span>
            </div>
        </div>
        <div id="progress-container">
            <div id="progress-fill"></div>
        </div>
    </div>

    <div class="container" id="quiz-container">
        </div>

    <div class="container">
        <button class="btn-reset" onclick="location.reload()">Reiniciar Test</button>
    </div>

    <script>
        const questionsDB = [
            // --- MIEMBRO SUPERIOR ---
            {
                id: 1,
                q: "En la extremidad acromial de la clavícula se FIJAN los músculos:",
                opts: {
                    a: "Subclavio y trapecio.",
                    b: "Deltoides y trapecio.",
                    c: "Esternocleidomastoideo, pectoral mayor y esternohioideo.",
                    d: "Ninguno de los anteriores.",
                    e: "A, B y C."
                },
                ans: "b",
                reason: "En el tercio lateral (acromial) de la clavícula se inserta el Trapecio (posterior) y se origina el Deltoides (anterior)."
            },
            {
                id: 2,
                q: "¿Qué estructura/s forman parte del paquete vasculonervioso del brazo?",
                opts: {
                    a: "Arteria humeral profunda.",
                    b: "Arteria humeral (braquial).",
                    c: "Vena basílica.",
                    d: "Vena cefálica.",
                    e: "B y C son ciertas."
                },
                ans: "b",
                reason: "El paquete principal (conducto braquial) está formado por la Arteria Humeral, venas satélites y Nervio Mediano."
            },
            {
                id: 3,
                q: "¿Qué estructura camina entre los dos fascículos del pronador redondo y se hace profunda a él?",
                opts: {
                    a: "Arteria radial.",
                    b: "Nervio radial.",
                    c: "Arteria Cubital.",
                    d: "Nervio cubital.",
                    e: "Ninguna de las anteriores."
                },
                ans: "e",
                reason: "Es el Nervio Mediano el que atraviesa las dos cabezas del Pronador Redondo."
            },
            {
                id: 4,
                q: "¿Cuál es el músculo más profundo en la región anterointerna del antebrazo?",
                opts: {
                    a: "Flexor largo del pulgar.",
                    b: "Flexor común profundo de los dedos.",
                    c: "Cubital anterior.",
                    d: "Palmar mayor.",
                    e: "A y B son ciertas."
                },
                ans: "e",
                reason: "El plano profundo anterior está formado por el Flexor Largo del Pulgar y el Flexor Profundo de los Dedos."
            },
            {
                id: 5,
                q: "¿Cuál es el músculo más superficial de la región anteriointerna del antebrazo?",
                opts: {
                    a: "Flexor largo del pulgar.",
                    b: "Flexor común profundo de los dedos.",
                    c: "Cubital anterior.",
                    d: "Pronador cuadrado.",
                    e: "C y D son ciertas."
                },
                ans: "c",
                reason: "El Cubital Anterior (Flexor Ulnar del Carpo) pertenece al plano superficial (epitroclear)."
            },
            {
                id: 6,
                q: "El nervio interóseo anterior inerva al:",
                opts: {
                    a: "Braquioradial.",
                    b: "Pronador corto.",
                    c: "Supinador corto.",
                    d: "Flexor común de los dedos (mitad lateral).",
                    e: "Ninguna es cierta."
                },
                ans: "d",
                reason: "Inerva al Flexor Largo del Pulgar, Pronador Cuadrado y mitad lateral del Flexor Profundo."
            },
            {
                id: 7,
                q: "¿Qué arteria es subsidiaria de la humeral, discurre profunda al pronador redondo, queda cubierta por el braquioradial y se palpa en el canal del pulso?",
                opts: {
                    a: "Humeral Profunda.",
                    b: "Radial.",
                    c: "Cubital.",
                    d: "Interósea anterior.",
                    e: "Ninguna."
                },
                ans: "b",
                reason: "Es la descripción anatómica de la Arteria Radial."
            },
            {
                id: 8,
                q: "¿Qué músculo del antebrazo acaba en la base del quinto metacarpiano (apófisis estiloides)?",
                opts: {
                    a: "Extensor cubital del carpo (Cubital Posterior).",
                    b: "Flexor cubital del carpo.",
                    c: "Palmar mayor.",
                    d: "Braquiorradial.",
                    e: "Ninguno."
                },
                ans: "a",
                reason: "El tendón del Cubital Posterior se inserta en la base dorsal del V metacarpiano."
            },
            {
                id: 9,
                q: "¿Cuál de los siguientes ligamentos es intrínseco de la articulación esternocostoclavicular?",
                opts: {
                    a: "Esternoclavicular anterior.",
                    b: "Interclavicular.",
                    c: "Costoclavicular.",
                    d: "A, B y C son correctas.",
                    e: "A y B son correctas."
                },
                ans: "e",
                reason: "Los ligamentos esternoclaviculares y el interclavicular refuerzan la cápsula (intrínsecos). El costoclavicular es extrínseco pero funcionalmente principal."
            },
            {
                id: 10,
                q: "¿Qué nervio discurre por el canal de Guyon de la mano?",
                opts: {
                    a: "Rama profunda del nervio Cubital.",
                    b: "Rama superficial del nervio Cubital.",
                    c: "Rama profunda del nervio radial.",
                    d: "Rama superficial del nervio radial.",
                    e: "Nervio mediano."
                },
                ans: "a",
                reason: "El nervio Cubital entra y se divide en el canal. Su rama profunda es la estructura crítica que lo atraviesa hacia la celda profunda."
            },
            {
                id: 11,
                q: "¿Qué estructura se hace anterior discurriendo entre las bases de I y II metacarpianos tras pasar la tabaquera anatómica?",
                opts: {
                    a: "Arteria radiopalmar.",
                    b: "Arteria cubito palmar.",
                    c: "Arteria Radial.",
                    d: "Arteria cubital.",
                    e: "Ninguna."
                },
                ans: "c",
                reason: "La Arteria Radial atraviesa el primer espacio interóseo dorsal para formar el arco profundo."
            },
            {
                id: 12,
                q: "¿Superficial y anterior a los músculos interóseos se encuentra?",
                opts: {
                    a: "Arco palmar profundo.",
                    b: "Arco palmar superficial.",
                    c: "Arteria carpiana transversa.",
                    d: "Nervio mediano.",
                    e: "Ninguna."
                },
                ans: "a",
                reason: "El arco profundo se apoya directamente sobre los interóseos y metacarpianos."
            },
            {
                id: 13,
                q: "¿El tendón de qué músculo forma el límite medial de la tabaquera anatómica?",
                opts: {
                    a: "Abductor largo pulgar.",
                    b: "Extensor corto pulgar.",
                    c: "Extensor largo pulgar.",
                    d: "Extensor propio índice.",
                    e: "Extensor radial largo."
                },
                ans: "c",
                reason: "El Extensor Largo del Pulgar forma el límite medial (cubital) de la tabaquera."
            },
            {
                id: 14,
                q: "Indique cuál de las siguientes afirmaciones es FALSA:",
                opts: {
                    a: "El nervio que se afecta en el síndrome del túnel carpiano es el mediano.",
                    b: "En la enfermedad de Dupuytren se produce incapacidad para extender principalmente el primer y segundo dedo.",
                    c: "La aponeurosis dorsal se inserta en ambas falanges.",
                    d: "El flexor común profundo se fija en la falange distal.",
                    e: "B y C."
                },
                ans: "b",
                reason: "Falso: La enfermedad de Dupuytren afecta principalmente a los dedos 4º y 5º (retracción fascia palmar)."
            },
            {
                id: 15,
                q: "Señala cuál de los siguientes músculos o fascias NO pertenece a la pared anterior de la axila:",
                opts: {
                    a: "Pectoral Mayor.",
                    b: "Subclavio.",
                    c: "Pectoral Menor.",
                    d: "Serrato anterolateral o mayor.",
                    e: "Ninguna."
                },
                ans: "d",
                reason: "El Serrato Anterior forma la pared medial de la axila."
            },
            {
                id: 16,
                q: "Señale qué arteria irriga la región posterior e inferior de la axila y de la escápula:",
                opts: {
                    a: "Toracoacromial.",
                    b: "Circunfleja humeral posterior.",
                    c: "Circunfleja humeral anterior.",
                    d: "Torácica lateral.",
                    e: "Ninguna de las anteriores (Arteria Subescapular)."
                },
                ans: "e",
                reason: "La arteria Subescapular (y su rama circunfleja de la escápula) irriga esa región."
            },
            {
                id: 17,
                q: "¿Qué músculo sitúa el húmero en la posición del maestro (aducción, rotación interna y retroversión)?",
                opts: {
                    a: "Supraespinoso.",
                    b: "Infraespinoso.",
                    c: "Redondo Mayor.",
                    d: "Dorsal ancho.",
                    e: "C y D."
                },
                ans: "e",
                reason: "El Dorsal Ancho y el Redondo Mayor realizan extensión, aducción y rotación interna."
            },
            {
                id: 18,
                q: "¿Qué nervio perfora el coracobraquial, inerva bíceps y braquial, y recoge sensibilidad lateral antebrazo?",
                opts: {
                    a: "Nervio musculocutáneo.",
                    b: "Nervio Radial.",
                    c: "Nervio Mediano.",
                    d: "Nervio Cubital.",
                    e: "Ninguno."
                },
                ans: "a",
                reason: "Es la descripción completa del trayecto del Nervio Musculocutáneo."
            },
            {
                id: 19,
                q: "¿Qué estructura se fija en el troquín?",
                opts: {
                    a: "Músculo subescapular.",
                    b: "Ligamento humero humeral.",
                    c: "Porción larga bíceps.",
                    d: "Cápsula.",
                    e: "A y D son ciertas."
                },
                ans: "a",
                reason: "El músculo Subescapular se inserta en el Troquín (tubérculo menor)."
            },
            {
                id: 20,
                q: "¿Qué músculo realiza el movimiento de abducción del húmero?",
                opts: {
                    a: "Infraespinoso.",
                    b: "Supraespinoso.",
                    c: "Deltoides.",
                    d: "Tríceps.",
                    e: "B y C son ciertas."
                },
                ans: "e",
                reason: "El Supraespinoso inicia la abducción y el Deltoides la continúa."
            },

            // --- MIEMBRO INFERIOR ---
            {
                id: 21,
                q: "¿Cuál de los siguientes músculos de la región pélvica NO está inervado por el nervio glúteo superior?",
                opts: {
                    a: "Tensor de la fascia lata.",
                    b: "Glúteo mayor.",
                    c: "Ninguno.",
                    d: "Glúteo medio.",
                    e: "Glúteo menor."
                },
                ans: "b",
                reason: "El Glúteo Mayor está inervado por el nervio Glúteo Inferior."
            },
            {
                id: 22,
                q: "¿Cuál de estos músculos NO pertenece al compartimento medial del muslo?",
                opts: {
                    a: "Grácil.",
                    b: "Recto anterior (Femoral).",
                    c: "Aductor mayor.",
                    d: "Todos pertenecen.",
                    e: "Aductor corto."
                },
                ans: "b",
                reason: "El Recto Anterior pertenece al compartimento anterior (extensores)."
            },
            {
                id: 23,
                q: "¿Con qué vena se une la vena safena menor cuando esta penetra en la fascia profunda?",
                opts: {
                    a: "Con la vena Safena perforante.",
                    b: "Con la vena epigástrica.",
                    c: "Con la vena poplítea.",
                    d: "Con la vena femoral.",
                    e: "Con la vena safena mayor."
                },
                ans: "c",
                reason: "La Safena Menor desemboca en la Vena Poplítea en el hueco poplíteo."
            },
            {
                id: 24,
                q: "¿Qué músculos se localizan en la tercera capa de los músculos plantares?",
                opts: {
                    a: "Flexor corto hallux, abductor hallux...",
                    b: "Abductores...",
                    c: "Interóseos...",
                    d: "Flexor corto del dedo gordo, aductor del dedo gordo, flexor corto del quinto dedo.",
                    e: "Lumbricales..."
                },
                ans: "d",
                reason: "La 3ª capa plantar contiene los músculos cortos del hallux y del 5º dedo y el aductor."
            },
            {
                id: 25,
                q: "El techo de la fosa o rombo poplíteo lo forman:",
                opts: {
                    a: "Músculo Gemelo interno.",
                    b: "Músculo Bíceps femoral.",
                    c: "Músculo Gemelo externo.",
                    d: "Músculos Semimembranoso.",
                    e: "Ninguna es correcta (Fascia y Piel)."
                },
                ans: "e",
                reason: "Los músculos son los límites o paredes; el techo es superficial (fascia poplítea y piel)."
            },
            {
                id: 26,
                q: "¿En los tendones de qué músculo se originan los músculos lumbricales del pie?",
                opts: {
                    a: "Interóseos dorsales.",
                    b: "Flexor largo de los dedos.",
                    c: "Flexor común profundo.",
                    d: "Extensor largo.",
                    e: "Flexor corto."
                },
                ans: "b",
                reason: "Los lumbricales nacen de los tendones del Flexor Largo de los Dedos."
            },
            {
                id: 27,
                q: "¿Con quién se relaciona profundamente el músculo aductor del dedo gordo?",
                opts: {
                    a: "Aponeurosis.",
                    b: "Flexor superficial.",
                    c: "Metatarsianos e interóseos.",
                    d: "Flexor profundo.",
                    e: "Extensor."
                },
                ans: "c",
                reason: "El aductor del hallux cubre los metatarsianos centrales y los interóseos."
            },
            {
                id: 28,
                q: "¿Cuál es la función del músculo tibial anterior?",
                opts: {
                    a: "Todas son correctas.",
                    b: "Ninguna.",
                    c: "Apoyo dinámico del arco medial.",
                    d: "Flexión dorsal del pie.",
                    e: "Inversión del pie."
                },
                ans: "a",
                reason: "Realiza flexión dorsal, inversión y sostiene el arco medial."
            },
            {
                id: 29,
                q: "¿Qué estructuras pasan por el conducto de los aductores o de Hunter?",
                opts: {
                    a: "Todas son correctas.",
                    b: "Arteria femoral.",
                    c: "Nervio del vasto interno (a veces en tramo proximal).",
                    d: "Nervio safeno interno.",
                    e: "Vena femoral."
                },
                ans: "a",
                reason: "El contenido clásico son los vasos femorales y el nervio safeno interno."
            },
            {
                id: 30,
                q: "¿Dónde desembocan los ramos perforantes de la arteria femoral profunda?",
                opts: {
                    a: "Arterias nutricias.",
                    b: "Irrigan vastos.",
                    c: "Conducto común.",
                    d: "Perforan fascia.",
                    e: "Todas las anteriores son correctas."
                },
                ans: "e",
                reason: "Irrigan la musculatura posterior, fémur y se anastomosan ampliamente."
            },
            {
                id: 31,
                q: "¿Cuál de los siguientes nervios NO se origina del Plexo Sacro?",
                opts: {
                    a: "Nervio femoral.",
                    b: "Nervios glúteos.",
                    c: "Nervio ciático.",
                    d: "Nervio tibial.",
                    e: "Nervio peroneo."
                },
                ans: "a",
                reason: "El Nervio Femoral proviene del Plexo Lumbar (L2-L4)."
            },
            {
                id: 32,
                q: "¿Cuál de estas estructuras NO forma parte del suelo de la fosa poplítea?",
                opts: {
                    a: "Músculo poplíteo.",
                    b: "Extremo superior tibia.",
                    c: "Fémur (cara poplítea).",
                    d: "Ligamento poplíteo oblicuo.",
                    e: "Todos forman parte del suelo."
                },
                ans: "e",
                reason: "El suelo lo forman: cara poplítea fémur, cápsula posterior (ligamentos) y músculo poplíteo."
            },
            {
                id: 33,
                q: "De los retináculos del tobillo, ¿cuál tiene origen e inserción en el calcáneo?",
                opts: {
                    a: "Ninguna.",
                    b: "Flexor.",
                    c: "Extensor superior.",
                    d: "Retináculo peroneo inferior (y extensor inferior/frondiforme).",
                    e: "Todas."
                },
                ans: "d",
                reason: "El retináculo peroneo inferior se inserta en el calcáneo a ambos lados de los tendones."
            },
            {
                id: 34,
                q: "¿Qué músculo es satélite de los vasos femorales?",
                opts: {
                    a: "Poplíteo.",
                    b: "Todas.",
                    c: "Cuadriceps.",
                    d: "Sartorio.",
                    e: "Grácil."
                },
                ans: "d",
                reason: "El Sartorio cruza sobre los vasos femorales guiando su trayecto (músculo satélite)."
            },
            {
                id: 35,
                q: "¿Qué músculo efectúa la flexión de las articulaciones MTF a la vez que extiende las IF?",
                opts: {
                    a: "Interóseos plantares.",
                    b: "Todos.",
                    c: "Interóseos dorsales.",
                    d: "No existe.",
                    e: "Lumbricales (y también interóseos)."
                },
                ans: "e",
                reason: "Es la función clásica de los Lumbricales."
            },
            {
                id: 36,
                q: "La arteria tibial anterior pasa distalmente entre los músculos:",
                opts: {
                    a: "Ninguna.",
                    b: "Extensor largo hallux y tibial ant.",
                    c: "Tercer peroneo...",
                    d: "Extensor largo de los dedos y extensor largo del dedo gordo.",
                    e: "Tibial..."
                },
                ans: "d",
                reason: "En el tobillo, el paquete cruza entre el Extensor Largo del Dedo Gordo y el Extensor Largo de los Dedos."
            },
            {
                id: 37,
                q: "La inyección intramuscular en glúteo debe hacerse:",
                opts: {
                    a: "Evitar ciático.",
                    b: "Región glútea.",
                    c: "Todas las opciones son ciertas.",
                    d: "Sin lesión neurovascular.",
                    e: "Cuadrante superior externo."
                },
                ans: "c",
                reason: "Todas las afirmaciones son principios correctos de la inyección glútea."
            },
            {
                id: 38,
                q: "¿Cuál es la principal función de los músculos del plano profundo glúteo (pelvitrocantéreos)?",
                opts: {
                    a: "Estabilizar.",
                    b: "Rotador interno.",
                    c: "Rotador externo de la cadera.",
                    d: "Ninguna.",
                    e: "Aducción."
                },
                ans: "c",
                reason: "Los pelvitrocantéreos son rotadores externos."
            },
            {
                id: 39,
                q: "El nervio ciático…",
                opts: {
                    a: "Por encima piriforme (Falso).",
                    b: "Divide tibial ant/post (Falso).",
                    c: "Atravesando piriforme (Anomalía, no norma).",
                    d: "Ninguna respuesta es cierta (Sale por debajo del piriforme).",
                    e: "Inerva glúteos (Falso)."
                },
                ans: "d",
                reason: "La norma es que salga por el agujero infrapiriforme. La opción C describe una variante anatómica."
            },
            {
                id: 40,
                q: "¿Cuál de los siguientes músculos del pie es inervado por el nervio peroneo profundo?",
                opts: {
                    a: "Pedio o extensor corto de los dedos.",
                    b: "Flexor corto hallux.",
                    c: "Flexor corto dedos.",
                    d: "Abductor hallux.",
                    e: "Abductor 5º."
                },
                ans: "a",
                reason: "El Peroneo Profundo inerva el dorso del pie (Pedio/Extensor corto)."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const scoreSpan = document.getElementById('score');
        const totalSpan = document.getElementById('total');
        const progressFill = document.getElementById('progress-fill');
        
        let score = 0;
        let answeredCount = 0;

        function renderQuiz() {
            totalSpan.textContent = questionsDB.length;

            questionsDB.forEach((q) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.id = `q-${q.id}`;

                const title = document.createElement('div');
                title.classList.add('question-text');
                title.textContent = `${q.id}. ${q.q}`;
                card.appendChild(title);

                const grid = document.createElement('div');
                grid.classList.add('options-grid');

                for (const [key, value] of Object.entries(q.opts)) {
                    const btn = document.createElement('button');
                    btn.classList.add('option-btn');
                    // Usamos dataset para guardar la clave, es más seguro que buscar en el HTML
                    btn.dataset.key = key; 
                    btn.innerHTML = `<strong>${key.toUpperCase()})</strong> ${value}`;
                    
                    btn.onclick = () => handleAnswer(q, key, btn, card, grid);
                    
                    grid.appendChild(btn);
                }
                card.appendChild(grid);

                const feedback = document.createElement('div');
                feedback.classList.add('feedback');
                feedback.innerHTML = `<strong>Respuesta Correcta: ${q.ans.toUpperCase()}</strong><br><br>${q.reason}`;
                card.appendChild(feedback);

                quizContainer.appendChild(card);
            });
        }

        function handleAnswer(qObj, selectedKey, btn, card, grid) {
            if (card.classList.contains('answered')) return;
            card.classList.add('answered');
            answeredCount++;

            const isCorrect = selectedKey === qObj.ans;
            
            // Buscar el botón correcto usando el dataset que añadimos
            const correctBtn = Array.from(grid.children).find(b => b.dataset.key === qObj.ans);

            if (isCorrect) {
                score++;
                btn.classList.add('correct');
                card.classList.add('correct');
            } else {
                btn.classList.add('incorrect');
                card.classList.add('incorrect');
                if (correctBtn) correctBtn.classList.add('correct');
            }

            Array.from(grid.children).forEach(b => b.classList.add('disabled'));
            card.querySelector('.feedback').style.display = 'block';

            scoreSpan.textContent = score;
            const progressPct = (answeredCount / questionsDB.length) * 100;
            progressFill.style.width = `${progressPct}%`;
        }

        renderQuiz();
    </script>
</body>
</html>